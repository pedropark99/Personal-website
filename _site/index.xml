<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>home |&gt; dplyr::glimpse()</title>
<link>https://pedro-faria.netlify.app/index.html</link>
<atom:link href="https://pedro-faria.netlify.app/index.xml" rel="self" type="application/rss+xml"/>
<description>A blog about programming and data analysis, specially with R and Python</description>
<generator>quarto-1.3.353</generator>
<lastBuildDate>Sat, 04 Nov 2023 03:00:00 GMT</lastBuildDate>
<item>
  <title>Everything about import statements in Python</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-10-30-python-pkg/en/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>The import system of Python is a little weird, and can cause so much headaches and problems. In this article I want to describe how the import system in Python works, and also, what are <em>import paths</em> in Python, and how they create so much stress and confusion in some situations.</p>
<p>First of all, the official Python documentation does actually have a pretty detailed page about the import system in Python <sup>1</sup>. But my objective here is to summarize all you need to know about import paths.</p>
</section>
<section id="python-module-vs-python-package" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Python module vs Python package</h1>
<p>Before we continue, is good to know a few concepts about Python, like packages and modules. In essence, a Python module is a single Python script, or single <code>.py</code> file. In contrast, a Python package is basically a bundle (or a collection) of Python modules that can be easily distributed to other peoples.</p>
<p>So if you have a folder called <code>scripts</code>, and, inside of it, you have a Python script called <code>date_ranges.py</code>, then, you have inside this folder a single Python module called <code>date_ranges.py</code>. This description represents the following file structure:</p>
<pre><code>â””â”€â”€ scripts ğŸ“
    â””â”€â”€ date_ranges.py ğŸ“„</code></pre>
<p>Now, letâ€™s consider another example, like the following file structure:</p>
<pre><code>â””â”€â”€ tea_party ğŸ“
    â””â”€â”€ water.py ğŸ“„
    â””â”€â”€ sugar.py ğŸ“„
    â””â”€â”€ cup.py ğŸ“„</code></pre>
<p>Looking at the above structure, we identify a folder called <code>tea_party</code>, and 3 different Python scripts inside of it. In other words, you just have a folder called <code>tea_party</code> that contains 3 different Python modules. Wait! A Python package is not supposed to be a collection of Python modules? So, that means that the folder <code>tea_party</code> is a Python package, right?</p>
<p>Unfortunately, that is wrong. The <code>tea_party</code> folder is not a Python package. At least, not yet. If you consult the official Python documentation, you will see this quote <sup>2</sup>:</p>
<blockquote class="blockquote">
<p>A regular package is typically implemented as a directory containing an <code>__init__.py</code> file.</p>
</blockquote>
<p>So a Python package is a directory (or a folder) that stores a collection of Python modules, but a <code>__init__.py</code> file is always part (or a component) of this collection. Having this in mind, to make <code>tea_party</code> an actual Python package, all we need to do is to add a <code>__init__.py</code> file inside the folder.</p>
<pre><code>â””â”€â”€ tea_party ğŸ“
    â””â”€â”€ __init__.py ğŸ“„
    â””â”€â”€ water.py ğŸ“„
    â””â”€â”€ sugar.py ğŸ“„
    â””â”€â”€ cup.py ğŸ“„</code></pre>
<p>Now, the directory <code>tea_party</code> is an actual Python package, that contains 3 different Python modules (<code>sugar.py</code>, <code>water.py</code> and <code>cup.py</code>) , apart from the <code>__init__.py</code> file, which is mandatory for a Python package.</p>
</section>
<section id="what-is-a-parent-package" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> What is a parent package</h1>
<p>Any Python package can contain multiple subpackages inside of it. Every subpackage is a small package that have a know parent package. For example, take a look at the following file structure:</p>
<pre><code>â””â”€â”€ tea_party ğŸ“
    â””â”€â”€ __init__.py ğŸ“„
    â””â”€â”€ water.py ğŸ“„
    â””â”€â”€ sugar.py ğŸ“„
    â””â”€â”€ cup.py ğŸ“„
    â””â”€â”€ tea ğŸ“
        â””â”€â”€ __init__.py ğŸ“„
        â””â”€â”€ black.py ğŸ“„
        â””â”€â”€ camomile.py ğŸ“„</code></pre>
<p>In this structure, both <code>tea_party</code> and <code>tea</code> directories are regular Python packages. But only <code>tea</code> is a subpackage, because only <code>tea</code> has a know parent package, which is <code>tea_party</code>. In other words, the package <code>tea_party</code> is the parent package of <code>tea</code>. So a parent package is a package that contain one or multiple subpackages inside of it.</p>
</section>
<section id="import-statements-in-python" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Import statements in Python</h1>
<p>Import statements in Python are statements that contains the <code>import</code> keyword. There are two styles (or two formats) of import statements in Python, which are:</p>
<ul>
<li><code>import x</code></li>
<li><code>from x import y</code></li>
</ul>
<p>In the examples above, <code>x</code> is a Python package, or a Python module, while <code>y</code> might be , for example, a subpackage, or a function declared inside of <code>x</code>.</p>
<p>The first format is always an absolute import, while the second format might be an absolute import or a relative import. But in the first format, you are basically importing a entire Python package or a entire Python module into your Python session. In contrast, at the second format, you are importing just a part (or pieces) of an existing Python package or Python module.</p>
<p>Just as an simple example, if I need to see which date is today, I can use an import statement to import the <code>date</code> class from the built-in <code>datetime</code> package, and use the <code>date.today()</code> method to get the answer I need.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> datetime <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> date</span>
<span id="cb5-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(date.today())</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2023-11-03</code></pre>
</div>
</div>
<p>This example uses the second format of import statement, because we are importing just the <code>date</code> class. Instead of import the entire <code>datetime</code> package, we are importing just a piece of it (which is the <code>date</code> class) to our session.</p>
<section id="absolute-imports" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="absolute-imports"><span class="header-section-number">4.1</span> Absolute imports</h2>
<p><strong>For now, letâ€™s focus on absolute imports</strong>, and forget that relative imports exists. An absolute import means that you are importing something using the <code>sys.path</code> variable of your session.</p>
</section>
<section id="relative-imports" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="relative-imports"><span class="header-section-number">4.2</span> Relative imports</h2>
<p>The notion of â€œrelative importsâ€ in Python was introduced at <a href="https://peps.python.org/pep-0328/">PEP 328</a>, and are explained in <a href="https://docs.python.org/3/reference/import.html#package-relative-imports">Package Relative Imports</a> section of the documentation.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="https://docs.python.org/3/reference/import.html" class="uri">https://docs.python.org/3/reference/import.html</a>.â†©ï¸</p></li>
<li id="fn2"><p>https://docs.python.org/3/reference/import.html#regular-packagesâ†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>Python</category>
  <category>Import statements</category>
  <category>Package</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-10-30-python-pkg/en/index.html</guid>
  <pubDate>Sat, 04 Nov 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-10-30-python-pkg/import-path-py.svg" medium="image" type="image/svg+xml"/>
</item>
<item>
  <title>A small example on how to make better decisions with data</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-08-31-data-decisions/en/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>This article describes a real-world situation where me and my team used data to convince our client (which is one of the biggest companines in the brazilian financial market) at the time to make a better decision. Special thanks to <a href="https://www.linkedin.com/in/guilhermeggarcia/">Guilherme Goes</a> and <a href="https://www.linkedin.com/in/paulo-gon-oli/">Paulo GonÃ§alves</a>. They both help me to present these ideas and insights to our client.</p>
<p><strong>Making decisions is hard</strong>. But you always make a better decision when you have data to guide you into a safer and better outcome. When you do not have data to back you up, you are basically in the dark. That is, you make the decision, but you do not know upfront what are the possible outcomes of that decision. You just hope for the best, and this is always a hard position to be in.</p>
<section id="a-data-analyst-should-focus-on-understanding-the-business" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="a-data-analyst-should-focus-on-understanding-the-business"><span class="header-section-number">1.1</span> A Data Analyst should focus on understanding the business</h2>
<p>You will probably notice that a big part of this article is dedicated to give context and explain the business behind this example.</p>
<p>This is intentional, because, one of the real values of this article is to show that we come up with a good proposal to our client, because we understood his business, and we raised some good hypothesis about this business, and by analyzing these hypothesis we come up with a good new strategy.</p>
<p>If you do not understand the business you are analyzing, is less likely that you will come up with a good strategy, or, a good data analysis. By having a good understanding of the business, you will likely have much better ideas on â€œhowâ€ to analyze the data you have.</p>
</section>
</section>
<section id="context" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Context</h1>
<p>In essence, our client was a big brazilian bank, one of the largest in the market. The bank was using our digital plataform to sell different products and services through <a href="https://www.whatsapp.com/">WhatsApp</a>. Our job was to analyze the data generated by the platform to understand how the bank could increase their sales inside this channel.</p>
<section id="the-secured-loan-product" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="the-secured-loan-product"><span class="header-section-number">2.1</span> The secured loan product</h2>
<p>A secured loan was one of several products offered by the bank on WhatsApp. To acquire this product, the user needed to answer several questions, and also, fit into some criterias.</p>
<p>Depending on the type of industry you work in, you might call this as the <em>sales flow</em>, or, the <em>sales path</em>, which is the path (or the steps) that the user needs to follow to acquire the product you are selling.</p>
<p>Most companies want to make this path as short as possible so that the user gets to the product faster. However, we are talking about a loan, so the bank certainly needs a lot of personal and financial information about the user before it gives the loan.</p>
<p>So in this example, the user needed to answer a considerable amount of questions through WhatsApp to get to the final step of the sales path, that is, to confirm the loan.</p>
<p>Most of these questions were asking for some personal information, specially the social ID. With the social ID at hand, we used some APIs to check whether this particular user fitted or not into some important criterias. Most of these criterias were very standard for any type of loan, likeâ€¦ the person should not have any legal debts with the government. Some other criterias were purelly financial and assets related, and were also a very commom practice among banks, likeâ€¦ the person needs to be fully employed, he/she needs to have a car which is fully paid, and, this car needs to be a personal property of the person, i.e.&nbsp;it cannot be a borrowed car from another person.</p>
</section>
<section id="the-weird-criteria" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="the-weird-criteria"><span class="header-section-number">2.2</span> The weird criteria</h2>
<p>But one of the many criterias was a bit strange for us. Identify the exact criteria is not important for the content of this article. That is why I am going to use a random criteria here in this article.</p>
<p>Letâ€™s just say that, to be elegible for this loan, <strong>the user needed to have a black credit card</strong>. If the user did not had this black credit card, we automatically rejected the userâ€™s request for the loan.</p>
<p>In essence, we had a flow that worked a bit like this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-08-31-data-decisions/flow-extended.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">A small representation of the sales path</figcaption>
</figure>
</div>
<p>Every time a user entered our flow, we collected the social ID of this user. Because with this social ID we can use the API to check multiple informations about this person. One of the many things we checked, was whether or not this user had the specific black credit card I mentioned earlier.</p>
</section>
<section id="you-should-not-underestimate-the-bank" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="you-should-not-underestimate-the-bank"><span class="header-section-number">2.3</span> You should not underestimate the bank</h2>
<p>You should not think that the bank was dumb. Everything exists for a reason. Despite the black credit card being a weird criteria, the bank certainly included this specific business rule inside the sales path for â€œrisk trade-offâ€ reasons.</p>
<p>Banks are constantly facing a trade-off between risk and profit. In other words, a secured loan like this is always a good profit opportunity. However, this profit opportunity always come at a cost, mostly in the form of risk.</p>
<p>That is why banks are usually very good at analysing and estimating risks. When a person looks to acquire a loan, the bank starts to analyze several factors in order to estimate how much risky is to give a loan to this person.</p>
<p>This means that the bank probably decided to include this rule, because it estimated that the risk is considerably higher for people that do not have this black credit card. If the estimated risk is higher, then, the bank have a good reason to not offer this loan to those people who do not have a black credit card.</p>
</section>
</section>
<section id="what-we-discovered" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> What we discovered</h1>
<p>We had the hypothesis that this business rule (about the black credit card) was severely affecting the sales result. But we needed to confirm this hypothesis.</p>
<p>Since we had the data returned from the API, we could potentially identify which users did have the black card, and which did not have. So we used R to collect the data from the API, and to analyze this data to investigate the users metadata, and potentially measure the size of the hole that these â€œblack-card-lessâ€ users were creating.</p>
<p>As a result, we discovered that the bank was constantly losing a huge opportunity because of this specific criteria, or, this specific business rule. Doing some basic math, we identified that <strong>67% of the users that visited our channel did not have this black credit card</strong>. This means that 67% of the users that entered our channel were automatically rejected. We were constantly losing a huge chunk of potential leads because they did not fitted into this criteria.</p>
<p>So, for example, if 13,000 users entered our channel, only <img src="https://latex.codecogs.com/png.latex?(1%20-%200.67)%20%5Ctimes%2013,000%20=%204,290"> of these users could potentially finish the path and acquire the loan. The remaining 8,710 users were automatically lost. They were just rejected because they did not had a specific credit card.</p>
<p>This discovery generated some important possibilities for us:</p>
<ul>
<li>Are we reaching the right audience?</li>
<li>Maybe we should focus in attract only people that do have the black credit card to our channel?</li>
<li>Is this criteria or business-rule worth it?</li>
</ul>
<section id="using-data-to-get-a-better-outcome" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="using-data-to-get-a-better-outcome"><span class="header-section-number">3.1</span> Using data to get a better outcome</h2>
<p>Our job was to use the data we collected, to show the bank that the potential gains of selling loans to these â€œblack-card-lessâ€ users were much higher than the potential risk they offered. By using data, we can show the bank (in numbers) the size of the opportunity they were losing. And that is exactly what we did.</p>
<p>Our argument was divided into two separate parts:</p>
<ol type="1">
<li>The size of the lost;</li>
<li>The size of the potential gain;</li>
</ol>
<p>The first part of our presentation focused on the 67% number. We shown the bank that 67% of the users (which is a huge number) were constantly rejected in the flow. But this number alone does not have much flavor. As long as they are maximizing their profit, the bank does not care if they say â€œnoâ€ to 60%, 80% of the users or whatever.</p>
<p>That is why in the second part, we did some more basic math to estimate the potential gains they were losing by not selling to this 67% of users.</p>
</section>
<section id="estimates-are-better-than-you-think" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="estimates-are-better-than-you-think"><span class="header-section-number">3.2</span> Estimates are better than you think</h2>
<p>A data analyst should not realy solely on hard numbers to defend they hypothesis.</p>


</section>
</section>

 ]]></description>
  <category>Data Science</category>
  <category>Storytelling</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-08-31-data-decisions/en/index.html</guid>
  <pubDate>Fri, 01 Sep 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-08-31-data-decisions/decision.avif" medium="image" type="image/avif"/>
</item>
<item>
  <title>Improving decision making with Git and why you should care</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/en/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Last week, me and my team encountered a situation where we need to find out why and how a certain problem occurred. We needed to understand which decisions led to this problem, and why they were made. Pretty normal stuff right?</p>
<p>But understanding what happened was only possible for us because we track every change and every decision that we make with Git, by signing commits and writing Pull Requests (or PRs for short). This article uses this real world situation that we faced to showcase how Git and formal processes to register changes in the codebase (like PRs) are a critical part for improving decision making and understanding how your past decisions are affecting you in the present.</p>
<p>I begin the article describing what problem occurred, and in sequence, I explain what mistakes were made, and how Git helped us to identify those mistakes.</p>
</section>
<section id="what-is-the-argument-in-this-article" class="level1">
<h1>What is the argument in this article?</h1>
<p>To improve your decision making process, you need to actually remember what decisions you made in the first place. Sometimes, that remembering is actually hard.</p>
<p>Different people use different strategies to keep track of the decisions they made. Some people keep various notes about each decision, others, like to document their decisions inside the cards created in the kanban board. But regardless of what strategy you choose, it will always involve some kind (or level) of tracking and documenting the decisions you make along the way.</p>
<p>In this article, I show an real world example where Git and formal Pull Request played this role. In other words, this article seeks to show how Git and Pull Requests can help you to keep track of the decisions that are being made in your team. Who and why they made these decisions? When these decisions took place? etc.</p>
</section>
<section id="the-data-pipeline-where-the-problem-occurred" class="level1">
<h1>The data pipeline where the problem occurred</h1>
<p>The problem occurred in one of the many data pipelines<sup>1</sup> that we manage and support. This specific data pipeline was a â€œaggregate the data and send the results to clientâ€ type of pipeline. In more technical details, this pipeline was a JSON file that cointained all metadata that described what this pipeline was, what steps it performed, what were the dependencies and settings for each task, which specific time of the day these tasks should be performed, etc.</p>
<p>The main step (or task) performed in this pipeline was triggering the execution of a Python notebook. This notebook was perfoming the following steps:</p>
<ol type="1">
<li>aggregates the raw data to get the total sales made per channel.</li>
<li>saves the result in a CSV or Excel file.</li>
<li>send this CSV or Excel file by email to the client.</li>
</ol>
<p>The following diagram show these steps in a visual manner:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/diagrams-en.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">A diagram that summarises the data pipeline were the problem occurred</figcaption>
</figure>
</div>
</section>
<section id="what-problem-occurred" class="level1">
<h1>What problem occurred ?</h1>
<p>Our client notified us saying that they were not receiving the CSV files for about a week. So we started to search for this data pipeline, to look at itâ€™s execution logs. But we did not find anything! Both the Python notebook and the JSON file that described the data pipeline itself disappeared! Is like they never existed.</p>
<p>Not having the Python notebook, is the same as not having any pipeline at all. Both Python and JSON files had simply disapeared from our repository. But the client did received some files a few weeks ago, so, we were positive that this pipeline did existed at some point in the past. But where did it go? Why it disappeared?</p>
</section>
<section id="investigating-the-commmits" class="level1">
<h1>Investigating the commmits</h1>
<p>We use Git to store and track any changes in all of our data pipelines. In other words, all changes that we make to the JSON files that describes each one of our data pipelines are tracked by Git. As you well know, a file do not simply disappear from a Git repository. When a file is removed from a Git repository, is because someone intentionally deleted the file and committed the change to the repository.</p>
<p>Since we knew that this data pipeline existed at some point in the time, I started to investigate, and follow the history of commits. Took around 30 minutes to find the exact commit that deleted the data pipeline, and, oops! The commit was created by me! I deleted the data pipeline from our repository. Okâ€¦ now Why? Why did I deleted this data pipeline?</p>
<p>At this point, Git already helped me to answer two very important questions which were: 1. Who deleted the pipeline? 2. When it was deleted? Because every commit you create in Git have a timestamp associated with it, and the name of the author of that commit, we knew at that point that it was me that deleted the pipeline, a few weeks ago.</p>
</section>
<section id="why-i-made-this-decision" class="level1">
<h1>Why I made this decision?</h1>
<p>But that alone does not answers another part of the problem. We still need to know why I made that decision. Why did I intentionally deleted this pipeline? This is the point where Pull Requests<sup>2</sup> can help us.</p>
<p>Every time we want to publish some changes that we made to a data pipeline, we need to document these changes in a PR. We describe what changes we made, and why we made them. I found the associated PR that contained the commit I made, and in the description of that PR I found the reason why I deleted the pipeline.</p>
<p>The pipeline was constantly failing with a â€œnotebook not foundâ€ error. In other words, the pipeline was trying to trigger the execution of the Python notebook that I mentioned before. But the notebook itself was not found, and because of that, it was throwing this error. This means that the pipeline was basically useless, it was creating execution costs without delivering any value. It also means, that the Python notebook disappeared before the pipeline was deleted.</p>
<p>So I deleted the pipeline. This way we were not spending our resources trying to execute something that we know is going to throw an error, and will not give any value.</p>
</section>
<section id="another-part-of-the-problem" class="level1">
<h1>Another part of the problem</h1>
<p>Ok, now we know why I deleted the pipeline. But that in itself raises some new questions for us. Why did the Python notebook disappeared? The reality is thatâ€¦ we didnâ€™t know why. Unfortunately, our Python notebooks were not hosted inside a Git repository. This means that we did not traced any changes that were made to the notebook.</p>
<p>To be fair, our Python notebooks are hosted inside a Databricks instance, and, if you are familiar with Databricks, you know that actually the Databricks platform do track (to some extent) every change that is made to the notebook, with the <a href="https://docs.databricks.com/pt/notebooks/notebooks-code.html#version-control">Revisions pannel</a>.</p>
<p>So yes, we do have some level of monitoring over the changes made to these notebooks. But not enough to actually understand why that particular notebook was missing. In other words, this â€œRevisionâ€ pannel of Databricks is not capable of tracking removal actions over notebooks.</p>
<p>We were only able to figure it out what was happening in the week after, when we discover that other Python notebooks were also missing. Was a set of three notebooks, called <code>Job_ClientX_Opened_Sessions</code>, <code>Job_ClientX_Sales_per_Channel</code> and <code>Job_ClientX_Opened_Tickets</code>. These three notebooks were located at the folder <code>ClientX</code>. So we had a file structure like this:</p>
<pre><code>â”œâ”€â”€â”€ğŸ“ ClientX
â”‚    â”œâ”€â”€â”€Job_ClientX_Opened_Sessions.py
â”‚    â”œâ”€â”€â”€Job_ClientX_Sales_per_Channel.py
â”‚    â””â”€â”€â”€Job_ClientX_Opened_Tickets.py
â”‚ 
â”œâ”€â”€â”€ğŸ“ ClientY
â”œâ”€â”€â”€ğŸ“ ClientW
â””â”€â”€â”€ğŸ“ ClientZ
...</code></pre>
<p>At that specific day, we found in the execution logs that , close to 08:00 AM, this set of notebooks was avaialable, in other words, they did existed in our Databricks environment close to 08:00 AM. But on that same day, when we searched again at 11:00 AM for these same notebooks in the Databricks environment, we did not found them anymore.</p>
<p>We knew at that point, that these notebooks disappeared within the last 3 hours. It was very recent. But a detail called our attention. The folder <code>ClientX</code>, where these notebooks were supposed to be, was filled with other notebooks with similar names, like this:</p>
<pre><code>â”œâ”€â”€â”€ğŸ“ ClientX
â”‚    â”œâ”€â”€â”€[ClientX] Opened sessions.py
â”‚    â”œâ”€â”€â”€[ClientX] Sales per Channel.py
â”‚    â””â”€â”€â”€[ClientX] Opened Tickets.py
â”‚ 
â”œâ”€â”€â”€ğŸ“ ClientY
â”œâ”€â”€â”€ğŸ“ ClientW
â””â”€â”€â”€ğŸ“ ClientZ
...</code></pre>
<p>That looks weird, because it go against our naming conventions. Me and my team do not name files like this. Than, we raised the question: â€œwait! I think someone is renaming these notebooksâ€. Later that day, our suspicions were confirmed. A colleague outside of our team was intentionally renaming the Python notebooks that were published in the production environment. That is why we were not finding the notebooks, because their names were modified.</p>
<p>The immediate consequence of this renaming action was that the link between the Python notebooks and the data pipelines was lost. That is, the data pipelines were trying to execute these notebooks, but they did not find these notebooks, because their original names were lost.</p>
<p>If we did used Git to track every change made to these python notebooks, we would have discovered this problem much earlier, and could acted to fix it. But the damage was already made. As next steps, we had to:</p>
<ol type="1">
<li>rename the notebooks back to their original names;</li>
<li>remove some of the privileges of our colleague in the Databricks environment;</li>
<li>advise this colleague about what happened, and how his actions caused harm.</li>
</ol>
</section>
<section id="what-mistakes-were-made" class="level1">
<h1>What mistakes were made?</h1>
<p>Below we have the timeline of important events we described:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/timeline.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">The timeline of events</figcaption>
</figure>
</div>
<p>In my head, there was at least three mistakes that were made across this timeline:</p>
<ol type="1">
<li>I did not communicated the removal of the pipeline properly;</li>
<li>Our colleague renamed a notebook in a production environment;</li>
<li>Not using Git to track changes in the notebooks at production environment.</li>
</ol>
<p>Deleting the pipeline was not a mistake. But my mistake was to not <strong>communicate my action</strong> properly. I mean, I did communicated the removal of the pipeline to my peers, but I did not communicate it to my colleague outside of my team that was also involved with this specific client, the same colleague that started to rename multiple notebooks.</p>
<p>In other words, if I had communicated to him that I deleted the pipeline, we would probably have a dialog similar to this:</p>
<ul>
<li><p>Colleague: â€œwait! Our client is still using this data pipeline, why did you removed it?â€</p></li>
<li><p>Me: â€œbecause the pipeline was not finding the notebookâ€</p></li>
<li><p>Colleague: â€œbut why is it not finding the notebook?â€</p></li>
<li><p>Me: â€œwell, the pipeline is looking for a notebook called â€˜Xâ€™, but this notebook disappeared. It does not exist in our environment.â€</p></li>
<li><p>Colleague: â€œwait! I remember of this notebook! I think I just renamed it a few days agoâ€</p></li>
<li><p>Me: â€œwait! You renamed a notebook in production?â€</p></li>
<li><p>Colleague: â€œyes, I think soâ€</p></li>
</ul>
<p>With this dialog we could probably solved the puzzle much quicker, and we could fix the mistakes before any more harm could be created. So if I did communicated to this colleague that I deleted the pipeline, we would probably reach the core of the problem more quickly.</p>
<p>Everything started when our colleague decided to rename a notebook directly in the production environment without us knowing. This was certainly a mistake, but who does not mistakes sometimes right? As we described in the article, the â€œRevision systemâ€ of Databricks is limited, and did not tracked this very important change, and because of that, we initially had no idea what have happened with the notebook.</p>
<p>We took one week to actually figure it out what was causing the â€œdisappearanceâ€ of the notebooks. If we did use Git to track all changes made to the notebooks published in the production environment, we would spot the â€œrenaming actionâ€ made much, much, much quicker. So not using Git over these notebooks was a mistake too.</p>
</section>
<section id="how-git-helped-us-to-solve-the-issue" class="level1">
<h1>How Git helped us to solve the issue</h1>
<p>Git is an extremely powerful tool, and by having a centrallized server that register all changes you make to the project, you can look at the past, understand what changes you made. You can actually see the evolution or the timeline of your project, and perceive how much features, or, how much improvements you made to the project. You can also spot the decisions you made in the past. This gives you the ability to re-think your decision making process.</p>
<p>One fact we knew from the beggining: a data pipeline and a Python notebook simply disappeared from our environment. With Git we manage to track down and understand how, when and why did the data pipeline disappeared, and we were able to locate the data pipeline again, and restore it to itâ€™s previous state, and re-send the files. If we did used Git on the notebooks, we could also track down the renaming operations made to these notebooks as well.</p>
<p>Not only did we fixed the issue, but also, by understanding what happened, and what decisions were made that led to the dissapeareance of the data pipeline, we could identify the flaws in our decision making process. And by identifying these issues, we can now address them, so we do not make these mistakes again.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>What is a pipeline? A pipeline is just a sequence of steps (or tasks) to be performed at a specific time of the day (or a specific day of the week or of the month, etc.). And a data pipeline is a pipeline that contains tasks that load, transform, send, or ingest data in some form.â†©ï¸</p></li>
<li id="fn2"><p>In essence, a Pull Request (or PR) is a <strong>proposal</strong> to perform a <code>git merge</code> operation. In other words, you create a PR when you want to merge the changes you made in a branch into another branch (most of the times the main branch). The â€œproposalâ€ aspect of a PR means that it needs be approved to be effectively performed. A PR is not a feature from Git. It is actually a standard feature from most Git service providers. So you create a PR inside a Git services platform such as GitHub, GitLab and Azure DevOps, and not inside Git itself. If you are not familiar with PRs, the <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests">GitHub documentation has an excellent article about it</a>â†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>Git</category>
  <category>Decisions</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/en/index.html</guid>
  <pubDate>Mon, 31 Jul 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/git-logo.png" medium="image" type="image/png" height="70" width="144"/>
</item>
<item>
  <title>Melhorando a tomada de decisÃ£o com Git e porquÃª vocÃª deveria se importar</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/pt/index.html</link>
  <description><![CDATA[ 




<section id="introduÃ§Ã£o" class="level1">
<h1>IntroduÃ§Ã£o</h1>
<p>Na semana passada, eu e minha equipe nos deparamos com uma situaÃ§Ã£o em que precisÃ¡vamos descobrir por que e como ocorreu um determinado problema. PrecisÃ¡vamos entender quais decisÃµes levaram a esse problema. Algo bem normal, nÃ£o Ã©?</p>
<p>Mas entender o que aconteceu sÃ³ foi possÃ­vel para nÃ³s porque rastreamos cada mudanÃ§a e cada decisÃ£o que tomamos com o Git, assinando commits e escrevendo Pull Requests (ou PRs para abreviar). Este artigo usa essa situaÃ§Ã£o do mundo real que enfrentamos para mostrar como o Git e os processos formais para registrar alteraÃ§Ãµes na base de cÃ³digo (como PRs) sÃ£o uma parte crÃ­tica para melhorar a tomada de decisÃµes e entender como suas decisÃµes passadas estÃ£o afetando vocÃª no presente.</p>
<p>ComeÃ§o o artigo descrevendo qual foi o problema que nÃ³s enfrentamos e, na sequÃªncia, explico quais erros foram cometidos e como o Git nos ajudou a identificar esses erros.</p>
</section>
<section id="qual-Ã©-o-argumento-deste-artigo" class="level1">
<h1>Qual Ã© o argumento deste artigo?</h1>
<p>Para melhorar o seu processo de tomada de decisÃ£o, vocÃª precisa primeiro se lembrar de quais foram as decisÃµes que vocÃª tomou. Ã€s vezes, essa lembranÃ§a se torna uma tarefa realmente difÃ­cil.</p>
<p>Diferentes pessoas adotam estratÃ©gias diferentes para acompanhar as decisÃµes que tomaram. Algumas pessoas mantÃªm vÃ¡rias anotaÃ§Ãµes sobre cada decisÃ£o, outros, gostam de documentar suas decisÃµes dentro dos cartÃµes (ou <em>cards</em>) criados dentro do quadro kanban de sua equipe. Mas independentemente de qual seja a estratÃ©gia que vocÃª escolher, ela sempre vai envolver algum tipo (ou nÃ­vel) de rastreamento e tambÃ©m de documentaÃ§Ã£o dessas decisÃµes que vocÃª faz ao longo do caminho.</p>
<p>Neste artigo, mostro um exemplo do mundo real em que o Git e o Pull Request formal desempenharam esse papel. Em outras palavras, este artigo busca mostrar como Git e Pull Requests podem te ajudar a acompanhar as decisÃµes que estÃ£o sendo feitas em sua equipe. Quem e por que eles tomaram essas decisÃµes? Quando essas decisÃµes aconteceram? etc.</p>
</section>
<section id="o-pipeline-de-dados-onde-ocorreu-o-problema" class="level1">
<h1>O pipeline de dados onde ocorreu o problema</h1>
<p>O problema ocorreu em um dos muitos pipelines de dados<sup>1</sup> que gerenciamos e oferecemos suporte. Esse pipeline de dados especÃ­fico era um pipeline do tipo â€œagregar os dados e enviar os resultados ao clienteâ€. Em detalhes mais tÃ©cnicos, esse pipeline era um arquivo JSON que continha todos os metadados que descreviam o que era esse pipeline, quais etapas deveriam ser executavas, quais eram as dependÃªncias e configuraÃ§Ãµes de cada tarefa, em que horÃ¡rio especÃ­fico do dia essas tarefas deveriam ser executadas, etc.</p>
<p>A principal etapa (ou tarefa) executada nesse pipeline era a execuÃ§Ã£o de um notebook de Python. Este notebook estava executando as seguintes etapas:</p>
<ul>
<li>agregar os dados brutos para obter o total de vendas feitas por canal.</li>
<li>salva o resultado em um arquivo CSV ou Excel.</li>
<li>enviar este arquivo CSV ou Excel por e-mail para o cliente.</li>
</ul>
<p>O diagrama a seguir mostra essas etapas de maneira visual:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/diagrams-pt.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Um diagrama que resume o pipeline de dados onde o problema ocorreu</figcaption>
</figure>
</div>
</section>
<section id="qual-foi-o-problema-que-ocorreu" class="level1">
<h1>Qual foi o problema que ocorreu?</h1>
<p>Um dia, nosso cliente nos notificou dizendo que nÃ£o estava recebendo os arquivos CSV hÃ¡ cerca de uma semana. EntÃ£o comeÃ§amos a procurar por esse pipeline de dados, com o objetivo de verificar os seus logs de execuÃ§Ã£o. Contudo, nÃ³s simplesmente nÃ£o encontramos nada! Tanto o notebook Python quanto o arquivo JSON que descrevia o prÃ³prio pipeline de dados desapareceram! Ã‰ como se eles nunca tivessem existido.</p>
<p>NÃ£o ter o notebook Python era a mesma coisa que nÃ£o ter pipeline nenhum. Os arquivos Python e JSON simplesmente desapareceram de nosso repositÃ³rio. Mas nÃ³s sabÃ­amos que o cliente tinha recebido alguns arquivos a algumas semanas atrÃ¡s, portanto, tÃ­nhamos certeza de que esse pipeline existia em algum momento no passado. Mas para onde ele foi? Por que ele desapareceu?</p>
</section>
<section id="investigando-os-commits" class="level1">
<h1>Investigando os commits</h1>
<p>Usamos o Git para armazenar e rastrear quaisquer alteraÃ§Ãµes feitas em todos os nossos pipelines de dados. Em outras palavras, todas as alteraÃ§Ãµes que fazemos nos arquivos JSON que descrevem cada um de nossos pipelines de dados sÃ£o rastreadas pelo Git. Como vocÃª bem sabe, um arquivo simplesmente nÃ£o desaparece de um repositÃ³rio Git. Quando um arquivo Ã© removido de um repositÃ³rio Git, Ã© porque alguÃ©m excluiu intencionalmente o arquivo, e criou o commit da alteraÃ§Ã£o no repositÃ³rio.</p>
<p>Como sabÃ­amos que esse pipeline de dados existia em algum momento, eu comecei a investigar e seguir o histÃ³rico de commits. Demorou cerca de 30 minutos para encontrar o commit exato que excluiu o pipeline de dados e, oops! O commit foi criado por mim! Eu excluÃ­ o pipeline de dados do nosso repositÃ³rio. Okâ€¦ agora, por quÃª? Por que eu excluÃ­ esse pipeline de dados?</p>
<p>A essa altura, o Git jÃ¡ me ajudou a responder duas questÃµes muito importantes que eram: 1. Quem deletou o pipeline? 2. Quando foi excluÃ­do? Pois todo commit que vocÃª cria no Git tem um carimbo de data/hora associado a ele e o nome do autor desse commit, sabÃ­amos naquele momento que fui eu quem excluiu o pipeline, a algumas semanas atrÃ¡s.</p>
</section>
<section id="por-que-tomei-essa-decisÃ£o" class="level1">
<h1>Por que tomei essa decisÃ£o?</h1>
<p>Mas isso por si sÃ³ nÃ£o responde a outra parte do problema. Ainda precisamos saber o porquÃª tomei essa decisÃ£o. Por que excluÃ­ intencionalmente este pipeline? Este Ã© o ponto onde Pull Requests<sup>2</sup> podem nos ajudar.</p>
<p>Sempre que quisermos publicar alguma alteraÃ§Ã£o que fizemos em um pipeline de dados, precisamos documentar essa alteraÃ§Ã£o em um PR. Descrevemos quais mudanÃ§as foram feitas e por que as fizemos. Encontrei o PR associado que continha o commit que fiz e, na descriÃ§Ã£o desse PR, descobri o motivo pelo qual excluÃ­ o pipeline.</p>
<p>O pipeline estava constantemente falhando com um erro de â€œnotebook nÃ£o encontradoâ€. Em outras palavras, o pipeline estava tentando acionar a execuÃ§Ã£o do notebook Python que mencionei anteriormente. PorÃ©m o notebook em si nÃ£o foi encontrado, e por conta disso, estava dando esse erro. Isso significa que o pipeline era basicamente inÃºtil, ele estava criando custos de execuÃ§Ã£o sem entregar nenhum valor. Isso tambÃ©m significa que o notebook Python desapareceu antes que o pipeline fosse excluÃ­do.</p>
<p>EntÃ£o eu apaguei o pipeline. Dessa forma, nÃ³s deixamos de gastar nossos recursos tentando executar algo que sabemos que vai gerar um erro de execuÃ§Ã£o, e, consequentemente, nÃ£o vai gerar nenhum valor.</p>
</section>
<section id="a-outra-parte-do-problema" class="level1">
<h1>A outra parte do problema</h1>
<p>Ok, agora sabemos o porquÃª de eu ter excluÃ­do o pipeline. Mas isso por si sÃ³ levanta algumas novas questÃµes. Por que o notebook Python desapareceu? Todavia, a realidade Ã© queâ€¦ nÃ£o sabÃ­amos o porquÃª. Infelizmente, nossos notebooks Python nÃ£o estavan hospedados em um repositÃ³rio Git. Isso significa que nÃ£o nenhuma alteraÃ§Ã£o feita no notebook era rastreada.</p>
<p>PorÃ©m, para ser justo, nossos notebooks Python sÃ£o hospedados dentro de uma instÃ¢ncia do Databricks e, se vocÃª estiver familiarizado com o Databricks, saberÃ¡ que, na verdade, a plataforma Databricks rastreia sim (atÃ© certo ponto) alteraÃ§Ãµes feitas no notebook, atravÃ©s do <a href="https://docs.databricks.com/pt/notebooks/notebooks-code.html#version-control">painel de â€œRevisionsâ€</a>.</p>
<p>EntÃ£o, sim, temos algum nÃ­vel de monitoramento sobre as alteraÃ§Ãµes feitas nesses notebooks. Mas nÃ£o temos um nÃ­vel suficiente para realmente entendermos por que aquele caderno em particular estava faltando. Em outras palavras, esse painel de â€œRevisionsâ€ do Databricks nÃ£o Ã© capaz de rastrear aÃ§Ãµes de remoÃ§Ã£o em notebooks.</p>
<p>NÃ³s sÃ³ conseguimos descobrir o que estava acontecendo na semana seguinte, quando identificamos que outros notebooks de Python tambÃ©m haviam sumido misteriosamente da pasta do mesmo cliente. Era um conjunto de trÃªs notebooks, chamados <code>Job_ClientX_Opened_Sessions</code>, <code>Job_ClientX_Sales_per_Channel</code> e <code>Job_ClientX_Opened_Tickets</code>. Esses trÃªs notebooks estavam localizados na pasta <code>ClientX</code>. EntÃ£o, tÃ­nhamos uma estrutura de arquivo como esta:</p>
<pre><code>â”œâ”€â”€â”€ğŸ“ ClientX
â”‚    â”œâ”€â”€â”€Job_ClientX_Opened_Sessions.py
â”‚    â”œâ”€â”€â”€Job_ClientX_Sales_per_Channel.py
â”‚    â””â”€â”€â”€Job_ClientX_Opened_Tickets.py
â”‚ 
â”œâ”€â”€â”€ğŸ“ ClientY
â”œâ”€â”€â”€ğŸ“ ClientW
â””â”€â”€â”€ğŸ“ ClientZ
...</code></pre>
<p>Nesse dia especÃ­fico, descobrimos atravÃ©s dos logs de execuÃ§Ã£o que, por volta das 08:00 AM, esse conjunto de notebooks estava sim disponÃ­veis (ou seja, eles existiam de fato) em nosso ambiente Databricks por volta das 08:00. Mas nesse mesmo dia, quando nÃ³s procuramos novamente Ã s 11:00 por esses mesmos notebooks no ambiente Databricks, nÃ£o os encontramos mais.</p>
<p>SabÃ­amos naquele momento que esses notebooks haviam desaparecido nas Ãºltimas 3 horas. Era algo muito recente. Contudo, um detalhe chamou a nossa atenÃ§Ã£o. A pasta <code>ClientX</code>, que era onde deveriam estar esses notebooks, estava preenchida com outros notebooks que possuÃ­am nomes semelhantes aos que estÃ¡vamos procurando, como estes:</p>
<pre><code>â”œâ”€â”€â”€ğŸ“ ClientX
â”‚    â”œâ”€â”€â”€[ClientX] Opened sessions.py
â”‚    â”œâ”€â”€â”€[ClientX] Sales per Channel.py
â”‚    â””â”€â”€â”€[ClientX] Opened Tickets.py
â”‚ 
â”œâ”€â”€â”€ğŸ“ ClientY
â”œâ”€â”€â”€ğŸ“ ClientW
â””â”€â”€â”€ğŸ“ ClientZ
...</code></pre>
<p>A princÃ­pio, isso parecia muito estranho para nÃ³s, pois esses nomes iam contra as nossas convenÃ§Ãµes de nomenclatura. Ou seja, eu e minha equipe nÃ£o nomeamos arquivos dessa forma. EntÃ£o, novas desconfianÃ§a surgiram, e levantamos a seguinte hipÃ³tese: â€œespere! Acho que alguÃ©m estÃ¡ renomeando esses notebooksâ€. Mais tarde naquele dia, nossas suspeitas foram confirmadas. Um colega de fora de nossa equipe estava renomeando intencionalmente os notebooks de Python desse cliente que foram publicados no ambiente de produÃ§Ã£o. Por isso nÃ£o estÃ¡vamos encontrando mais os notebooks, pois os seus nomes foram modificados.</p>
<p>A consequÃªncia imediata dessa aÃ§Ã£o de nosso colega foi que a conexÃ£o entre os notebooks de Python e os pipelines de dados foi perdida. Ou seja, os pipelines de dados estavam tentando executar esses notebooks, mas esses pipelines nÃ£o estavam encontrando mais esses notebooks, pois os seus nomes originais foram perdidos.</p>
<p>Se usÃ¡ssemos o Git para rastrear todas as alteraÃ§Ãµes feitas nesses notebooks de Python, talvez nÃ³s terÃ­amos descoberto esse problema muito mais cedo, e, com isso, poderÃ­amos agir para corrigi-lo. PorÃ©m o estrago jÃ¡ havia sido feito. Como prÃ³ximos passos, o nosso time teve que:</p>
<ul>
<li>renomear os notebooks de volta para os seus nomes originais;</li>
<li>remover alguns dos privilÃ©gios de nosso colega no ambiente Databricks;</li>
<li>aconselhar este colega sobre o que aconteceu e como as suas aÃ§Ãµes causaram danos.</li>
</ul>
</section>
<section id="quais-erros-foram-cometidos" class="level1">
<h1>Quais erros foram cometidos?</h1>
<p>Abaixo temos a linha do tempo dos eventos importantes que descrevemos atÃ© aqui:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/timeline-pt.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Uma timeline dos eventos</figcaption>
</figure>
</div>
<p>Na minha cabeÃ§a, existem pelo menos trÃªs erros que foram cometidos ao longo desta linha do tempo:</p>
<ul>
<li>Eu nÃ£o comuniquei a retirada do pipeline de forma adequada;</li>
<li>Nosso colega estava renomeando notebooks em um ambiente de produÃ§Ã£o;</li>
<li>NÃ£o usamos o Git para rastrear alteraÃ§Ãµes nos notebooks no ambiente de produÃ§Ã£o.</li>
</ul>
<p>Excluir o pipeline nÃ£o foi um erro. Na realdiade, o meu erro foi nÃ£o comunicar a minha aÃ§Ã£o da forma adequada. Quer dizer, eu comuniquei a remoÃ§Ã£o do pipeline aos meus colegas, mas eu nÃ£o comuniquei essa remoÃ§Ã£o ao meu colega de fora da minha equipe que tambÃ©m estava envolvido com esse cliente especÃ­fico, o mesmo colega que comeÃ§ou a renomear vÃ¡rios notebooks em produÃ§Ã£o.</p>
<p>Em outras palavras, se eu tivesse comunicado a ele que excluÃ­ o pipeline, provavelmente o seguinte diÃ¡logo teria acontecido:</p>
<ul>
<li><p>Colega: â€œespere! Nosso cliente ainda estÃ¡ usando esse pipeline de dados, por que vocÃª o removeu?â€</p></li>
<li><p>Eu: â€œporque o pipeline nÃ£o estava encontrando o notebookâ€</p></li>
<li><p>Colega: â€œmas porque ele nÃ£o estava achando o notebook?â€</p></li>
<li><p>Eu: â€œbom, o pipeline estÃ¡ procurando um notebook chamado â€˜Xâ€™, mas esse notebook sumiu. NÃ£o existe em nosso ambienteâ€.</p></li>
<li><p>Colega: â€œespere! Eu me lembro deste caderno! Acho que acabei de renomeÃ¡-lo hÃ¡ alguns diasâ€</p></li>
<li><p>Eu: â€œespere! VocÃª renomeou um notebook em produÃ§Ã£o?â€</p></li>
<li><p>Colega: â€œsim, acho que simâ€</p></li>
</ul>
<p>Com este diÃ¡logo, provavelmente poderÃ­amos ter resolvido o quebra-cabeÃ§a muito mais rapidamente e corrigido os erros antes que mais danos pudessem ser criados. Portanto, se eu tivesse comunicado a esse colega que excluÃ­ o pipeline, provavelmente atingirÃ­amos o cerne do problema mais rapidamente.</p>
<p>Tudo comeÃ§ou quando esse nosso colega decidiu renomear um notebook diretamente no ambiente de produÃ§Ã£o sem que soubÃ©ssemos. Isso com certeza foi um erro, mas quem nÃ£o erra as vezes nÃ©? AlÃ©m disso, como descrevemos no artigo, o sistema de â€œRevisionsâ€ do Databricks Ã© limitado e nÃ£o foi capaz de gravar essa mudanÃ§a tÃ£o importante no notebook e, por causa disso, nÃ³s inicialmente ficamos no escuro. NÃ³s nÃ£o tÃ­nhamos ideia do que havia acontecido com o notebook.</p>
<p>Levamos uma semana para realmente descobrir o que estava causando o â€œdesaparecimentoâ€ dos notebooks. Se usÃ¡ssemos o Git para rastrear todas as alteraÃ§Ãµes feitas nos notebooks publicados no ambiente de produÃ§Ã£o, nÃ³s terÃ­amos identificado a â€œaÃ§Ã£o de renomearâ€ muito, muito, muito mais rÃ¡pido. Portanto, nÃ£o usar o Git nesses notebooks tambÃ©m foi um erro.</p>
</section>
<section id="como-o-git-nos-ajudou-a-resolver-o-problema" class="level1">
<h1>Como o Git nos ajudou a resolver o problema</h1>
<p>O Git Ã© uma ferramenta extremamente poderosa. Ao termos um servidor centralizado que registra todas as mudanÃ§as que cada pessoa faz no projeto, conseguimos olhar para o passado, e entender quais mudanÃ§as foram feitas. VocÃª pode realmente ver a evoluÃ§Ã£o ou a linha do tempo do seu projeto e perceber quantos recursos ou melhorias vocÃª fez no projeto. VocÃª tambÃ©m pode identificar as decisÃµes que tomou no passado. Isso lhe dÃ¡ a capacidade de repensar o seu processo de tomada de decisÃ£o.</p>
<p>Um fato que sabÃ­amos desde o inÃ­cio: um pipeline de dados e um notebook de Python simplesmente desapareceram de nosso ambiente. Com o Git conseguimos rastrear e entender como, quando e por que o pipeline de dados desapareceu, e conseguimos localizar o pipeline de dados novamente, restaurÃ¡-lo ao seu estado anterior e reenviar os arquivos que o nosso cliente precisava. Se usÃ¡ssemos o Git nos notebooks, tambÃ©m poderÃ­amos rastrear as operaÃ§Ãµes de â€œrenomearâ€ que haviam sido feitas nesses notebooks.</p>
<p>NÃ³s nÃ£o apenas corrigimos o problema, mas tambÃ©m, ao entender o que aconteceu e quais decisÃµes foram tomadas que levaram ao desaparecimento do pipeline de dados, pudemos identificar as falhas em nosso processo de tomada de decisÃ£o. E ao identificar esses problemas, agora podemos resolvÃª-los, para nÃ£o cometermos esses erros novamente.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>O que Ã© um pipeline? Um pipeline Ã© apenas uma sequÃªncia de etapas (ou tarefas) a serem realizada em uma hora especÃ­fica do dia (ou em um dia especÃ­fico da semana ou do mÃªs, etc.). E um pipeline de dados Ã© um pipeline que contÃ©m tarefas que carregam, transformam, enviam ou ingerem dados de alguma forma.â†©ï¸</p></li>
<li id="fn2"><p>Em resumo, um Pull Request (ou PR) Ã© uma <strong>proposta</strong> para realizar uma operaÃ§Ã£o <code>git merge</code>. Em outras palavras, vocÃª cria um PR quando deseja mesclar as alteraÃ§Ãµes feitas em uma branch em outra branch (na maioria das vezes a main branch). O aspecto de â€œpropostaâ€ de uma PR significa que este PR precisa ser aprovado para ser efetivamente executado. Um PR nÃ£o Ã© um recurso do Git. Na verdade, Ã© um recurso padrÃ£o da maioria dos provedores de serviÃ§os Git. EntÃ£o vocÃª cria um PR dentro de uma plataforma de serviÃ§os Git como GitHub, GitLab e Azure DevOps, e nÃ£o dentro do prÃ³prio Git. Se vocÃª nÃ£o estÃ¡ familiarizado com PRs, a <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests">documentaÃ§Ã£o do GitHub tem um excelente artigo sobre isso</a>.â†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>Git</category>
  <category>Decisions</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/pt/index.html</guid>
  <pubDate>Mon, 31 Jul 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-07-31-git-mark-decisions/git-logo.png" medium="image" type="image/png" height="70" width="144"/>
</item>
<item>
  <title>A case study about Data Storytelling at some of the largest brazilian banks</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/en/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>This article discusses how I improved my <em>Data Storytelling</em> process within my presentations and reports delivered to two of the largest commercial banks in the Brazilian market. I try to share what I learned in this process, and I give some tips that will possibly help you to build more intuitive, captivating, clear and effective data reports.</p>
<p>In summary, we will discuss in this article the following tips:</p>
<ul>
<li><em>Data Storytelling</em> is about telling stories through data;</li>
<li>Stories have structure, use these structures in your favor;</li>
<li>Avoid sharing too much attention with long texts on your slides;</li>
<li>Trace relationships between your data;</li>
<li>Build your story around a main message;</li>
<li>Deliver your story at small pieces;</li>
</ul>
<p>Most of this knowledge was built through intense research, reflection and planning about my presentations, and later, getting feedback, and making small adjustments here and there.</p>
<p>As you might expect with every great work like this, it also involved other peoples. During this process, I received help and feedback from my co-workers. Specially from <a href="https://www.linkedin.com/in/andressa-de-souza-freitas-697195177/">Andressa de Souza Freitas</a> and <a href="https://www.linkedin.com/in/guilhermeggarcia/">Guilherme Gomes</a>. I also had great help from the UX Designer <a href="https://www.linkedin.com/in/alefernandesbranding/">AlÃª Fernandes</a>. Most of the knowledge presented here, I learned in practice with AlÃª. This knowledge revolutionized the way I build my presentations, and for that I am immensely grateful to her â¤ï¸.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>All data, charts and images shown in this article are merely illustrative. All numbers shown were randomly generated by a computer! Therefore, they do not represent the actual data of TakeBlip or the comercial banks involved in any way or dimension!</p>
</div>
</div>
</section>
<section id="summary-of-the-structure-of-this-article" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Summary of the structure of this article</h1>
<p>In Section&nbsp;3 I provide more context about these reports that I delivered to two of the largest comercial banks in the Brazilian market. What was the usual format of these reports ? What were their main problems and limitations ?</p>
<p>But from Section&nbsp;4 and on, I start to discuss about how I improved these reports. You will notice that most of these improvements are concentrated in two areas:</p>
<ol type="1">
<li>build a presentation that is simple and clear;</li>
<li>build a presentation that has a good structure, that is, a structure that helps you to tell a story through your data;</li>
</ol>
<p>Section&nbsp;4.1 provides two tips that help you bring simplicity and clarity to your presentation, in addition to discussing why long texts on slides are so perverse for your viewersâ€™ attention.</p>
<p>At Section&nbsp;4.2 I discuss some tips on how to form the content of the presentation, more specifically, content that helps you build a story in your presentation.</p>
<p>At Section&nbsp;5, we take the tips that we discussed so far in the article, and we try to apply them to the slide shown in Figure&nbsp;3, with the objective of demonstrating how these tips can improve your presentation.</p>
<p>Lastly, at Section&nbsp;6, we discuss structure a lot. More specifically, I discuss two examples of frameworks that can serve as guides. They provide a simple foundation that you can use to build your story.</p>
<p>Anyway, letâ€™s move onâ€¦</p>
</section>
<section id="sec-como-era-antes" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> How was this report before ?</h1>
<p>At the time, we were building a monthly report containing several indicators and graphs that showed the current status and recent evolution of the banks services and products offered within the WhatsApp channel.</p>
<p>However, the format of this presentation was problematic. We brought a <strong>monumental amount</strong> of information to the bank. The presentation usually had around 40 different slides, with approximately 36 charts and 70 different indicators. Furthermore, we tried to present all this volume of information in a meeting of just 1 hour.</p>
<p>The end result was a presentation that brought a monumental volume of information, however, which also brought a <strong>very small volume of insights and new business ideas for managers</strong>.</p>
<p>In Figure&nbsp;1 we have a representation of one of the several slides of this presentation<sup>1</sup>. Imagine that this presentation had around 40 slides similar to this one:</p>
<div id="fig-print-report1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/print-report1-en.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: A single slide from the old version of the report</figcaption>
</figure>
</div>
<p>Note that this slide looks more like a dashboard page than a report showing the latest trends in the products and services of the bank, or, on the financial market as a whole.</p>
<p><strong>This is very important!</strong> If your presentation has a lot of different indicators scattered around the page, without contextualizing them, without relating them to each other, without bringing out what they mean together, this presentation will likely look very similar to the dashboards you already produce for your client.</p>
<p>With that in mind, what is your customerâ€™s incentive/motive/reason for attending your presentation? In other words, if your presentation shows the same graphs/indicators that your dashboards show, your client has no incentive/reason to watch your presentation. Because <strong>there is nothing in your presentation that is new</strong>, or any information that your client does not already have direct access to.</p>
</section>
<section id="sec-como-melhorar" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> How can we improve?</h1>
<p>Now that you have a sense of the size of the problem that the previous versions of these reports represented, over the next sections of this article, I will discuss some essential tips that demonstrate how we can improve the presentation model shown in Figure&nbsp;1.</p>
<p>In my understanding, a good part of the success in <strong>data storytelling</strong> can be summarized in two actions, or two main objectives:</p>
<ol type="1">
<li>Avoid items that distract our viewersâ€™ attention;</li>
<li>Build a captivating story for your presentation;</li>
</ol>
<p>The first item above is more related to the <strong>clarity and simplicity</strong> of the presentation, while the second item is more related to the <strong>content and structure</strong> of the presentation.</p>
<p>Letâ€™s start with the first itemâ€¦</p>
<section id="sec-guerra-atencao" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="sec-guerra-atencao"><span class="header-section-number">4.1</span> A constant war for attention</h2>
<p>When weâ€™re presenting something, weâ€™re constantly battling for our viewers attention. This is a hard battle, not only because we can (unintentionally) attract attention to the wrong places, but also, because there are so many sources of distraction in the modern world (e.g.&nbsp;cell phones, emails, etc.)!</p>
<p>A good <strong>data storytelling</strong> depends on telling a captivating story that manages to capture the attention of your viewers. Therefore, the next sections will focus a lot on tips that contribute to this capture, or that help you not to dissipate, reduce or disturb the attention of these spectators.</p>
<section id="sec-long-text" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="sec-long-text"><span class="header-section-number">4.1.1</span> Why you should avoid long text on your slides?</h3>
<p>Try to be parsimonious in your slides! That is, try to include as little information as possible within it. If you need to convey a lot of information on a single slide, then try to incorporate most of this content into your speech, and as little of it as possible in written form on this slide. In general, avoid including very long texts in your slides as much as possible.</p>
<p>Itâ€™s weird to think about, but generally, managers will jump in and watch your presentation because theyâ€™re interested in what <strong>you</strong> have to say about their business. Therefore, your slides are only support material, they must be secondary, a supporting element of your presentation. Because the main piece of the presentation should always be your speech and the story you want to tell through it.</p>
<p>See the slide at Figure&nbsp;2 as an example. The main problem with this slide is that it <strong>divides the viewerâ€™s attention a lot</strong>.</p>
<div id="fig-texto-longo" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/texto-longo-en.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Slide with a long paragraph</figcaption>
</figure>
</div>
<p>When presenting a slide, your viewers have to pay attention to your speech. That is, what you are verbally communicating during the presentation. And at the same time, they also need to pay attention to the slide content. However, that long paragraph in the left corner of the slide shown in Figure&nbsp;2 is problematic. <strong>Because he draws too much attention!</strong></p>
<p>The long paragraph element arouses our curiosity so much that, when you saw the above slide, you (the reader of this article) probably tried to read that long paragraph, even before reading what I am describing right now in this paragraph. The same will happen with the viewers of your presentation. Meaning your viewers will immediately try to read that long paragraph.</p>
<p>However, reading and interpreting a long text requires some effort and a lot of attention. As a result, while your viewers are trying to read that text, they wonâ€™t be able to pay attention to other elements of your presentation. For example, in your speech.</p>
<p>This can be crucial, as you may bring extra information, or an extremely important connection in your speech, and they may end up missing it while they are trying to read this text. Therefore, avoid as much as possible including very long texts in your slides.</p>
</section>
<section id="deliver-your-story-in-small-pieces" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="deliver-your-story-in-small-pieces"><span class="header-section-number">4.1.2</span> Deliver your story in small pieces</h3>
<p>The human brain can process a limited amount of information at once. As a result, if you try to explain a lot of information to your viewers, in a single slide, they will end up hitting that limit ğŸ¤¯, and they simply wonâ€™t be able to reason, understand or assimilate what youâ€™re explaining.</p>
<p>So <strong>deliver your story in small pieces</strong>. Avoid condensing a lot of information into a single slide! Divide the content into parts, and explain one part at a time!</p>
<p>This helps make the content simpler, and as a result, it helps your viewers better understand what youâ€™re talking about.</p>
<p>Think about this for a while. When youâ€™re looking to learn about a complex subject (e.g.&nbsp;linear regression), youâ€™re likely to divide the content into many small pieces, and learn one piece at a time. Isnâ€™t that how you do it? So bring that strategy into your presentations as well.</p>
</section>
</section>
<section id="sec-historia-conteudo" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="sec-historia-conteudo"><span class="header-section-number">4.2</span> Discussing stories and content</h2>
<p>Now that weâ€™ve seen two basic rules about keeping your viewers attention (i.e.&nbsp;avoid long texts and deliver your story at small pieces), letâ€™s discuss some tips about the content of your presentation, and how to build stories with data.</p>
<section id="data-storytelling-is-not-about-choosing-the-best-chart" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="data-storytelling-is-not-about-choosing-the-best-chart"><span class="header-section-number">4.2.1</span> <em>Data Storytelling</em> is not about choosing â€œthe best chartâ€</h3>
<p>A few analysts understand â€œ<em>data storytelling</em>â€ as a visualization problem, or, as the science of â€œchoosing the best chartâ€ for your presentation, or how to design innovative, beautiful, and complex graphic designs.</p>
<p>However, <em>data storytelling</em> is about <strong>telling stories with data</strong>. Not about building charts/graphics. Choosing the right visualization to present your data, making it better, prettier and cleaner is only part of the process. A very important part, as this will help you tell your story more clearly and effectively, and thus reach a larger audience.</p>
</section>
<section id="sec-relacoes" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="sec-relacoes"><span class="header-section-number">4.2.2</span> Trace relationships between indicators</h3>
<p>Now, letâ€™s analyze the slide shown in Figure&nbsp;3. Notice that this slide, again, is very reminiscent of a dashboard page. The slide doesnâ€™t look so captivating at first glance, as it only shows the indicators, it doesnâ€™t build a relationship, or <strong>a story</strong>, between them.</p>
<div id="fig-divisao2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/divisao2-en.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Lack of relationship between indicators</figcaption>
</figure>
</div>
<p>If we pay attention to these indicators, we can identify some effects that are happening along them. And if we think about these effects a little more, we will realize that these effects are relatable! And that together, they can tell a story.</p>
<p>For example, notice that there is a significant increase in sales. Both in the number of proposals sold and in the total value that these proposals generated. However, notice that this growth in sales did not occur in the â€œPayroll Loanâ€ product, but in the â€œVehicle secured loanâ€ product. In other words, the product â€œLoan Payrollâ€ had a drop in sales at that month, however, the product â€œLoan with vehicle guaranteeâ€ obtained a big result that surpassed this drop by a lot, and in the end, managed to increase the bank sales as a whole.</p>
<p>In addition, we can also see other effects like the increases in both conversion rate and in the API (<em>Application Programming Interface</em>) success rate. These are also factors that contributed to the increase in sales. Because an increase in the conversion rate means that a larger portion of our customers are purchasing our products. And an increase in the success rate in the API means that we have fewer errors in the registration of sales on the platform, and this is obviously positive, as we have a smaller loss of sales due to crashes and errors in this registration system.</p>
<p>Note that all these relationships together help us to <strong>build a story</strong> about how sales increased at this specific month, and thatâ€™s exactly what we want to achieve. So always try to build relationships between your metrics to form a story about a key result that you perceived.</p>
</section>
<section id="sec-key-message" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="sec-key-message"><span class="header-section-number">4.2.3</span> Build your story around a key message</h3>
<p>Just to make this idea clear, when we identify the various effects that we described at Section&nbsp;4.2.2, on the slide shown in Figure&nbsp;3, it is interesting to ask ourselves: which of these various effects is the main result? In other words, which one of these effects is of most interest to the bank managers who are watching your presentation?</p>
<p>Certainly the increase in sales is the <strong>main effect</strong>. It is the <strong>key result</strong>. Itâ€™s the effect that most interests managers watching your presentation. So try to build your story around this result, or this main message. Use the other indicators to explain how this key result came about.</p>
<p>This is also very important! Every manager is very fond of hearing the word â€œincrease in salesâ€. However, he is also always interested in knowing the <strong>â€œhow was this increase generated?â€</strong>. That is, he needs to know what actions were taken that generated this positive impact.</p>
<p>Because by identifying these actions, this manager has the ability to apply these actions to other parts of his business, and, hopefully, he can end up spreading this positive effect that you described to other areas, and, as a result, he can end up further increasing the companyâ€™s sales.</p>
</section>
</section>
</section>
<section id="sec-pratica" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Putting some tips into practice</h1>
<p>So far, weâ€™ve discussed the following tips:</p>
<ol type="1">
<li>Avoid long texts on your slides;</li>
<li>Trace relationships between the indicators;</li>
<li>Build your story around a main message;</li>
<li>Deliver your story slowly, at small pieces;</li>
</ol>
<p>Letâ€™s put these tips into practice, and redesign the slide shown in Figure&nbsp;3. Do you remember the relationships we described in Section&nbsp;4.2.2? Remember how these relationships tell a story about increased sales? Letâ€™s take advantage of this story to apply the tips above.</p>
<p>First, we established that our story should always be built around a core message. So letâ€™s start our presentation by focusing on a single slide that makes this main message clear.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/mensagem-principal-en.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">The main message of the presentation</figcaption>
</figure>
</div>
<p>Now that we know what the main subject of the presentation is, we can start to dig deeper, and describe that subject in more detail. As a next step, we can answer the question â€œwhere did this increase in sales came from?â€.</p>
<p>This question can be very relevant for your presentation, especially if: 1) you are presenting to several managers from different areas at the same time; 2) or also, if you are presenting to a manager higher in the hierarchy, who oversees several areas/products at the same time. Because in these cases, these managers will logically wonder where this increase in sales occurred. Was it in product x? Or was it in product y? Or area z? Etc.</p>
<p>Anyway, letâ€™s answer this question on a new slide. With this slide, we make it clear to viewers that a new bank product (car loan with guarantee on vehicles) was the big star of the month, generating around $12 thousand in sales in the first month, even surpassing the sales value of the already consolidated product (payroll loan).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/onde-vendemos-en.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Where did we sell more?</figcaption>
</figure>
</div>
<p>The next question we need to answer is â€œhow?â€. How was this super result in sales generated? We discussed this in Section&nbsp;4.2.3 that after discovering such an important result, managers will certainly be interested in understanding how this result was generated, so that they can spread this positive effect to other areas of the business.</p>
<p>Remember that we have two main effects discussed in Section&nbsp;4.2.2 that explain how this improvement in sales occurred. Letâ€™s list them clearly and succintly on a new slide:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/porque-vendemos-en.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Why did we sell more?</figcaption>
</figure>
</div>
<p>Please, try to use your speech to elaborate the two effects above (â€œWhat was the problem with the API, and how did we overcome it?â€, â€œHow is this an improvement?â€, â€œWhat is a conversion rate? And how does it affect the process of sale?â€). Remember, try to avoid putting long texts in your presentations as much as possible, and try to give more details or answer your viewers questions through speech.</p>
<p>With these three slides we have a much more interesting structure and content for our presentation as we are telling a story about how we sold more in a given month.</p>
<p>Note that the structure of the presentation (1: main message, 2: where? , 3: how?) helps us to cohesively create the content and this story. In the next sections of this article, Iâ€™ll discuss two other frameworks that can help you structure and cohesively tell your stories.</p>
</section>
<section id="sec-historias-tem-estrutura" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Stories have structure, use these structures to your advantage</h1>
<p>Over the next sections, Iâ€™ll show you two examples of structures that are quite common in stories. These structures serve as a guide as you build your story. They will help you a lot to organize your ideas in a clear and effective format.</p>
<section id="the-four-cs-model" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="the-four-cs-model"><span class="header-section-number">6.1</span> The four Câ€™s model</h2>
<p>The four Câ€™s model refers to these four words in Portuguese:</p>
<blockquote class="blockquote">
<p>Contexto, Conflito, ConsequÃªncia, Conselho.</p>
</blockquote>
<p>These four words can be translated into <em>Context, Conflict, Consequence, Advice</em>, and they help you bring a consistent structure to your story. In addition, these words also help you to stir up your viewersâ€™ emotions a little, and, with that, capture their attention more.</p>
<p>By following this model, your story will always break down into four parts: context, conflict, consequence, and advice. Precisely in this order. This framework revolves around a major problem or conflict that you have identified in your clientâ€™s business.</p>
<p>The interesting thing about this structure is that you can stake several problems in sequence. As a result, you have a block of 4 Câ€™s (context, conflict, consequence and advice), followed by another block with 4 more Câ€™s (context, conflict, consequence and advice). Or, you can start the presentation with a context, and then two blocks of 3 Câ€™s (conflict, consequence and advice) in sequence.</p>
<p>Anyway, enough talking, and letâ€™s describe in more detail each one of these four parts of this structure.</p>
<section id="start-with-a-context" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="start-with-a-context"><span class="header-section-number">6.1.1</span> Start with a context</h3>
<p>Therefore, when following this model, your story will always start with a context. Something just to contextualize the viewer on what the current state of the business is.</p>
<p>Remember, the 4 Câ€™s model is built around a conflict, or a core problem. Bearing this in mind, if, for example, the conflict that you are going to discuss in your story is a problem that affects the service for selling card machines, it is important that you focus on giving an <em>overview</em> about the service for selling card machines.</p>
<p>In other words, avoid bringing contexts in this part that are not related to the problem/conflict that you will talk in the next section. Because this conflict is the central part of the story.</p>
</section>
<section id="present-a-conflictproblemchallenge-to-be-overcome" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="present-a-conflictproblemchallenge-to-be-overcome"><span class="header-section-number">6.1.2</span> Present a conflict/problem/challenge to be overcome</h3>
<p>Then you must show a conflict. That is, a problem, challenge or barrier that you have identified in the product/service you are looking at. This is where weâ€™re going to play with the viewerâ€™s emotions a bit, and use that to our advantage to capture their attention.</p>
<p>Letâ€™s reflect on this a little. By putting words like â€œproblemâ€, â€œcareâ€, â€œchallengeâ€, â€œalertâ€, especially in bold letters, in addition to including emojis that convey this purpose, such as âš ï¸ and â›”. This quickly draws anyoneâ€™s attention, as it gives you a sense of danger, and you enter a state of alert.</p>
<p>If you think about it a little more, youâ€™ll probably realize that you have that same instinct when youâ€™re watching a movie, or a series, and the hero of that story suddenly gets into a dangerous situation. You quickly pay more attention to what is happening, because you want to see how the hero is going to get out of this hole, or you are really rooting for him to survive and overcome this problem.</p>
<p>When we present an issue about the product/service you are reviewing, we want to cause the same effect on our viewers. When we say that we have a challenge/problem that is affecting the companyâ€™s sales, managers quickly start to pay more attention to what you are saying, as they want to know how they can get out of this hole!</p>
</section>
<section id="hiding-the-problems-is-a-bad-idea" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="hiding-the-problems-is-a-bad-idea"><span class="header-section-number">6.1.3</span> Hiding the problems is a bad idea</h3>
<p>This is very important! Some analysts are afraid or apprehensive of shedding light on existing problems, and therefore, end up hiding them or omitting them from their presentations. However, you are not delivering any value to your customer that way! You are not helping your customer to solve their problems and to grow their business!</p>
<p>And if the problems are not solved, if they continue to exist, they will grow, and grow, until they explode, thus generating generalized chaos. The sooner you identify the problem, notify managers about it, and present possible solutions for it, the better for managers, who already leave with an action plan to solve this problem, and it is better for you too, because you are delivering value and solutions to your customer.</p>
<p>Therefore, a good presentation, or a good data report, is one that delivers value to your customer! By showing new business opportunities (e.g.&nbsp;reaching a new portion of the public with a product), and also by presenting solutions to current problems that are limiting or preventing business growth.</p>
<p>However, a presentation that only comments on positive points, that says that everything is fineâ€¦ does not bring any value to managers. Managers didnâ€™t hire you to tell you everything is fine. They hired you to help them discover and solve problems in their business through data analysis.</p>
</section>
<section id="present-the-consequences-of-the-conflictproblemchallenge-you-have-identified" class="level3" data-number="6.1.4">
<h3 data-number="6.1.4" class="anchored" data-anchor-id="present-the-consequences-of-the-conflictproblemchallenge-you-have-identified"><span class="header-section-number">6.1.4</span> Present the consequences of the conflict/problem/challenge you have identified</h3>
<p>Therefore, after presenting a conflict/problem/challenge that is affecting the business, it is important that you present the consequence of this problem right away. This helps managers to have a dimension of the size that this problem represents for their business.</p>
<p>Itâ€™s okay if you canâ€™t measure in numbers the size of the impact that this conflict had on the business. Try to measure that impact as best you can. An approximate value of the impact can already bring enough clarity about the size of the danger that this conflict represents for the business.</p>
<p>You can also provide a <em>range</em>, or a possible range of the impact if you can (e.g.&nbsp;the estimated impact is between $20 thousand and $340 thousand). This is also a valid way of exposing the size of the problem.</p>
<p>If it is really impossible to measure this impact in numbers, then explain in this part, which are the points of the product/service sales process that are affected by this problem. In other words, present which are the places in the business that are being, in theory, affected by this conflict.</p>
</section>
<section id="advise-your-customer-present-possible-solutions-to-the-problem" class="level3" data-number="6.1.5">
<h3 data-number="6.1.5" class="anchored" data-anchor-id="advise-your-customer-present-possible-solutions-to-the-problem"><span class="header-section-number">6.1.5</span> Advise your customer, present possible solutions to the problem</h3>
<p>Okay, we present a problem, or a conflict for our viewers. We also discussed the impacts of this conflict on our clientâ€™s business. Now, we need to present possible solutions to this problem.</p>
<p>Therefore, understand the problem/conflict you are presenting, and try to list what would be the main solutions for this problem, and include these solutions in this part of your presentation. Itâ€™s worth explaining and discussing this issue with other co-workers as well, as they might also come up with interesting solutions that were off your radar.</p>
<p>It is also interesting to include a list of <em>trade-offs</em> for each solution, especially in terms of complexity and effort for each solution. Managers are constantly interested in this relationship, and always want to choose the solution that is simpler and faster to implement.</p>
</section>
</section>
<section id="character-evolution-as-another-alternative" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="character-evolution-as-another-alternative"><span class="header-section-number">6.2</span> Character evolution as another alternative</h2>
<p>Character evolution (or the â€œheroâ€™s journeyâ€) is a popular story structure. You start with a character, or a hero for the story, which in our case here, could be our clientâ€™s business, or a specific product of this business.</p>
<p>Our mission is to show how this character/hero has evolved in recent months. Therefore, this evolution structure is very suitable for year-end reports. Because these reports are interesting to show the evolution of the business (or the evolution of the character) over the last year.</p>
<section id="the-beginning-and-end-of-the-journey" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="the-beginning-and-end-of-the-journey"><span class="header-section-number">6.2.1</span> The beginning and end of the journey</h3>
<p>If you prefer, you can start your presentation by showing how your character was at the beginning of the journey, and end this presentation by showing how that character ended that journey.</p>
<p>This is an option, however, I prefer to start the presentation by showing the start and end at the same time. In this way, viewers begin the presentation with an idea of how much the business has evolved during the year. Therefore, I start by showing how the character (or the business/product) started the year, and then how he ended the year.</p>
</section>
<section id="presenting-the-challenges-and-pitfalls" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="presenting-the-challenges-and-pitfalls"><span class="header-section-number">6.2.2</span> Presenting the challenges and pitfalls</h3>
<p>In every business/product, whatever it may be, we always face major challenges that can threaten the success, or limit the evolution of this business/product.</p>
<p>Therefore, along any journey, we always face challenges and setbacks, and we apply actions to try to overcome these challenges. By overcoming these challenges, we can hopefully generate the evolution and improvement of this business/product. That is, reaching the end of this journey with a better, more robust and more profitable business/product.</p>
<p>All of this means that â€œhow we get through the middle of the journeyâ€ can be much more important/interesting than the beginning or end of that journey. Therefore, reserve a part of your presentation to present the main challenges we faced during this journey, and how we overcame them.</p>
</section>
<section id="if-possible-take-the-opportunity-to-value-your-teams-work" class="level3" data-number="6.2.3">
<h3 data-number="6.2.3" class="anchored" data-anchor-id="if-possible-take-the-opportunity-to-value-your-teams-work"><span class="header-section-number">6.2.3</span> If possible, take the opportunity to value your teamâ€™s work</h3>
<p>At this particular point in the presentation, you usually have a very interesting opportunity! Because you can deliver value to your customer and, at the same time, also value the work of your team, especially if this was the team that discovered the challenges, and applied the actions that overcame the challenges you are describing.</p>
<p>This is a golden opportunity! Therefore, if you have this opportunity in your hands, take advantage of it! Remember that you donâ€™t work alone. Youâ€™re almost always working within a team of people, and itâ€™s always important to know how to value your colleaguesâ€™ work.</p>
<p>However, this opportunity will not always appear for you. Perhaps the challenges you are presenting were overcome in another way, by another team that you do not know, or that you do not have a direct connection with.</p>
</section>
<section id="reinforce-the-results-achieved" class="level3" data-number="6.2.4">
<h3 data-number="6.2.4" class="anchored" data-anchor-id="reinforce-the-results-achieved"><span class="header-section-number">6.2.4</span> Reinforce the results achieved</h3>
<p>It is also useful to end your presentation by showing a summary of the results achieved during the year. This could be a simple <em>bulletpoint</em> summarizing the main results. This helps to jog your viewersâ€™ memory, showing them not only how we ended last yearâ€™s journey, but also, how we begin next yearâ€™s journey ğŸ˜‰.</p>
</section>
<section id="a-summary-of-the-structure" class="level3" data-number="6.2.5">
<h3 data-number="6.2.5" class="anchored" data-anchor-id="a-summary-of-the-structure"><span class="header-section-number">6.2.5</span> A summary of the structure</h3>
<p>Therefore, over the previous sections we discussed an idea of structure that would be similar to a â€œcharacter evolutionâ€. In the end, we have a story that follows the sequence below:</p>
<ul>
<li>quickly present how we started and how we ended the journey;</li>
<li>present the main challenges we faced during the year;</li>
<li>what were the solutions we applied to solve the problems;</li>
<li>reinforce the evolution of the character, by showing again the results achieved with the solutions above;</li>
</ul>


</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>It is worth remembering that the numbers and graphs presented in this image are merely illustrative, and were defined in a completely random way.â†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>Storytelling</category>
  <category>Data Storytelling</category>
  <category>Data Science</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/en/index.html</guid>
  <pubDate>Mon, 22 May 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/mapa-featured.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Um estudo de caso sobre Data Storytelling em alguns dos maiores bancos brasileiros</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/pt/index.html</link>
  <description><![CDATA[ 




<section id="introduÃ§Ã£o" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> IntroduÃ§Ã£o</h1>
<p>Este artigo discute como eu melhorei o meu processo de <em>Data Storytelling</em> dentro das minhas apresentaÃ§Ãµes e relatÃ³rios entregues para dois dos maiores bancos comerciais do mercado brasileiro. Busco compartilhar o que aprendi nesse processo, e dou algumas dicas que possivelmente vÃ£o ajudÃ¡-lo a construir relatÃ³rios de dados mais intuitivos, cativantes, claros e efetivos.</p>
<p>Em resumo, vamos discutir neste artigo as seguintes dicas:</p>
<ul>
<li><em>Data Storytelling</em> Ã© sobre contar histÃ³rias atravÃ©s de dados;</li>
<li>HistÃ³rias tem estrutura, use essas estruturas ao seu favor;</li>
<li>Evite dividir muito a atenÃ§Ã£o com textos longos em seus slides;</li>
<li>Trace relaÃ§Ãµes entre os seus dados;</li>
<li>Construa sua histÃ³ria em torno de uma mensagem principal;</li>
<li>Entregue sua histÃ³ria aos poucos;</li>
</ul>
<p>A maior parte desses conhecimentos foram construÃ­dos atravÃ©s de intensa pesquisa, reflexÃ£o e planejamento sobre as minhas apresentaÃ§Ãµes, e, posteriormente, adquirindo feedbacks, e realizando pequenos ajustes aqui e ali.</p>
<p>Como vocÃª pode esperar de todo grande trabalho como este, ele tambÃ©m envolveu outras pessoas. Durante esse processo, eu recebi ajuda e feedbacks de meus colegas de trabalho, <a href="https://www.linkedin.com/in/andressa-de-souza-freitas-697195177/">Andressa de Souza Freitas</a> e <a href="https://www.linkedin.com/in/guilhermeggarcia/">Guilherme Gomes</a>. Eu tambÃ©m tive uma grande ajuda da UX Designer <a href="https://www.linkedin.com/in/alefernandesbranding/">AlÃª Fernandes</a>. VÃ¡rios dos conhecimentos apresentados aqui, eu aprendi na prÃ¡tica com a AlÃª. Esses conhecimentos revolucionaram a maneira como eu construo minhas apresentaÃ§Ãµes, e, por isso, eu sou imensamente grato a ela â¤ï¸.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Todos os dados, grÃ¡ficos e imagens mostrados neste artigo sÃ£o meramente ilustrativos. Todos os nÃºmeros apresentados foram gerados de forma aleatÃ³ria por um computador! Portanto, eles nÃ£o representam os dados reais de TakeBlip ou dos bancos comerciais brasileiros envolvidos de nenhuma forma ou dimensÃ£o!</p>
</div>
</div>
</section>
<section id="resumo-da-estrutura-deste-artigo" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Resumo da estrutura deste artigo</h1>
<p>Na SeÃ§Ã£o&nbsp;3, eu forneÃ§o contexto sobre esses relatÃ³rios que eu apresentava para dois dos maiores bancos comerciais brasileiros, qual era o formato desses relatÃ³rios e quais eram os seus principais problemas e limitaÃ§Ãµes.</p>
<p>Mas a partir da SeÃ§Ã£o&nbsp;4, nÃ³s comeÃ§amos a discutir sobre como melhorei esses relatÃ³rios. VocÃª vai perceber que boa parte dessas melhorias estÃ£o concentradas em dois pontos:</p>
<ol type="1">
<li>construir uma apresentaÃ§Ã£o que seja simples e clara;</li>
<li>construir uma apresentaÃ§Ã£o que tenha uma boa estrutura, isto Ã©, uma estrutura que te ajude a contar uma histÃ³ria atravÃ©s de seus dados;</li>
</ol>
<p>A SeÃ§Ã£o&nbsp;4.1 fornece duas dicas que te ajudam a trazer simplicidade e clareza para sua apresentaÃ§Ã£o, alÃ©m de discutir o porquÃª de textos longos em slides serem tÃ£o perversos para a atenÃ§Ã£o de seus espectadores.</p>
<p>Na SeÃ§Ã£o&nbsp;4.2 discuto algumas dicas sobre como formar o conteÃºdo da apresentaÃ§Ã£o, mais especificamente, um conteÃºdo que te ajude a construir uma histÃ³ria em sua apresentaÃ§Ã£o.</p>
<p>JÃ¡ na SeÃ§Ã£o&nbsp;5, nÃ³s pegamos as dicas que discutimos atÃ© entÃ£o no artigo, e tentamos aplicar elas sobre o slide mostrado em Figura&nbsp;3, com o objetivo de demonstrar como essas dicas podem melhorar sua apresentaÃ§Ã£o.</p>
<p>Por Ãºltimo, na SeÃ§Ã£o&nbsp;6, nÃ³s discutimos bastante sobre estrutura. Mais especificamente, eu discuto dois exemplos de estruturas que podem servir como um guia, ao fornecer uma base simples que vocÃª pode utilizar para construir a sua histÃ³ria.</p>
<p>Enfim, vamos prosseguirâ€¦</p>
</section>
<section id="sec-como-era-antes" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Como era esse relatÃ³rio antes ?</h1>
<p>Na Ã©poca, estÃ¡vamos construindo um relatÃ³rio mensal contendo vÃ¡rios indicadores e grÃ¡ficos que mostravam o estado atual e a evoluÃ§Ã£o recente dos serviÃ§os e produtos dos bancos ofertados dentro do canal do WhatsApp.</p>
<p>Contudo, o formato dessa apresentaÃ§Ã£o era problemÃ¡tico. NÃ³s trazÃ­amos uma <strong>quantidade monumental</strong> de informaÃ§Ãµes para o banco. A apresentaÃ§Ã£o usualmente trazia em torno de 40 slides diferentes, com aproximadamente 36 grÃ¡ficos e 70 indicadores diferentes. Para mais, nÃ³s tentÃ¡vamos apresentar todo esse volume de informaÃ§Ãµes em uma reuniÃ£o de apenas 1 hora.</p>
<p>O resultado final disso tudo era uma apresentaÃ§Ã£o que trazia um volume monumental de informaÃ§Ãµes, porÃ©m, que tambÃ©m trazia um <strong>volume muito pequeno de insights e novas ideias de negÃ³cio para os gestores</strong>.</p>
<p>Em Figura&nbsp;1 temos uma representaÃ§Ã£o de um dos vÃ¡rios slides dessa apresentaÃ§Ã£o<sup>1</sup>. Imagine que essa apresentaÃ§Ã£o trazia em torno de 40 slides semelhantes a esse:</p>
<div id="fig-print-report1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/print-report1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figura&nbsp;1: RepresentaÃ§Ã£o de um slide da versÃ£o antiga do relatÃ³rio</figcaption>
</figure>
</div>
<p>Perceba que esse slide se parece mais com uma pÃ¡gina de um dashboard, do que de um relatÃ³rio apresentando as Ãºltimas tendÃªncias do mercado ou do negÃ³cio do banco.</p>
<p><strong>Isso Ã© muito importante!</strong> Se a sua apresentaÃ§Ã£o traz vÃ¡rios indicadores diferentes espalhados pela pÃ¡gina, sem contextualizÃ¡-los, sem relacionÃ¡-los uns com os outros, sem trazer o que eles significam em conjunto, essa apresentaÃ§Ã£o vai muito provavelmente se parecer com os dashboards que vocÃª jÃ¡ produz para o seu cliente.</p>
<p>Tendo isso em mente, qual Ã© o incentivo/motivo/razÃ£o que o seu cliente tem para assistir Ã  sua apresentaÃ§Ã£o? Em outras palavras, se a sua apresentaÃ§Ã£o mostra os mesmos grÃ¡ficos/indicadores que os seus dashboards apresentam, o seu cliente nÃ£o tem incentivo/motivo nenhum para assistir Ã  sua apresentaÃ§Ã£o. Pois <strong>nÃ£o hÃ¡ nada na sua apresentaÃ§Ã£o que seja novo</strong>, ou nenhuma informaÃ§Ã£o da qual o seu cliente nÃ£o tenha jÃ¡ acesso diretamente.</p>
</section>
<section id="sec-como-melhorar" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Como podemos melhorar ?</h1>
<p>Agora que vocÃª possui uma noÃ§Ã£o do tamanho do problema que as versÃµes anteriores desses relatÃ³rios representavam, nas prÃ³ximas seÃ§Ãµes deste artigo, vou discutir algumas dicas essenciais que demonstram como nÃ³s podemos melhorar o modelo de apresentaÃ§Ã£o mostrado em Figura&nbsp;1.</p>
<p>No meu entendimento, boa parte do sucesso em <strong>data storytelling</strong> pode ser resumido em duas aÃ§Ãµes, ou dois objetivos principais:</p>
<ol type="1">
<li>Evitar itens que dispersam a atenÃ§Ã£o dos nossos espectadores;</li>
<li>Construir uma histÃ³ria cativante para a nossa apresentaÃ§Ã£o;</li>
</ol>
<p>O primeiro item acima estÃ¡ mais relacionado Ã  <strong>clareza e simplicidade</strong> da apresentaÃ§Ã£o, enquanto o segundo item estÃ¡ mais relacionado ao <strong>conteÃºdo e estrutura</strong> da apresentaÃ§Ã£o.</p>
<p>Vamos comeÃ§ar pelo primeiro itemâ€¦</p>
<section id="sec-guerra-atencao" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="sec-guerra-atencao"><span class="header-section-number">4.1</span> Uma guerra constante pela atenÃ§Ã£o</h2>
<p>Quando estamos apresentando algo, estamos constantemente batalhando pela atenÃ§Ã£o dos nossos espectadores. Essa Ã© uma batalha difÃ­cil, nÃ£o apenas porque nÃ³s podemos (sem querer) atrair a atenÃ§Ã£o para os lugares errados, mas tambÃ©m porque existem muitas fontes de distraÃ§Ã£o no mundo moderno (e.g.&nbsp;celulares, emails, etc.)!</p>
<p>Um bom <strong>data storytelling</strong> depende de vocÃª contar uma histÃ³ria cativante, que consiga capturar a atenÃ§Ã£o de seus espectadores. Por isso, as prÃ³ximas seÃ§Ãµes vÃ£o focar bastante em dicas que contribuam para essa captura, ou que te ajudam a nÃ£o dissipar, reduzir ou atrapalhar a atenÃ§Ã£o desses espectadores.</p>
<section id="sec-texto-longo" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="sec-texto-longo"><span class="header-section-number">4.1.1</span> Por que evitar textos longos em seus slides?</h3>
<p>Tente ser parsimonioso nos seus slides! Isto Ã©, tente incluir o mÃ­nimo possÃ­vel de informaÃ§Ã£o dentro dele. Se vocÃª precisa repassar vÃ¡rias informaÃ§Ãµes em um slide, tente incorporar o mÃ¡ximo possÃ­vel desse conteÃºdo em sua fala, e o mÃ­nino possÃ­vel dele em forma escrita neste slide. Em geral, evite ao mÃ¡ximo incluir textos muito longos em seus slides.</p>
<p>Ã‰ estranho pensar nisso, mas geralmente, os gestores vÃ£o participar e assistir Ã  sua apresentaÃ§Ã£o porque eles estÃ£o interessados no que <strong>vocÃª</strong> tem a dizer sobre o negÃ³cio deles. Portanto, os seus slides sÃ£o apenas um material de suporte, eles devem ser secundÃ¡rios, um coadjuvante de sua apresentaÃ§Ã£o. Pois a peÃ§a principal da apresentaÃ§Ã£o deve ser sempre a sua fala e a histÃ³ria que vocÃª quer contar atravÃ©s dela.</p>
<p>Veja o slide em Figura&nbsp;2 como exemplo. O problema principal desse slide, Ã© que ele <strong>divide muito a atenÃ§Ã£o de seu espectador</strong>.</p>
<div id="fig-texto-longo" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/texto-longo.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figura&nbsp;2: Slide com um parÃ¡grafo longo</figcaption>
</figure>
</div>
<p>Ao apresentar um slide, os seus espectadores tem que prestar atenÃ§Ã£o na sua fala. Isto Ã©, no que vocÃª estÃ¡ comunicando verbalmente durante a apresentaÃ§Ã£o. E ao mesmo tempo, eles tambÃ©m precisam prestar atenÃ§Ã£o no conteÃºdo do slide. Contudo, esse longo parÃ¡grafo no canto esquerdo do slide mostrado em Figura&nbsp;2 Ã© problemÃ¡tico. <strong>Pois ele chama atenÃ§Ã£o demais!</strong></p>
<p>Esse elemento desperta tanto a nossa curiosidade, que ao ver esse slide, vocÃª (leitor deste artigo) provavelmente tentou ler esse texto longo antes mesmo de ler o que estou descrevendo agora neste parÃ¡grafo. O mesmo vai acontecer com os espectadores de sua apresentaÃ§Ã£o. Ou seja, os seus espectadores vÃ£o imediatamente tentar ler esse parÃ¡grafo longo.</p>
<p>Contudo, ler e interpretar um texto longo, exige certo esforÃ§o e muita atenÃ§Ã£o. Como resultado, enquanto os seus espectadores leÃªm esse texto, eles nÃ£o vÃ£o conseguir prestar atenÃ§Ã£o em outros elementos de sua apresentaÃ§Ã£o. Por exemplo, na sua fala.</p>
<p>Isso pode ser crucial, pois talvez vocÃª traga uma informaÃ§Ã£o a mais, ou uma conexÃ£o extremamente importante na sua fala, e eles podem acabar perdendo isso enquanto estÃ£o tentando ler esse texto. Portanto, evite ao mÃ¡ximo incluir textos muito longos em seus slides.</p>
</section>
<section id="entregue-sua-histÃ³ria-aos-poucos" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="entregue-sua-histÃ³ria-aos-poucos"><span class="header-section-number">4.1.2</span> Entregue sua histÃ³ria aos poucos</h3>
<p>O cÃ©rebro humano consegue processar uma quantidade limitada de informaÃ§Ãµes de uma vez sÃ³. Como resultado, se vocÃª tentar explicar vÃ¡rias informaÃ§Ãµes para os seus espectadores, em um Ãºnico slide, eles vÃ£o acabar atingindo esse limite ğŸ¤¯, e simplesmente nÃ£o vÃ£o conseguir raciocinar, compreender ou assimilar o que vocÃª estÃ¡ explicando.</p>
<p>Portanto, <strong>entregue a sua histÃ³ria aos poucos</strong>. Evite condensar vÃ¡rias informaÃ§Ãµes em um Ãºnico slide! Divida o conteÃºdo em partes, e explique uma parte de cada vez!</p>
<p>Isso ajuda a tornar o conteÃºdo mais simples, e, como resultado, isso ajuda os seus espectadores a entenderem melhor sobre o que vocÃª estÃ¡ falando.</p>
<p>Pense um pouco sobre isso. Quando vocÃª busca aprender sobre um assunto complexo (e.g.&nbsp;regressÃ£o linear), vocÃª provavelmente divide o conteÃºdo em vÃ¡rias partes pequenas, e, vai aprendendo uma parte de cada vez. NÃ£o Ã© assim que vocÃª faz? EntÃ£o traga essa experiÃªncia tambÃ©m para as suas apresentaÃ§Ãµes.</p>
</section>
</section>
<section id="sec-historia-conteudo" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="sec-historia-conteudo"><span class="header-section-number">4.2</span> Discutindo histÃ³rias e conteÃºdo</h2>
<p>Agora que vimos duas regras bÃ¡sicas sobre a atenÃ§Ã£o de seus espectadores (i.e.&nbsp;evite textos longos e entregue sua histÃ³ria aos poucos), vamos discutir algumas dicas sobre o conteÃºdo de sua apresentaÃ§Ã£o, e, sobre como construir histÃ³rias com dados.</p>
<section id="data-storytelling-nÃ£o-Ã©-sobre-escolher-o-melhor-grÃ¡fico" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="data-storytelling-nÃ£o-Ã©-sobre-escolher-o-melhor-grÃ¡fico"><span class="header-section-number">4.2.1</span> <em>Data Storytelling</em> nÃ£o Ã© sobre escolher â€œo melhor grÃ¡ficoâ€</h3>
<p>Alguns poucos analistas entendem â€œ<em>data storytelling</em>â€ como um problema de visualizaÃ§Ã£o, ou, como a ciÃªncia de â€œescolher os melhores grÃ¡ficosâ€ para sua apresentaÃ§Ã£o, ou como projetar grÃ¡ficos inovadores, bonitos e complexos.</p>
<p>Contudo, <em>data storytelling</em> Ã© sobre <strong>contar histÃ³rias com dados</strong>. NÃ£o sobre como construir visualizaÃ§Ãµes. Escolher a visualizaÃ§Ã£o certa para apresentar os seus dados, tornÃ¡-la melhor, mais bonita e mais limpa, Ã© apenas uma parte do processo. Uma parte muito importante, pois isso vai te ajudar a contar sua histÃ³ria de uma maneira mais clara e eficaz, e, com isso, atingir um pÃºblico maior.</p>
</section>
<section id="sec-relacoes" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="sec-relacoes"><span class="header-section-number">4.2.2</span> Trace relaÃ§Ãµes entre os indicadores</h3>
<p>Agora, vamos analisar o slide mostrado em Figura&nbsp;3. Perceba que esse slide, novamente, lembra muito uma pÃ¡gina de um dashboard. O slide nÃ£o parece tÃ£o cativante Ã  primeira vista, pois ele sÃ³ mostra os indicadores, ele nÃ£o constrÃ³i uma relaÃ§Ã£o, ou <strong>uma histÃ³ria</strong> entre eles.</p>
<div id="fig-divisao2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/divisao2.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figura&nbsp;3: Falta de relaÃ§Ã£o entre os indicadores</figcaption>
</figure>
</div>
<p>Se prestarmos atenÃ§Ã£o nesses indicadores, podemos identificar alguns efeitos que estÃ£o acontecendo ao longo deles. E se refletirmos um pouco mais sobre esses efeitos, vamos perceber que esses efeitos sÃ£o relacionÃ¡veis! E que em conjunto, eles podem contar uma histÃ³ria.</p>
<p>Por exemplo, perceba que hÃ¡ um aumento significativo nas vendas. Tanto no nÃºmero de propostas vendidas quanto no valor total em si que essas propostas geraram. PorÃ©m, perceba que esse crescimento nas vendas nÃ£o ocorreu no produto â€œEmprÃ©stimo Consignadoâ€, e sim, no produto â€œEmprÃ©stimo com garantia de veÃ­culosâ€. Ou seja, o produto â€œEmprÃ©stimo Consignadoâ€ teve uma queda de vendas nesse mÃªs, porÃ©m, o produto â€œEmprÃ©stimo com garantia de veÃ­culosâ€ obteve um super resultado que conseguiu cobrir e muito essa queda, e no fim, conseguiu aumentar as vendas como um todo do banco.</p>
<p>AlÃ©m disso, outros efeitos que podemos perceber sÃ£o os aumentos na taxa de conversÃ£o e na taxa de sucesso de API. Esses tambÃ©m sÃ£o fatores que contribuÃ­ram para o aumento nas vendas. Pois um aumento na taxa de conversÃ£o significa que uma parcela maior dos nossos clientes estÃ¡ adquirindo os nossos produtos. JÃ¡ um aumento na taxa de sucesso na API, significa que temos menos erros nos registros das vendas na plataforma, e isso Ã© obviamente positivo, pois nÃ³s temos uma perda de vendas menor por causa de travamentos e erros nesse sistema de registro.</p>
<p>Perceba que todas essas relaÃ§Ãµes nos ajudam a <strong>construir uma histÃ³ria</strong> sobre como as vendas aumentaram nesse mÃªs, e Ã© justamente isso que queremos atingir. Portanto, tente sempre construir relaÃ§Ãµes entre os seus indicadores, de modo a formar uma histÃ³ria sobre um resultado principal.</p>
</section>
<section id="sec-mensagem-principal" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="sec-mensagem-principal"><span class="header-section-number">4.2.3</span> Construa sua histÃ³ria em torno de uma mensagem principal</h3>
<p>Apenas para deixar claro essa ideia, ao identificar os vÃ¡rios efeitos que descrevemos em SeÃ§Ã£o&nbsp;4.2.2, sobre o slide mostrado em Figura&nbsp;3, Ã© interessante nos questionarmos: qual desses vÃ¡rios efeitos Ã© o principal resultado? Em outras palavras, qual desses efeitos Ã© o que mais interessa os gerentes do banco que estÃ£o assistindo Ã  sua apresentaÃ§Ã£o?</p>
<p>Certamente o aumento sobre as vendas Ã© o <strong>efeito principal</strong>. Ã‰ o efeito que mais interessa os gerentes que estÃ£o assistindo Ã  sua apresentaÃ§Ã£o. Portanto, tente construir a sua histÃ³ria em torno desse resultado, ou dessa mensagem principal. Use os outros indicadores para explicar como esse resultado principal aconteceu.</p>
<p>Isso tambÃ©m Ã© muito importante! Todo gerente gosta muito de ouvir a palavra â€œaumento nas vendasâ€. PorÃ©m, ele tambÃ©m estÃ¡ sempre interessado em saber o <strong>â€œcomo esse aumento foi gerado?â€</strong>. Ou seja, ele precisa saber quais foram as aÃ§Ãµes realizadas que geraram esse impacto positivo.</p>
<p>Pois ao identificar essas aÃ§Ãµes, esse gerente tem a capacidade de aplicar essas aÃ§Ãµes em outras partes de seu negÃ³cio, e, com certa esperanÃ§a, ele pode acabar disseminando esse efeito positivo que vocÃª descreveu para outras Ã¡reas, e, como resultado, ele pode acabar aumentando ainda mais as vendas da empresa.</p>
</section>
</section>
</section>
<section id="sec-pratica" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Colocando algumas dicas em prÃ¡tica</h1>
<p>AtÃ© aqui, nÃ³s discutimos as seguintes dicas:</p>
<ol type="1">
<li>Evite textos longos em seus slides;</li>
<li>Trace relaÃ§Ãµes entre os indicadores;</li>
<li>Construa sua histÃ³ria em torno de uma mensagem principal;</li>
<li>Entregue sua histÃ³ria aos poucos;</li>
</ol>
<p>Vamos botar essas dicas em prÃ¡tica, e reformular o slide mostrado em Figura&nbsp;3. VocÃª lembra das relaÃ§Ãµes que descrevemos em SeÃ§Ã£o&nbsp;4.2.2? Lembra que essas relaÃ§Ãµes traÃ§am uma histÃ³ria sobre o aumento de vendas? Vamos aproveitar essa histÃ³ria para aplicarmos as dicas acima.</p>
<p>Primeiro, estabelecemos que nossa histÃ³ria deve sempre ser construÃ­da em torno de uma mensagem principal. Portanto, vamos comeÃ§ar a nossa apresentaÃ§Ã£o nos concentrando em um Ãºnico slide que mostra essa mensagem principal de forma clara.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/mensagem-principal.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">A mensagem principal da apresentaÃ§Ã£o</figcaption>
</figure>
</div>
<p>Agora que sabemos qual Ã© o assunto principal da apresentaÃ§Ã£o, podemos comeÃ§ar a cavar mais fundo, e descrever esse assunto em mais detalhes. Como um prÃ³ximo passo, podemos responder Ã  pergunta â€œonde esse aumento de vendas ocorreu?â€.</p>
<p>Essa pergunta pode ser bastante relevante para sua apresentaÃ§Ã£o, especialmente se: 1) vocÃª estÃ¡ apresentando para vÃ¡rios gerentes de diferentes Ã¡reas ao mesmo tempo; 2) ou tambÃ©m, se vocÃª estiver apresentando para um gerente mais alto na hierarquia, que supervisiona vÃ¡rias Ã¡reas/produtos ao mesmo tempo. Pois nestes casos, esses gerentes vÃ£o logicamente se perguntar onde esse aumento de vendas ocorreu. SerÃ¡ que foi no produto x? Ou foi no produto y? Etc.</p>
<p>Enfim, vamos responder essa pergunta em um novo slide. Com esse slide, deixamos claro para os espectadores, que um novo produto do banco (emprÃ©stimo com garantia sobre veÃ­culos) foi a grande estrela do mÃªs, ao gerar R$ 12 Mil em vendas logo no primeiro mÃªs, superando inclusive o valor de vendas do produto jÃ¡ consolidado (emprÃ©stimo consignado).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/onde-vendemos.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Onde vendemos mais?</figcaption>
</figure>
</div>
<p>A prÃ³xima pergunta que precisamos responder Ã© â€œcomo?â€. Como esse super resultado nas vendas foi gerado? NÃ³s discutimos isso na SeÃ§Ã£o&nbsp;4.2.3, que apÃ³s descobrirem um resultado tÃ£o importante, os gerentes vÃ£o certamente estar interessados em entender como esse resultado foi gerado, para que eles possam difundir esse efeito positivo para outras Ã¡reas do negÃ³cio.</p>
<p>Lembre-se que temos dois efeitos principais discutidos em SeÃ§Ã£o&nbsp;4.2.2 que explicam como essa melhoria nas vendas ocorreu. Vamos listÃ¡-los de maneira clara e curta em um novo slide:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/porque-vendemos.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Por que vendemos mais?</figcaption>
</figure>
</div>
<p>Deixe os detalhes mais especÃ­ficos dos dois efeitos acima (â€œqual era o problema na API, e como superamos ele?â€, â€œcomo isso Ã© uma melhoria?â€, â€œo que Ã© uma taxa de conversÃ£o? E como isso afeta o processo de venda?â€) para a sua fala. Lembre-se, tente evitar ao mÃ¡ximo colocar textos longos em suas apresentaÃ§Ãµes, e tente dar mais detalhes ou responder Ã s perguntas dos seus espectadores atravÃ©s da fala.</p>
<p>Portanto, com esses trÃªs slides nÃ³s temos uma estrutura e um conteÃºdo muito mais interessantes para a nossa apresentaÃ§Ã£o, pois estamos contando uma histÃ³ria sobre como vendemos mais em um determinado mÃªs.</p>
<p>Perceba que a estrutura da apresentaÃ§Ã£o (1: mensagem principal, 2: onde? , 3: como?) nos ajuda a criar o conteÃºdo e essa histÃ³ria de forma coesa. Nas prÃ³ximas seÃ§Ãµes deste artigo, vou discutir duas outras estruturas que podem te ajudar a estruturar e a contar sua histÃ³rias de maneira coesa.</p>
</section>
<section id="sec-historias-tem-estrutura" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> HistÃ³rias tem estrutura, use essas estruturas ao seu favor</h1>
<p>Nas prÃ³ximas seÃ§Ãµes, vou mostrar dois exemplos de estruturas bastante comuns em histÃ³rias. Essas estruturas servem como um guia durante a construÃ§Ã£o de sua histÃ³ria. Elas te ajudam muito a organizar as suas ideias em um formato claro e efetivo.</p>
<section id="o-modelo-dos-quatro-cs" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="o-modelo-dos-quatro-cs"><span class="header-section-number">6.1</span> O modelo dos quatro Câ€™s</h2>
<p>O modelo dos quatro Câ€™s se refere a estas quatro palavras:</p>
<blockquote class="blockquote">
<p>Contexto, Conflito, ConsequÃªncia, Conselho.</p>
</blockquote>
<p>Estas quatro palavras, te ajudam a trazer uma estrutura consistente para a sua histÃ³ria. AlÃ©m disso, essas palavras tambÃ©m te ajudam a mexer um pouco com as emoÃ§Ãµes de seus espectadores, e, com isso, capturar mais a atenÃ§Ã£o deles.</p>
<p>Ao seguir esse modelo, sua histÃ³ria vai sempre se dividir em quatro partes: contexto, conflito, consequÃªncia e conselho. Precisamente nesta ordem. Esse estrutura gira em torno de um problema, ou um conflito principal que vocÃª identificou no negÃ³cio de seu cliente.</p>
<p>O interessante dessa estrutura, Ã© que vocÃª pode estacar vÃ¡rios problemas em sequÃªncia. Como resultado, vocÃª tem um bloco de 4 Câ€™s (contexto, conflito, consequÃªncia e conselho), seguido de um outro bloco com mais 4 Câ€™s (contexto, conflito, consequÃªncia e conselho). Ou tambÃ©m, vocÃª pode comeÃ§ar a apresentaÃ§Ã£o por um contexto, e, em seguida, dois blocos de 3 Câ€™s (conflito, consequÃªncia e conselho) em sequÃªncia.</p>
<p>Enfim, chega de papo, e vamos descrever em mais detalhes cada uma das partes dessa estrutura.</p>
<section id="comeÃ§e-por-um-contexto-geral" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="comeÃ§e-por-um-contexto-geral"><span class="header-section-number">6.1.1</span> ComeÃ§e por um contexto geral</h3>
<p>Portanto, ao seguir esse modelo, a sua histÃ³ria vai sempre se iniciar por um contexto geral. Algo apenas para contextualizar o espectador sobre qual Ã© o estado atual do negÃ³cio.</p>
<p>Lembre-se que, o modelo dos 4 Câ€™s Ã© construÃ­do em torno de um conflito, ou de um problema central. Tendo isso em mente, se, por exemplo, o conflito que vocÃª for discutir na sua histÃ³ria, for um problema que afeta o serviÃ§o de venda de maquininhas de cartÃ£o, Ã© importante que vocÃª foque nessa parte do contexto, em dar um <em>overview</em> sobre o produto â€œmaquininhas de cartÃ£oâ€.</p>
<p>Em outras palavras, evite trazer contextos nesta parte que nÃ£o estÃ£o relacionados ao problema/conflito que vocÃª vai apresentar na seÃ§Ã£o seguinte. Pois esse conflito Ã© a parte central de sua histÃ³ria.</p>
</section>
<section id="apresente-um-conflitoproblemadesafio-a-ser-superado" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="apresente-um-conflitoproblemadesafio-a-ser-superado"><span class="header-section-number">6.1.2</span> Apresente um conflito/problema/desafio a ser superado</h3>
<p>Em seguida, vocÃª deve apresentar um conflito. Isto Ã©, um problema, um desafio ou uma barreira que vocÃª tenha identificado no produto/serviÃ§o que vocÃª estÃ¡ analisando. Ã‰ aqui que vamos mexer um pouco com a emoÃ§Ã£o do espectador, e usar isso ao nosso favor para capturar a sua atenÃ§Ã£o.</p>
<p>Vamos refletir um pouco sobre isso. Ao colocarmos palavras como â€œproblemaâ€, â€œcuidadoâ€, â€œdesafioâ€, â€œalertaâ€, especialmente em letras garrafais, alÃ©m de incluir emojis que transmitem esse intuito, como âš ï¸ e â›”. Isso rapidamente chama a atenÃ§Ã£o de qualquer pessoa, pois te dÃ¡ uma sensaÃ§Ã£o de perigo, e vocÃª entra em um estado de alerta.</p>
<p>Se vocÃª refletir mais um pouco sobre isso, vocÃª provavelmente vai perceber que vocÃª tem esse mesmo instinto quando vocÃª estÃ¡ assistindo a um filme, ou a uma sÃ©rie, e o herÃ³i dessa histÃ³ria de repente entra em uma situaÃ§Ã£o de perigo. VocÃª rapidamente presta mais atenÃ§Ã£o no que estÃ¡ acontecendo, pois vocÃª quer ver como o herÃ³i vai sair dessa enrascada, ou vocÃª estÃ¡ torcendo muito para que ele sobreviva e supere esse problema.</p>
<p>Ao apresentarmos um problema sobre o produto/serviÃ§o que vocÃª estÃ¡ analisando, estamos querendo causar esse mesmo efeito em nossos espectadores. Ao dizermos que temos um desafio/problema que estÃ¡ afetando as vendas da empresa, os gerentes rapidamente comeÃ§am a prestar mais atenÃ§Ã£o no que vocÃª estÃ¡ dizendo, pois eles querem saber como eles podem sair dessa enrascada!</p>
</section>
<section id="esconder-os-problemas-Ã©-uma-pÃ©ssima-ideia" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="esconder-os-problemas-Ã©-uma-pÃ©ssima-ideia"><span class="header-section-number">6.1.3</span> Esconder os problemas Ã© uma pÃ©ssima ideia</h3>
<p>Isso Ã© muito importante! Alguns analistas tem medo ou receio de jogar luz sobre os problemas existentes, e, por isso, acabam escodendo eles ou omitindo de suas apresentaÃ§Ãµes. PorÃ©m, vocÃª nÃ£o estÃ¡ entregando valor nenhum para o seu cliente dessa forma! VocÃª nÃ£o estÃ¡ ajudando o seu cliente a resolver os problemas e a crescer o negÃ³cio dele!</p>
<p>E se os problemas nÃ£o sÃ£o solucionados, se eles continuam existindo, eles vÃ£o crescer, e crescer, atÃ© que eles explodirem, gerando assim um caos generalizado. Em vista disso, quanto mais cedo vocÃª identificar esse problema, avisar os gerentes sobre ele, e apresentar possÃ­veis soluÃ§Ãµes para ele, melhor para os gerentes, que jÃ¡ saem com um plano de aÃ§Ã£o para resolver esse problema, e Ã© melhor para vocÃª tambÃ©m, pois estamos entregando valor e soluÃ§Ãµes para o cliente.</p>
<p>Portanto, uma boa apresentaÃ§Ã£o, ou um bom relatÃ³rio de dados, Ã© aquele que entrega valor para o seu cliente! Ao mostrar novas oportunidades de negÃ³cio (e.g.&nbsp;atingir uma nova parcela do pÃºblico com um produto), e tambÃ©m, apresentar soluÃ§Ãµes para problemas atuais que estÃ£o limitando ou impedindo o crescimento do negÃ³cio.</p>
<p>PorÃ©m, uma apresentaÃ§Ã£o que apenas comenta pontos positivos, que fala que estÃ¡ tudo bemâ€¦ nÃ£o traz valor nenhum para os gerentes. Os gerentes nÃ£o te contrataram para falar que estÃ¡ tudo bem. Eles te contrataram para que vocÃª ajude eles a descobrir e solucionar problemas no negÃ³cio deles, atravÃ©s da anÃ¡lise de dados.</p>
</section>
<section id="apresente-as-consequÃªncias-do-conflitoproblemadesafio-que-vocÃª-identificou" class="level3" data-number="6.1.4">
<h3 data-number="6.1.4" class="anchored" data-anchor-id="apresente-as-consequÃªncias-do-conflitoproblemadesafio-que-vocÃª-identificou"><span class="header-section-number">6.1.4</span> Apresente as consequÃªncias do conflito/problema/desafio que vocÃª identificou</h3>
<p>Portanto, apÃ³s apresentar um conflito/problema/desafio que estÃ¡ afetando o negÃ³cio para o seu espectador, Ã© importante que vocÃª apresente logo em seguida a consequÃªncia desse problema. Isso ajuda os gerentes a terem uma dimensÃ£o do tamanho que esse problema representa para o negÃ³cio deles.</p>
<p>Tudo bem se vocÃª nÃ£o conseguir mensurar em nÃºmeros o tamanho do impacto que esse conflito gerou no negÃ³cio. Tente medir esse impacto da melhor forma que vocÃª puder. Um valor aproximado do impacto jÃ¡ pode trazer bastante clareza sobre o tamanho do perigo que esse conflito representa para o negÃ³cio de seus espectadores.</p>
<p>VocÃª tambÃ©m pode fornecer um <em>range</em>, ou um intervalo possÃ­vel do impacto se vocÃª puder (e.g.&nbsp;o impacto estimado estÃ¡ entre R$ 20 mil e R$ 340 mil). Essa tambÃ©m Ã© uma forma vÃ¡lida de expor o tamanho do problema.</p>
<p>Caso for realmente impossÃ­vel de mensurar esse impacto em nÃºmeros, entÃ£o, explique nesta parte, quais sÃ£o os pontos do processo de venda do produto/serviÃ§o que sÃ£o afetados por esse problema. Em outras palavras, apresente quais sÃ£o os lugares do negÃ³cio que estÃ£o sendo, em teoria, afetados por esse conflito.</p>
</section>
<section id="aconselhe-o-seu-cliente-apresente-possÃ­veis-soluÃ§Ãµes-para-o-problema" class="level3" data-number="6.1.5">
<h3 data-number="6.1.5" class="anchored" data-anchor-id="aconselhe-o-seu-cliente-apresente-possÃ­veis-soluÃ§Ãµes-para-o-problema"><span class="header-section-number">6.1.5</span> Aconselhe o seu cliente, apresente possÃ­veis soluÃ§Ãµes para o problema</h3>
<p>Ok, apresentamos um problema, ou um conflito para os nossos espectadores. TambÃ©m discutimos os impactos desse conflito sobre o negÃ³cio de nosso cliente. Agora, precisamos apresentar possÃ­veis soluÃ§Ãµes para esse problema.</p>
<p>Portanto, entenda o problema/conflito que vocÃª estÃ¡ apresentando, e tente listar quais seriam as principais soluÃ§Ãµes para esse problema, e inclua essas soluÃ§Ãµes nesta parte de sua apresentaÃ§Ã£o. Vale a pena explicar e discutir esse problema com outros colegas de trabalho tambÃ©m, pois eles tambÃ©m podem sugerir soluÃ§Ãµes interessantes que estavam fora de seu radar.</p>
<p>Ã‰ interessante tambÃ©m incluir uma relaÃ§Ã£o dos <em>trade-offs</em> de cada soluÃ§Ã£o, principalmente em questÃ£o de complexidade e esforÃ§o de cada soluÃ§Ã£o. Gerentes estÃ£o constantemente interessados nessa relaÃ§Ã£o, e querem sempre escolher a soluÃ§Ã£o que seja mais simples e mais rÃ¡pida de ser implementada.</p>
</section>
</section>
<section id="evoluÃ§Ã£o-do-personagem-como-uma-outra-alternativa" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="evoluÃ§Ã£o-do-personagem-como-uma-outra-alternativa"><span class="header-section-number">6.2</span> EvoluÃ§Ã£o do personagem como uma outra alternativa</h2>
<p>A evoluÃ§Ã£o do personagem (ou a â€œjornada do herÃ³iâ€) Ã© uma estrutura de histÃ³ria bem popular. VocÃª comeÃ§a por um personagem, ou, um herÃ³i para a histÃ³ria, que no nosso caso aqui, pode ser o negÃ³cio do nosso cliente, ou um produto especÃ­fico dele.</p>
<p>Nossa missÃ£o Ã© mostrar como esse personagem/herÃ³i evoluiu nos Ãºltimos meses. Por isso, essa estrutura de evoluÃ§Ã£o Ã© bastante apropriada para relatÃ³rios no final do ano. Pois esses relatÃ³rios sÃ£o interessantes para mostrarmos a evoluÃ§Ã£o do negÃ³cio (ou a evoluÃ§Ã£o do personagem) no Ãºltimo ano.</p>
<section id="o-inÃ­cio-e-o-fim-da-jornada" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="o-inÃ­cio-e-o-fim-da-jornada"><span class="header-section-number">6.2.1</span> O inÃ­cio e o fim da jornada</h3>
<p>Se vocÃª preferir, vocÃª pode comeÃ§ar a sua apresentaÃ§Ã£o apresentando como o seu personagem estava no inÃ­cio da jornada, e, terminar essa apresentaÃ§Ã£o mostrando como esse personagem terminou essa jornada.</p>
<p>Essa Ã© uma opÃ§Ã£o, porÃ©m, eu prefiro comeÃ§ar a apresentaÃ§Ã£o mostrando o inÃ­cio e o fim ao mesmo tempo. Desse modo, os espectadores jÃ¡ comeÃ§am a apresentaÃ§Ã£o tendo uma noÃ§Ã£o do quanto o negÃ³cio evoluiu durante o ano. Portanto, eu comeÃ§o apresentando como o personagem (ou o negÃ³cio/produto) comeÃ§ou o ano, e, logo em seguida, como ele terminou o ano.</p>
</section>
<section id="apresentando-os-desafios-e-percalÃ§os" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="apresentando-os-desafios-e-percalÃ§os"><span class="header-section-number">6.2.2</span> Apresentando os desafios e percalÃ§os</h3>
<p>Em todo negÃ³cio/produto, qualquer que ele seja, nÃ³s sempre enfrentamos grandes desafios que podem ameaÃ§ar o sucesso, ou, limitar a evoluÃ§Ã£o deste negÃ³cio/produto.</p>
<p>Portanto, ao longo de qualquer jornada, nÃ³s sempre enfrentamos desafios e percalÃ§os, e aplicamos aÃ§Ãµes para tentar superar esses desafios. Ao superar esses desafios, nÃ³s podemos com certa esperanÃ§a gerar a evoluÃ§Ã£o e melhoria desse negÃ³cio/produto. Isto Ã©, chegar ao final dessa jornada com um negÃ³cio/produto melhor, mais robusto e mais rentÃ¡vel.</p>
<p>Tudo isso significa que o â€œcomo percorremos o meio da jornadaâ€ pode ser muito mais importante/interessante que o inÃ­cio ou o final dessa jornada. Sendo assim, reserve uma parte de sua apresentaÃ§Ã£o para apresentar os principais desafios que enfrentamos durante essa travessia, e como superamos eles.</p>
</section>
<section id="se-possÃ­vel-aproveite-para-valorizar-o-trabalho-de-sua-equipe" class="level3" data-number="6.2.3">
<h3 data-number="6.2.3" class="anchored" data-anchor-id="se-possÃ­vel-aproveite-para-valorizar-o-trabalho-de-sua-equipe"><span class="header-section-number">6.2.3</span> Se possÃ­vel, aproveite para valorizar o trabalho de sua equipe</h3>
<p>Nesse ponto especÃ­fico da apresentaÃ§Ã£o, vocÃª geralmente tem uma oportunidade muito interessante! Pois vocÃª pode, entregar valor ao seu cliente, e, ao mesmo tempo, tambÃ©m valorizar o trabalho de sua equipe, especialmente se foi essa a equipe que descobriu os desafios, e, aplicou as aÃ§Ãµes que superaram esses desafios que vocÃª estÃ¡ descrevendo.</p>
<p>Isso Ã© uma oportunidade de ouro! Portanto, se vocÃª tiver essa oportunidade em suas mÃ£os, aproveite ela! Lembre-se que vocÃª nÃ£o trabalha sozinho. VocÃª quase sempre estÃ¡ trabalhando dentro de uma equipe de pessoas, e Ã© sempre importante saber como valorizar o trabalho de seus colegas.</p>
<p>Contudo, essa oportunidade nem sempre vai aparecer para vocÃª. Talvez os desafios que vocÃª estÃ¡ apresentando, foram superados de outra forma, por uma outra equipe que vocÃª nÃ£o conhece, ou que nÃ£o possui conexÃ£o direta.</p>
</section>
<section id="reforce-os-resultados-alcanÃ§ados" class="level3" data-number="6.2.4">
<h3 data-number="6.2.4" class="anchored" data-anchor-id="reforce-os-resultados-alcanÃ§ados"><span class="header-section-number">6.2.4</span> Reforce os resultados alcanÃ§ados</h3>
<p>TambÃ©m Ã© Ãºtil terminar a sua apresentaÃ§Ã£o, mostrando um resumo dos resultados alcanÃ§ados ao longo do ano. Isto pode ser um <em>bulletpoint</em> simples, resumindo os principais resultados. Isso ajuda a refrescar a memÃ³ria de seus espectadores, mostrando a eles nÃ£o apenas sobre como terminamos a jornada do ano passado, mas tambÃ©m, sobre como nÃ³s comeÃ§amos a jornada do prÃ³ximo ano ğŸ˜‰.</p>
</section>
<section id="um-resumo-da-estrutura" class="level3" data-number="6.2.5">
<h3 data-number="6.2.5" class="anchored" data-anchor-id="um-resumo-da-estrutura"><span class="header-section-number">6.2.5</span> Um resumo da estrutura</h3>
<p>Portanto, nas seÃ§Ãµes anteriores discutimos uma ideia de estrutura que seria similar Ã  uma â€œevoluÃ§Ã£o do personagemâ€. No final, temos uma histÃ³ria que segue a seguinte sequÃªncia:</p>
<ul>
<li>apresente rapidamente como comeÃ§amos e como terminamos a jornada;</li>
<li>apresente os principais desafios que enfrentamos durante o ano;</li>
<li>quais foram as soluÃ§Ãµes que aplicamos para solucionar os problemas;</li>
<li>reforce a evoluÃ§Ã£o do personagem, ao mostrar novamente os resultados atingidos com as soluÃ§Ãµes acima;</li>
</ul>


</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Vale relembrar que os nÃºmeros e grÃ¡ficos apresentados nessa imagem sÃ£o meramente ilustrativos, e, foram definidos de forma completamente aleatÃ³ria.â†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>Storytelling</category>
  <category>Data Storytelling</category>
  <category>Data Science</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/pt/index.html</guid>
  <pubDate>Mon, 06 Mar 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-03-06-storytelling/mapa-featured.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Introducing the {ggfunnel} R package</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-02-11-funnel-pkg-v010/en/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>At my work, I use a lot of funnel charts. Because they are a very effective visualization to see losses trough a sequence of steps in a sales process (or a â€œsales pathâ€). I usually build these funnel charts in a very popular Microsoft tool called Power BI.</p>
<p>This tool is very popular to build interactive dashboards, and it offers many different native visuals and type of charts to build your visualizations. One visual in particular, is the native funnel chart visual which you can use to visualize your data in a funnel chart, like in the example below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-02-11-funnel-pkg-v010/power-bi.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">A funnel chart at Power BI</figcaption>
</figure>
</div>
<p>But after working a lot with these charts in Power BI, I tought to myself: â€œcould I make a funnel chart in R?â€. The answer is obviously yes! You could definitely drawn a funnel chart with frameworks such as the <code>ggplot2</code> package. However, there was no packages in the community that could build such visualization out of the box.</p>
<p>So I decided to develop a small and experimental R package that could drawn this type of chart. This is how <code>{ggfunnel}</code> was born. In essence, with <code>{ggfunnel}</code>, you can build Power BI like funnel charts in R. The <code>{ggfunnel}</code> package uses the <code>{ggplot2}</code> package (or, more specifically, the <code>ggplot2::geom_tile()</code> geom) to build the funnel chart.</p>
<p><a href="https://github.com/pedropark99/ggfunnel"> <button type="button" class="btn btn-primary">Official repository</button></a> <a href="https://pedropark99.github.io/ggfunnel/"> <button type="button" class="btn btn-primary">Package website</button></a></p>
</section>
<section id="how-to-get-it" class="level1">
<h1>How to get it ?</h1>
<p>For now, <code>{ggfunnel}</code> is available only at GitHub. You can download and install the package with the <code>devtools::install_github()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">devtools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pedropark99/ggfunnel"</span>)</span></code></pre></div>
</div>
</section>
<section id="a-small-example-of-use" class="level1">
<h1>A small example of use</h1>
<p>The main functionality of the package is at a function called <code>ggfunnel::funnel()</code>, which is responsible for producing the plot. You usually define 3 arguments in this function, which are:</p>
<ul>
<li><code>data</code>: the data.frame with the data you want to use in the plot;</li>
<li><code>values</code>: the column name where are the values you want to display in your funnel chart. In other words, the numerical data that you want to visualize in the chart;</li>
<li><code>levels</code>: the column name with the â€œlevelsâ€ (or the â€œgroupsâ€) you want to display in your funnel chart. In other words, the categorical data that identifies each level in the funnel;</li>
</ul>
<p>In the example below, we are using the <code>ggfunnel::aggregates</code> data.frame to build a basic funnel chart:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggfunnel)</span>
<span id="cb2-2">ggfunnel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>aggregates</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Step N_users
1    A    4389
2    B    3100
3    C    2005
4    D     500
5    E     120</code></pre>
</div>
</div>
<p>The <code>N_users</code> column is the column with numerical data, so I give it to the <code>values</code> argument of the function. This way, these values will be used to determine the widths of each rectangle in the funnel chart.</p>
<p>In contrast, the <code>Step</code> column contains the categorical data of the dataset. That is why I gave this column to the <code>levels</code> argument of the function. As a result, the values of this column will be used to determine the â€œlevelsâ€ of the funnel chart.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ggfunnel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">funnel</span>(</span>
<span id="cb4-2">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> ggfunnel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>aggregates,</span>
<span id="cb4-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> N_users, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> Step</span>
<span id="cb4-4">  )</span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(plot)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-02-11-funnel-pkg-v010/en/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The above plot is very simple. However, since the output of <code>ggfunnel::funnel()</code> is a native <code>ggplot</code> object, you can customize and extend the plot greatly with the <code>{ggplot2}</code> package. I give examples and details on how you can customize this output at the main vignette (<code>vignette("funnel")</code>) of the package, which you can <a href="https://pedropark99.github.io/ggfunnel/articles/funnel.html">read at the website of the package</a>.</p>
<p>Just as a small demonstration, I can add titles to the plot, adjust the theme, and add some notes and arrows to emphasize some parts of the plot. I can also use other packages which extends <code>{ggplot2}</code> to add more custom outputs to the plot, such as the <code>{ggtext}</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ggfunnel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>aggregates <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-2">  ggfunnel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">funnel</span>(</span>
<span id="cb5-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> N_users, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">levels =</span> Step,</span>
<span id="cb5-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text_specs =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb5-5">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nudge_x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">times =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>),</span>
<span id="cb5-6">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">times =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>)</span>
<span id="cb5-7">    )</span>
<span id="cb5-8">  )</span>
<span id="cb5-9"></span>
<span id="cb5-10">note <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"We lost **75% of the users**&lt;br&gt;from step </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">C</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> to step </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">D</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb5-11"></span>
<span id="cb5-12">plot <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-13">  ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb5-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Funnel of users in each step of the sales path"</span>,</span>
<span id="cb5-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The biggest loss of users is at the </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">D</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> step"</span>,</span>
<span id="cb5-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb5-17">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-18">  ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb5-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>),</span>
<span id="cb5-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot"</span></span>
<span id="cb5-21">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-22">  ggtext<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_richtext</span>(</span>
<span id="cb5-23">    ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.35</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>,</span>
<span id="cb5-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> note),</span>
<span id="cb5-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label.color =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span></span>
<span id="cb5-26">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-27">  ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(</span>
<span id="cb5-28">    ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.17</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.07</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>), </span>
<span id="cb5-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arrow =</span> ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrow</span>(</span>
<span id="cb5-30">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length =</span> ggplot2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cm"</span>)</span>
<span id="cb5-31">    )</span>
<span id="cb5-32">  )</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-02-11-funnel-pkg-v010/en/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="a-simple-but-far-from-perfect-approach" class="level1">
<h1>A simple (but far from perfect) approach</h1>
<p><code>{ggfunnel}</code> is a very simple (and kind of experimental) package, and it is far from perfect. This means that, currently, <code>{ggfunnel}</code> gives you the minimal code necessary to produce a decent funnel chart. But it does not give you much more functionality than that.</p>
<p>It also makes some assumptions about your data that might not hold, and it does not contain some features that you might find at Power BI (e.g.&nbsp;percentage labels).</p>
<p>But, even being a very simple package, <code>ggfunnel::funnel()</code> always returns the raw <code>ggplot</code> object that describes the funnel chart. This means that the package gives you a lot of freedom to customize (or to complement) the output in the way you might need. See <a href="https://pedropark99.github.io/ggfunnel/articles/funnel.html"><code>vignette("funnel")</code></a> for more details on how to customize/complement the <code>ggfunnel::funnel()</code> output.</p>
<p>However, the package needs some work to be a more robust and complete piece of code, for sure. If you think you can make <code>{ggfunnel}</code> better I would be happy to review a PR from you!</p>


</section>

 ]]></description>
  <category>R Language</category>
  <category>Package</category>
  <category>Power BI</category>
  <category>Funnel charts</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-02-11-funnel-pkg-v010/en/index.html</guid>
  <pubDate>Sat, 11 Feb 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-02-11-funnel-pkg-v010/background-ggfunnel.png" medium="image" type="image/png" height="84" width="144"/>
</item>
<item>
  <title>What I learned from developing my first Python package</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-02-06-python-pckg/en/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>In 2022, I developed my first Python package called <a href="https://github.com/pedropark99/spark_map"><code>spark_map</code></a>, and published it at PyPI. If you want to know more about this package ğŸ˜‰, you can check <a href="https://pedro-faria.netlify.app/posts/2022/2022-12-21-spark-map-v0.2.3/en/">a previous post here</a>, where I introduced the package, and described itâ€™s main features, and showed a small use case.</p>
<p>Now, although <code>spark_map</code> is a small Python package, I had a hard time developing it. More specifically, the Python code was not hard at all to develop. But packaging it into a proper package ğŸ“¦ was hard. In this post, I want to share a few things that I learned about Python package development in this process.</p>
</section>
<section id="before-i-say-anything-some-references" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Before I say anything, some references</h1>
<p>The development of this package involved reading several articles ğŸ““, and doing some practical tests ğŸ§ª. Here I share some of the best resources I discovered along the way.</p>
<p>First, a great article to start your project is the <a href="https://packaging.python.org/en/latest/tutorials/packaging-projects/">Packaging Python Projects</a> tutorial. This tutorial is written by PyPA, or, the <a href="https://www.pypa.io/en/latest/">Python Packaging Authority</a> team<sup>1</sup>, and it seems to be â€œThe Placeâ€ to search for best practices on Python package projects.</p>
<p>The PyPA team also have a very detailed documentation about <a href="https://packaging.python.org/en/latest/guides/distributing-packages-using-setuptools/">Packaging and distributing projects</a> with <code>setuptools</code>. This is a more technical, detailed documentation, but, it can be a great resource too.</p>
<p>Another very useful article to learn about the structure of a Python package, and the import process of Python, is the article entitled <a href="https://dev.to/codemouse92/dead-simple-python-project-structure-and-imports-38c6">Dead Simple Python: Project Structure and Imports</a> from Jason C. McDonald.</p>
</section>
<section id="now-lets-dive-in" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Now, letâ€™s dive in</h1>
<section id="the-search-path-of-python" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="the-search-path-of-python"><span class="header-section-number">3.1</span> The search path of Python</h2>
<p>We usually import a package in Python, by including a <code>import</code> statement at the beginning of our script. For example, to import the <code>pandas</code> package to my Python session, I could do this:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas</span></code></pre></div>
</div>
<p>When you import a package in Python, the Python interpreter starts a search process ğŸ” through your computer, to find the specific package you called in your script. Every Python package you use must be installed in your machine. Otherwise, Python will never find it, and, as a consequence, you can not use it.</p>
<p>The Python interpreter will always look for the packages you import, inside a set of pre-defined locations of your computer. This pre-defined list is stored inside the <code>sys.path</code> variable <span class="citation" data-cites="pymodule">(Foundation 2023c)</span>. In other words, when you import a package, Python looks for this package inside each one of the directories listed at <code>sys.path</code> variable.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> sys</span>
<span id="cb2-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(sys.path)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['/home/pedro/Documentos/Projetos/Personal-website/posts/2023/2023-02-06-python-pckg/en', '/usr/lib/python310.zip', '/usr/lib/python3.10', '/usr/lib/python3.10/lib-dynload', '', '/home/pedro/.local/lib/python3.10/site-packages', '/usr/local/lib/python3.10/dist-packages', '/usr/lib/python3/dist-packages']</code></pre>
</div>
</div>
<p>You might also find contents about the <code>PYTHONPATH</code> variable when searching for this subject on the internet. In essence, <code>PYTHONPATH</code> is a environment variable that can contain a complementary list of directories to be added to <code>sys.path</code> <span class="citation" data-cites="pypathvar">(Foundation 2023a)</span>.</p>
<p>As you can imagine, the Python interpreter look into these directories in a sequential manner. That is, Python looks for the package at the first folder. If it does not find the package you called, then, it looks at the second folder. If it does not find the package again, it looks at the third folder. And goes on and on, until it hits the last folder of the list.</p>
<p>If does not find the package you called at this last folder, Python will automatically raise a <code>ModuleNotFoundError</code> error. As you expect, this error means that Python could not find the package you called at any of the directories listed at <code>sys.path</code>.</p>
</section>
<section id="do-not-change-the-sys.path-or-pythonpath-variable" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="do-not-change-the-sys.path-or-pythonpath-variable"><span class="header-section-number">3.2</span> Do not change the <code>sys.path</code> or <code>PYTHONPATH</code> variable âš ï¸</h2>
<p>The <code>sys.path</code> variable is a standard Python list, and, as any other list, can be altered to include other directories that are not currently there. The same goes for the <code>PYTHONPATH</code> variable, which is an environment variable, and can be altered too.</p>
<p>As an example, when you try to import your package, which is stored at folder <code>A</code>, and, you face a <code>ModuleNotFoundError</code> error, you might be tempted to alter <code>PYTHONPATH</code> or <code>sys.path</code>, to add the folder <code>A</code> to this search path of Python. DO NOT DO IT! YOU SHOULD NEVER alter <code>PYTHONPATH</code> or <code>sys.path</code> âš ï¸ ! I mean, at least not inside a Python package.</p>
<p>In other words, if at some point inside the source code of your Python package, you execute a code like this:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> sys</span>
<span id="cb4-2">sys.path.append(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'./../weird-unknow-folder'</span>)</span></code></pre></div>
</div>
<p>just erase this code! Python packages are made to be used by other peoples, and with a code like this above, you will change the search path of this user. Changing the search path of a user is a bad idea. Because you can accidentaly produce bad and confusing side effects to the userâ€™s session, which can be hard to debug and solve.</p>
<p>Besides, in the majority of times when you alter the <code>sys.path</code>, you are trying to overcome a bad structure of your files. In other words, you can always avoid altering the <code>sys.path</code> variable by changing the structure of your source files inside your project.</p>
<p>Just to be clear, is a bad idea to alter the <code>sys.path</code> inside the source code of your package. However, it is ok to alter these variables outside of your package.</p>
<p>As a practical example, Apache Spark is written in Scala. But it have a Python API available through the <code>pyspark</code> package. If you look closely into the source code of the project, or, more specifically at the <a href="https://github.com/apache/spark/blob/master/python/run-tests.py"><code>run-tests.py</code></a> file, you can see that new paths (or new directories) are appended to <code>sys.path</code> in this file.</p>
<p>However, this <code>run-tests.py</code> file IS NOT A PART of the <code>pyspark</code> package itself. It is just an auxiliary script (outside of the package) used to support the testing processes of <code>pyspark</code>. This means that <code>run-tests.py</code> contains code that is not intended to be executed by the users of the package, but by the developers of <code>pyspark</code> instead.</p>
</section>
<section id="differences-between-a-package-and-a-module" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="differences-between-a-package-and-a-module"><span class="header-section-number">3.3</span> Differences between a package and a module</h2>
<p>This is a very basic knowledge for a Python developer. However, until recently, I did not know the meaning of these two concepts. So, I will give it to you now, in case you do not have it yet.</p>
<p>A Python module is a single Python file (i.e.&nbsp;a file with extension <code>.py</code>). Every Python script you write, is a Python module. In contrast, a Python package is a set of Python modules gathered together inside a folder. This folder must contain a particular Python module named as <code>__init__.py</code>. This <code>__init__.py</code> is the file that â€œinitializeâ€, or, â€œidentifiesâ€ this folder as a Python package <span class="citation" data-cites="pypackages">(Foundation 2023b)</span>.</p>
<p>You can have multiple Python packages inside a Python package. That is, inside the directory of your package, you can have multiple sub-directories with more Python modules and <code>__init__.py</code> files. In this case, these sub-directories become submodules of the package. You can interpret them as sub-packages, if you prefer.</p>
</section>
<section id="structuring-the-package-was-one-of-the-hardest-parts" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="structuring-the-package-was-one-of-the-hardest-parts"><span class="header-section-number">3.4</span> Structuring the package was one of the hardest parts</h2>
<p>Every Python package follows the same basic file/directory structure ğŸ›ï¸. In other words, the files that compose a Python package are always structured in a standard way. But, understanding and using this structure effectively was one of the hardest parts for me. At this section, I want to explain this structure for you.</p>
<p>In a Python package project, you usually have these <strong>files</strong>:</p>
<ul>
<li><p><code>LICENSE.md</code> or <code>LICENSE.rst</code> (or both): a text file with the license of your package. It can be a Markdown file (<code>.md</code>), or, a reStructuredText markup file (<code>.rst</code>);</p></li>
<li><p><code>README.md</code>: a Markdown file introducing your package. That is, a file that describes succintly the objective of the package, its main features, and showing a small example of use of the package;</p></li>
<li><p><code>setup.py</code> or <code>pyproject.toml</code> or <code>setup.cfg</code>: these are files used by the build system you choose to build (or compile) your Python package into a compact and shareable format;</p></li>
</ul>
<p>Also, a Python package project usually contains these <strong>folders (or directories)</strong>:</p>
<ul>
<li><code>src/&lt;package-name&gt;/</code> or <code>&lt;package-name&gt;/</code>: inside this directory you store all Python modules of your package, that is, the source code of your package;</li>
<li><code>tests/</code>: inside this directory you store all unit tests of your package. In other words, the scripts and automated workflow used to test your package.</li>
</ul>
<!--
- `doc/` or `docs/`: inside this directory you store all documentation files. That is, files that document your package, describe its contents, functionality and concepts;
-->
<p>You must store the source code (or the python modules) of your package inside a folder with the same name as the package itself (i.e.&nbsp;the <code>&lt;package-name&gt;/</code> folder). So, for a package named <code>spark_map</code> we should keep the source files (i.e.&nbsp;the <code>.py</code> files) of this package inside a folder called <code>spark_map</code>. As a practical example, if you <a href="https://github.com/pandas-dev/pandas/tree/main/pandas">look at the source code</a> of the famous <code>pandas</code> package, you will see that all source code of the package is stored inside a folder called <code>pandas</code>.</p>
<p>In contrast, this <code>&lt;package-name&gt;/</code> folder might be (or might be not) inside another folder called <code>src/</code>, that is, the path to the source code might be <code>src/&lt;package-name&gt;/</code> instead of <code>&lt;package-name&gt;/</code>. The <code>pandas</code> package for example, do not uses the <code>src/</code> folder, so the source code is stored inside the <code>pandas/</code> folder. In contrast, the famous <code>flask</code> package uses the <code>flask/</code> folder inside a <code>src/</code> folder, so the path to the source code becomes <code>src/flask</code>. <a href="https://github.com/pallets/flask/tree/main/src/flask">You can check this by looking at the source code of the package.</a>.</p>
<p>So the folder structure to store the source code of the package might change very slightly from package to package. There is no consensus about which one of these two structures is the best. But in general, the source is always stored inside a folder with the same name as the package (i.e.&nbsp;the <code>&lt;package-name&gt;/</code> folder). And this folder might be stored inside a <code>src/</code> folder.</p>
<p>Furthermore, every project of a Python package usually have one, two, or more files that <strong>control the build process of the package</strong> (like <code>setup.py</code>, <code>pyproject.toml</code> or <code>setup.cfg</code>). In other words, these files are not part of the package itself. But they are used by the <strong>build system</strong> to build (or compile) your package into a compact and shareable format. I talk more about these files at Section&nbsp;3.5.</p>
<p>Having in mind all these files that we described until here, we can build a example of file structure for a package. For example, a possible file strucuture for a package named <code>haven</code> could be:</p>
<pre><code>.
â”œâ”€â”€ LICENSE.md
â”œâ”€â”€ LICENSE.rst
â”œâ”€â”€ README.md
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ src
â”‚   â””â”€â”€ haven
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ functions.py
â”‚       â”œâ”€â”€ utils.py 
â”‚       â””â”€â”€ haven.py
â”‚
â””â”€â”€ tests
    â”œâ”€â”€ test_functions.py
    â””â”€â”€ test_haven.py</code></pre>
</section>
<section id="sec-build-systems" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="sec-build-systems"><span class="header-section-number">3.5</span> Introducing build systems</h2>
<p>When you are developing a package, you write multiple Python modules that perform all necessary tasks to solve the specific problem you want to solve with your package. However, in order to distribute this package to other peoples, that is, to make it available to the wide public, you need to compile (or build) your package into a compact and shareable format.</p>
<p>This is what a build system does. It compiles all archives of your package into a single and compact file that you can publish at PyPI, and distribute to other peoples. This means that, when a user downloads your package (through <code>pip</code> for example), it downloads this compact and shareable version of your package.</p>
<p>On the day of writing this article, there are four main build systems available on the market for Python packages, which are <code>hatchling</code>, <code>setuptools</code>, <code>flit</code> and <code>PDM</code>. No matter which one you use, just choose one, anyone. Because they do the same thing, and work in a very similar way.</p>
<p>Most of them use various metadata stored at the <code>pyproject.toml</code> file to build your project. The <code>setuptools</code> build system is probably a exception to this rule, because this build system supports other kinds of files to store this metadata, which are <code>setup.py</code> and <code>setup.cfg</code>.</p>
<section id="the-pyproject.toml-file-as-the-commom-ground" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="the-pyproject.toml-file-as-the-commom-ground"><span class="header-section-number">3.5.1</span> The <code>pyproject.toml</code> file as the commom ground</h3>
<p>The <a href="https://peps.python.org/pep-0517/">PEP517</a> and <a href="https://peps.python.org/pep-0518/">PEP518</a> were lauched to stablish the <code>pyproject.toml</code> file as the commom ground to every build system. Basically, the <code>pyproject.toml</code> is a file included at the root level of your project, and contains metadata about your package (e.g.&nbsp;itâ€™s name, version, license, description, author, dependencies, etc.).</p>
<p>It represents a â€œcommom groundâ€ because all build systems available can read and use this file to build (or compile) your package. As a consequence, with this file, you can change very easily the build system you use in your package, without having to change various configurantions and files. All you have to do is to change the options under the <code>build-system</code> table.</p>
<p>This <code>build-system</code> table is the part of <code>pyproject.toml</code> file where you can specify options and configurations for the build system. As an example, to use the <code>setuptools</code> build system, you would add these lines to <code>pyproject.toml</code>:</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">build-system</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb6-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">requires</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"setuptools"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb6-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">build-backend</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"setuptools.build_meta"</span></span></code></pre></div>
<p>In the other hand, if you want to use the <code>hatchling</code> build system instead, you would change the above lines to:</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb7-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">build-system</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb7-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">requires</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hatchling"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb7-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">build-backend</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hatchling.build"</span></span></code></pre></div>
<p>Or, maybe you prefer <code>flit</code>:</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb8-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">build-system</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb8-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">requires</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flit_core"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb8-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">build-backend</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flit_core.buildapi"</span></span></code></pre></div>
<p>Anyway, you get it. You use the options <code>requires</code> and <code>build-backend</code> under the <code>build-system</code> table to specificy which system you want to use in the building process of your package. All of these different systems will use <code>pyproject.toml</code> to collect other very important metadata about your package, like these metadata below:</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">project</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb9-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"spark_map"</span></span>
<span id="cb9-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">version</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.2.77"</span></span>
<span id="cb9-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">authors</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb9-5">  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{ </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pedro Faria"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">, </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">email</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pedropark99@gmail.com"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> }</span></span>
<span id="cb9-6"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb9-7"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">description</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pyspark implementation of `map()` function for spark DataFrames"</span></span>
<span id="cb9-8"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">readme</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"README.md"</span></span>
<span id="cb9-9"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">requires-python</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&gt;=3.7"</span></span>
<span id="cb9-10"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">license</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{ </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">file</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"LICENSE.txt"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> }</span></span>
<span id="cb9-11"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">classifiers</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb9-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Programming Language :: Python :: 3"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-13">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"License :: OSI Approved :: MIT License"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-14">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Operating System :: OS Independent"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-15"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb9-16"></span>
<span id="cb9-17"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dependencies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb9-18">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pyspark"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-19">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"setuptools"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb9-20">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"toml"</span></span>
<span id="cb9-21"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div>
</section>
<section id="the-setuptools-build-system" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="the-setuptools-build-system"><span class="header-section-number">3.5.2</span> The <code>setuptools</code> build system</h3>
<p>The <code>setuptools</code> build system is the system that I use to build <code>spark_map</code>. It is kind of a more â€œversatileâ€<sup>2</sup> system than the others, only because it supports other kinds of files besides <code>pyproject.toml</code>.</p>
<p>The <code>setup.py</code> file is probably the most â€œfamousâ€ file, or, the most associable to <code>setuptools</code>. Although this is changing in recent years (more about this at the next section), the <code>setup.py</code> is still considered the traditional way of using the system, as the documentation itself says:</p>
<blockquote class="blockquote">
<p>The traditional <code>setuptools</code> way of packaging Python modules uses a <code>setup()</code> function within the <code>setup.py</code> script. <span class="citation" data-cites="setuptools">(Authority 2023)</span></p>
</blockquote>
<p>In summary, you can replace <code>pyproject.toml</code> with the <code>setup.py</code> file. Just as an example, I could replace the <code>pyproject.toml</code> file for <code>spark_map</code> with a <code>setup.py</code> file similar to the file below. The whole <code>setup.py</code> file is usually composed of just a single call to the <code>setuptools.setup()</code> function, and nothing more. All of the various metadata about the package stored at <code>pyproject.toml</code> are translated to named arguments to this <code>setup()</code> function.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># setup.py placed at root directory</span></span>
<span id="cb10-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> setuptools <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> setup</span>
<span id="cb10-3">setup(</span>
<span id="cb10-4">    name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'spark_map'</span></span>
<span id="cb10-5">    version <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'0.2.77'</span>,</span>
<span id="cb10-6">    author <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pedro Faria'</span>,</span>
<span id="cb10-7">    description <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pyspark implementation of `map()` function for spark DataFrames'</span>,</span>
<span id="cb10-8">    long_description <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'README.md'</span>,</span>
<span id="cb10-9">    license <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> { <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">file</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"LICENSE.txt"</span> }</span>
<span id="cb10-10">    classifiers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb10-11">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Programming Language :: Python :: 3"</span>,</span>
<span id="cb10-12">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"License :: OSI Approved :: MIT License"</span>,</span>
<span id="cb10-13">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Operating System :: OS Independent"</span>,</span>
<span id="cb10-14">    ],</span>
<span id="cb10-15">    python_requires <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'&gt;=3.7'</span>,</span>
<span id="cb10-16">    install_requires <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pyspark'</span>],</span>
<span id="cb10-17">    extras_require <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'setuptools'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'toml'</span>]</span>
<span id="cb10-18">)</span></code></pre></div>
</div>
<p>However, if you use a <code>setup.py</code> file you become kind of locked into the <code>setuptools</code> framework. This one the reasons why many developers prefer to use the <code>pyproject.toml</code> file instead. Because it becomes so much more easy to change between build systems if you want to.</p>
<p>Another â€œclash pointâ€ about the <code>setup.py</code> file is that it changes the way, or the steps (or the worflow) to build the package. The standard or the most supported strategy to build a package, is to use the <code>build</code> module command of Python at the terminal. This command will build your package, no matter which build system you use:</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># If you are on Windows:</span></span>
<span id="cb11-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">py</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> build</span>
<span id="cb11-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># If you are on Linux:</span></span>
<span id="cb11-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-m</span> build</span></code></pre></div>
<p>In contrast, when you use the <code>setup.py</code> file, you have to execute directly the script with some additional options, like <code>sdist</code>:</p>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># If you are on Windows:</span></span>
<span id="cb12-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">py</span> setup.py sdist</span>
<span id="cb12-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># If you are on Linux:</span></span>
<span id="cb12-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python3</span> setup.py sdist</span></code></pre></div>
<p>Again, this is bad, because it forces you into a certain framework, or, a certain workflow that is different than the standard way of building a package.</p>
</section>
<section id="avoid-setup.py-and-use-pyproject.toml-instead" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="avoid-setup.py-and-use-pyproject.toml-instead"><span class="header-section-number">3.5.3</span> Avoid <code>setup.py</code> and use <code>pyproject.toml</code> instead</h3>
<p>The Python community understood this problem, and now, executing the <code>setup.py</code> script directly is heavily discouraged <span class="citation" data-cites="ganssle">(Ganssle 2021)</span>. Actually, the <code>setuptools</code> project itself started a movement to migrate itâ€™s functionality to <code>pyproject.toml</code> and <code>setup.cfg</code> files.</p>
<p>This concern is clearly documented at <a href="https://setuptools.pypa.io/en/latest/userguide/quickstart.html#basic-use">the â€œQuick Startâ€ section</a> of the official documentation for the project:</p>
<blockquote class="blockquote">
<p>Setuptools offers first class support for <code>setup.py</code> files as a configuration mechanism â€¦ It is important to remember, however, that running this file as a script (e.g.&nbsp;<code>python setup.py sdist</code>) is strongly discouraged, and that the majority of the command line interfaces <strong>are (or will be) deprecated</strong> (e.g.&nbsp;<code>python setup.py install</code>, <code>python setup.py bdist_wininst</code>, â€¦) â€¦ We also recommend users to expose as much as possible configuration in a more declarative way via the <code>pyproject.toml</code> or <code>setup.cfg</code>, and keep the <code>setup.py</code> minimal with only the dynamic parts (<strong>or even omit it completely if applicable</strong>).</p>
</blockquote>
<p>In resume, avoid using <code>setup.py</code> in your project, and use <code>pyproject.toml</code> instead with the <code>python -m build</code> command. This a much more recommended workflow for building your package.</p>
</section>
</section>
</section>
<section id="conclusion" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Conclusion</h1>
<p>In this article, I intended to share what I learned trough my journey of building my first Python package. In summary, the main subjects discussed here were:</p>
<ul>
<li><p>Do not change the <code>sys.path</code> or <code>PYTHONPATH</code> variable inside your package âš ï¸;</p></li>
<li><p>Differences between a package and a module;</p></li>
<li><p>Nailing the structure ğŸ›ï¸ of your package can be one the hardest parts;</p></li>
<li><p>If you use <code>setuptools</code> to build your package, avoid <code>setup.py</code> and use <code>pyproject.toml</code> instead;</p></li>
</ul>
<p>I hope this content help you to develop your projects. See you later ğŸ˜‰ !</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-setuptools" class="csl-entry">
Authority, Python Packaging. 2023. <span>â€œSetuptools Documentation.â€</span> <a href="https://setuptools.pypa.io/en/latest/index.html">https://setuptools.pypa.io/en/latest/index.html</a>.
</div>
<div id="ref-pypathvar" class="csl-entry">
Foundation, Python Software. 2023a. <span>â€œEnvironment Variables.â€</span> <em>Python 3.11.1 Documentation</em>. <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH">https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH</a>.
</div>
<div id="ref-pypackages" class="csl-entry">
â€”â€”â€”. 2023b. <span>â€œPackages.â€</span> <em>Python 3.11.1 Documentation</em>. <a href="https://docs.python.org/3/tutorial/modules.html#packages">https://docs.python.org/3/tutorial/modules.html#packages</a>.
</div>
<div id="ref-pymodule" class="csl-entry">
â€”â€”â€”. 2023c. <span>â€œThe Module Search Path.â€</span> <em>Python 3.11.1 Documentation</em>. <a href="https://docs.python.org/3/tutorial/modules.html#the-module-search-path">https://docs.python.org/3/tutorial/modules.html#the-module-search-path</a>.
</div>
<div id="ref-ganssle" class="csl-entry">
Ganssle, Paul. 2021. <span>â€œWhy You Shouldnâ€™t Invoke Setup.py Directly.â€</span> <a href="https://blog.ganssle.io/articles/2021/10/setup-py-deprecated.html">https://blog.ganssle.io/articles/2021/10/setup-py-deprecated.html</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Probably a bad name for a team. But, that is just my opinion.â†©ï¸</p></li>
<li id="fn2"><p>And I mean these quotation marks, because I am not sure to call a system which can be out of the standard as â€œbeing more versatileâ€, or not.â†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>Python</category>
  <category>Package</category>
  <category>Development workflow</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-02-06-python-pckg/en/index.html</guid>
  <pubDate>Mon, 06 Feb 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-02-06-python-pckg/package.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>JOINs sÃ£o importantes fontes de duplicaÃ§Ãµes em seus dados</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2023/2023-01-10-join-duplicates/pt/index.html</link>
  <description><![CDATA[ 




<section id="introduÃ§Ã£o" class="level1">
<h1>IntroduÃ§Ã£o</h1>
<!--
A regra de ouro da programaÃ§Ã£o DRY (*do not repeat yourself*) tambÃ©m pode influenciar outras dimensÃµes de sua vida. Por exemplo, se vocÃª der o mesmo conselho para uma pessoa pela terceira vez ou mais, Ã© melhor que vocÃª escreva ou documente esse conselho de alguma forma. Desse modo, vocÃª pode disseminar esse conselho para outras pessoas de forma mais efetiva. Esse post Ã© um reflexo direto disso:

> When youâ€™ve written the same code 3 times, write a function. When youâ€™ve given the same in-person advice 3 times, write a blog post. ROBINSON, David, 2017 ^[Essa citaÃ§Ã£o vem de um tweet de David Robinson, o qual estÃ¡ disponÃ­vel no link: <https://twitter.com/drob/status/928447584712253440?s=20&t=5gy5SkBKGr6oXsWcg9LIag>].
-->
<p>Quando estamos construindo uma nova tabela de dados, Ã© muito comum compararmos os nossos resultados com tabelas anteriores e nos depararmos com problemas de divergÃªncia nos dados. Isto Ã©, situaÃ§Ãµes como:</p>
<blockquote class="blockquote">
<p>Uhmmâ€¦ a tabela antiga indica que o nÃºmero de maquininhas vendidas no mÃªs de Dezembro foi de 1387. PorÃ©m, esse mesmo indicador na tabela nova estÃ¡ em 1824 para o mesmo mÃªs de Dezembro. Porque esse aumento?</p>
</blockquote>
<p>Aumentos desse tipo podem ocorrer por uma variedade de razÃµes. PorÃ©m, operaÃ§Ãµes de JOIN tem sido uma razÃ£o especÃ­fica que tenho enfrentado com muita frequÃªncia em meu trabalho. Em outras palavras, JOINs sÃ£o fontes extremamente comuns de dados duplicados. Como resultado, esses dados duplicados acabam gerando um â€œefeito expansivoâ€ sobre os seus indicadores e suas tabelas.</p>
<p>Muitos analistas nÃ£o compreendem o porquÃª, ou nÃ£o enxergam como isso pode ocorrer. Nesse post, busco justamente esclarecer como uma operaÃ§Ã£o de JOIN pode causar esse â€œefeito expansivoâ€ em seus dados. Eu tambÃ©m explico esse efeito em detalhes no capÃ­tulo 6 do meu livro introdutÃ³rio da linguagem R. Mais especificamente, a partir da seÃ§Ã£o <a href="https://pedropark99.github.io/Introducao_R/introdu%C3%A7%C3%A3o-a-base-de-dados-relacionais-com-dplyr.html#rela%C3%A7%C3%B5es-entre-keys-primary-keys-s%C3%A3o-menos-comuns-do-que-voc%C3%AA-pensa">RelaÃ§Ãµes entre <em>keys: primary keys</em> sÃ£o menos comuns do que vocÃª pensa</a>. Portanto, grande parte do conhecimento exposto aqui sÃ£o referÃªncias diretas ao livro.</p>
</section>
<section id="esse-efeito-independe-da-linguagem-de-programaÃ§Ã£o-utilizada" class="level1">
<h1>Esse efeito independe da linguagem de programaÃ§Ã£o utilizada</h1>
<p>Por opÃ§Ã£o minha, vou utilizar exemplos na linguagem R para demonstrar esse â€œefeito expansivoâ€ de JOINs. Mas vocÃª poderia facilmente transpor todos esses exemplos para qualquer outra linguagem de sua preferÃªncia (e.g.&nbsp;como o Python).</p>
<p>Ou seja, o conhecimento exposto aqui <strong>independe da linguagem utilizada</strong>. Pois o efeito descrito aqui Ã© uma caracterÃ­stica intrÃ­nseca ao processo de JOIN, e nÃ£o da linguagem utilizada.</p>
</section>
<section id="um-exemplo-de-efeito-expansivo" class="level1">
<h1>Um exemplo de efeito expansivo</h1>
<p>Para demonstrar esse efeito expansivo, vou utilizar as tabelas <code>cores_de_pele</code> e <code>alturas</code> como exemplo. Podemos visualizar os dados dessas duas tabelas abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">cores_de_pele</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 Ã— 2
     ID Cor    
  &lt;dbl&gt; &lt;chr&gt;  
1   100 Pardo  
2   102 Branco 
3   104 Branco 
4   105 Amarelo</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">alturas</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 Ã— 3
  DataRegistro    ID Altura
  &lt;date&gt;       &lt;dbl&gt;  &lt;dbl&gt;
1 2022-01-10     102   1.58
2 2022-01-10     105   1.72
3 2022-06-12     105   1.74
4 2022-08-24     105   1.75</code></pre>
</div>
</div>
<section id="necessidade-inicial" class="level2">
<h2 class="anchored" data-anchor-id="necessidade-inicial">Necessidade inicial</h2>
<p>Vamos supor que, no inÃ­cio, vocÃª precisava manter um indicador de â€œnÃºmero de usuÃ¡rios por cor de peleâ€ em um relatÃ³rio. Para isso, vocÃª simplesmente contava o nÃºmero de linhas na tabela <code>cores_de_pele</code> agrupado pelos valores da coluna <code>Cor</code>. Como demonstrado abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb5-2">usuarios_por_cor <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cores_de_pele <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(Cor) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">N_usuarios =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>())</span>
<span id="cb5-5"></span>
<span id="cb5-6">usuarios_por_cor</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 Ã— 2
  Cor     N_usuarios
  &lt;chr&gt;        &lt;int&gt;
1 Amarelo          1
2 Branco           2
3 Pardo            1</code></pre>
</div>
</div>
</section>
<section id="uma-nova-necessidade" class="level2">
<h2 class="anchored" data-anchor-id="uma-nova-necessidade">Uma nova necessidade</h2>
<p>PorÃ©m, uma nova necessidade surge no time. Agora, vocÃª precisa calcular tambÃ©m a â€œaltura mÃ©dia por cor de peleâ€. VocÃª sabe que as alturas dos usuÃ¡rios estÃ£o armazenadas na tabela <code>alturas</code>, contudo, vocÃª precisa trazer essas alturas para dentro da tabela <code>cores_de_pele</code>, para que vocÃª possa de fato calcular a altura mÃ©dia para cada cor de pele.</p>
<p>Portanto, vocÃª precisa realizar um JOIN entre essas tabelas, e Ã© isso que estamos fazendo no cÃ³digo abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">dados <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cores_de_pele <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(alturas, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ID"</span>)</span></code></pre></div>
</div>
<p>Agora, temos uma nova tabela chamada <code>dados</code> que contÃ©m todos os dados que precisamos para calcular ambos os indicadores (â€œnÃºmero de usuÃ¡riosâ€ e â€œaltura mÃ©diaâ€) para cada cor de pele. Entretanto, quando calculamos esses indicadores com essa tabela <code>dados</code>, perceba que o nÃºmero de usuÃ¡rios (indicador <code>N_usuarios</code>) de cor â€œAmareloâ€ sofreu um <strong>aumento repentino</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">indicadores <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dados <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(Cor) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb8-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">N_usuarios =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>(),</span>
<span id="cb8-5">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Altura_media =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(Altura, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb8-6">    )</span>
<span id="cb8-7"></span>
<span id="cb8-8">indicadores</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 Ã— 3
  Cor     N_usuarios Altura_media
  &lt;chr&gt;        &lt;int&gt;        &lt;dbl&gt;
1 Amarelo          3         1.74
2 Branco           2         1.58
3 Pardo            1       NaN   </code></pre>
</div>
</div>
<p>Repare que nÃ³s nÃ£o mudamos a fÃ³rmula de cÃ¡lculo do indicador <code>N_usuarios</code>. NÃ³s aplicamos a mesma funÃ§Ã£o <code>n()</code> que utilizamos anteriormente. NÃ³s tambÃ©m agrupamos a tabela <code>dados</code> pela coluna <code>Cor</code> com <code>group_by()</code>, da mesma forma que fizemos anteriormente. Porque esse aumento ocorreu?</p>
<p>NÃ³s nÃ£o mudamos nada na fÃ³rmula de cÃ¡lculo do indicador <code>N_usuarios</code>. PorÃ©m, nÃ³s introduzimos um novo item na cadeia de transformaÃ§Ãµes da tabela. Mais especificamente, um LEFT JOIN realizado pela funÃ§Ã£o <code>left_join()</code>. Ou seja, <strong>o JOIN Ã© o que mudou nesse cÃ³digo</strong>, e ele Ã© o culpado por esse estranho e repentino aumento no nÃºmero de usuÃ¡rios de cor â€œAmareloâ€.</p>
</section>
<section id="o-que-aconteceu" class="level2">
<h2 class="anchored" data-anchor-id="o-que-aconteceu">O que aconteceu?</h2>
<p>Se olharmos bem para a tabela resultado do JOIN (tabela <code>dados</code>) podemos comeÃ§ar a compreender o que aconteceu. Perceba que temos 6 linhas nessa tabela, isto Ã©, temos 2 linhas a mais que a tabela <code>cores_de_pele</code> (que possui 4 linhas). Perceba tambÃ©m que temos 3 linhas nessa tabela descrevendo o mesmo usuÃ¡rio de ID 105. Ou seja, temos <strong>dados duplicados</strong> para esse usuÃ¡rio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">dados</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 Ã— 4
     ID Cor     DataRegistro Altura
  &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;        &lt;dbl&gt;
1   100 Pardo   NA            NA   
2   102 Branco  2022-01-10     1.58
3   104 Branco  NA            NA   
4   105 Amarelo 2022-01-10     1.72
5   105 Amarelo 2022-06-12     1.74
6   105 Amarelo 2022-08-24     1.75</code></pre>
</div>
</div>
<p>O usuÃ¡rio de ID 105 Ã© o Ãºnico usuÃ¡rio de cor â€œAmareloâ€ na tabela. Portanto, essas 3 linhas referentes ao ID 105 sÃ£o a causa da mudanÃ§a repentina no indicador <code>N_usuarios</code> para a cor â€œAmareloâ€. PorÃ©m, como podemos ver abaixo, a tabela <code>cores_de_pele</code> tem 1 Ãºnica linha para o usuÃ¡rio de ID 105. Como essa Ãºnica linha se transformou em trÃªs?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">cores_de_pele</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 Ã— 2
     ID Cor    
  &lt;dbl&gt; &lt;chr&gt;  
1   100 Pardo  
2   102 Branco 
3   104 Branco 
4   105 Amarelo</code></pre>
</div>
</div>
</section>
<section id="entenda-o-processo-de-pareamento-de-um-join" class="level2">
<h2 class="anchored" data-anchor-id="entenda-o-processo-de-pareamento-de-um-join">Entenda o processo de pareamento de um JOIN</h2>
<p>A Ãºnica linha de ID 105 na tabela <code>cores_de_pele</code> se transformou em 3 linhas devido ao processo de pareamento dos dados realizado pelo JOIN. Todo JOIN, independe do tipo que ele seja (<em>left, inner, right, full</em>), vai sempre realizar um processo de pareamento entre os dados das duas tabelas, utilizando as colunas que representam as â€œchavesâ€ do JOIN <span class="citation" data-cites="pedro2022">(Faria 2022)</span>.</p>
<p>Podemos visualizar esse processo de pareamento dos dados em Figure&nbsp;1. Perceba que, tanto no exemplo dessa imagem, quanto no exemplo desse post, as chaves do JOIN sÃ£o representadas pela coluna <code>ID</code>. Logo, o JOIN vai puxar os dados de uma tabela para a outra, utilizando os valores dessa coluna como guia.</p>
<div id="fig-pareamento" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-01-10-join-duplicates/pareamento1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Processo de pareamento realizado em um JOIN</figcaption>
</figure>
</div>
<p>No exemplo de Figure&nbsp;1, ambas as tabelas que estÃ£o sendo unidas possuem uma linha para cada <code>ID</code>. Ou seja, nÃ£o existe IDs duplicados em nenhuma das duas tabelas, formando assim, uma relaÃ§Ã£o de â€œum para umâ€ entre as chaves do JOIN.</p>
<p>Contudo, no exemplo deste post, a tabela <code>alturas</code> possui trÃªs linhas diferentes para o mesmo ID 105, enquanto a tabela <code>cores_de_pele</code> nÃ£o apresenta IDs duplicados. Isso acaba formando uma relaÃ§Ã£o de â€œum para muitosâ€ entre as chaves do JOIN. Nesse caso, como o processo de pareamento do JOIN deve se comportar? Bem, o seguinte vai acontecerâ€¦</p>
<ol type="1">
<li><p>O JOIN vai pegar o ID 105 da tabela <code>cores_de_pele</code> e pesquisar por ele ao longo da tabela <code>alturas</code>. Como resultado, o JOIN vai localizar trÃªs linhas distintas para o ID 105 na tabela <code>alturas</code>.</p></li>
<li><p>O JOIN percebe que hÃ¡ um desequilÃ­brio (1 linha de <code>cores_de_pele</code> <img src="https://latex.codecogs.com/png.latex?%5Ctimes"> 3 linhas de <code>alturas</code>).</p></li>
<li><p>Para reequilibrar essa balanÃ§a, o JOIN vai executar um produto cartesiano entre as linhas dessas duas tabelas.</p></li>
</ol>
<p>A Figure&nbsp;2 apresenta de forma visual essa conexÃ£o:</p>
<div id="fig-desenho-expansao" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-01-10-join-duplicates/expansao.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Uma representaÃ§Ã£o visual do efeito expansivo sobre o ID 105</figcaption>
</figure>
</div>
<p>Ou seja, o JOIN vai retornar como resultado, <strong>todas as combinaÃ§Ãµes possÃ­veis</strong> entre a linha Ãºnica de <code>cores_de_pele</code> e as 3 linhas de <code>alturas</code>. Ou seja, a linha Ãºnica de <code>cores_de_pele</code> Ã© combinada com cada uma das 3 linhas de <code>alturas</code>. Como resultado, temos as 3 linhas de ID 105 na tabela <code>dados</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">dados</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 Ã— 4
     ID Cor     DataRegistro Altura
  &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;        &lt;dbl&gt;
1   100 Pardo   NA            NA   
2   102 Branco  2022-01-10     1.58
3   104 Branco  NA            NA   
4   105 Amarelo 2022-01-10     1.72
5   105 Amarelo 2022-06-12     1.74
6   105 Amarelo 2022-08-24     1.75</code></pre>
</div>
</div>
</section>
</section>
<section id="conclusÃ£o" class="level1">
<h1>ConclusÃ£o</h1>
<p>Portanto, o produto cartesiano executado pelo JOIN gerou linhas duplicadas para o ID 105, e essa introduÃ§Ã£o de dados duplicados acabou distorcendo o valor dos indicadores. <strong>O efeito expansivo estÃ¡ no produto cartesiano gerado pelo JOIN</strong>, e vocÃª deve ficar atento em todas as situaÃ§Ãµes em que esse produto pode ocorrer.</p>
<p>Mas entÃ£oâ€¦ em que momentos especificamente esse produto cartesiano Ã© gerado? A resposta Ã©: sempre que existir uma relaÃ§Ã£o de â€œum para muitosâ€ ou de â€œmuitos para muitosâ€ entre as chaves do JOIN. As â€œchavesâ€ (ou <em>keys</em>) de todo JOIN podem formar trÃªs tipos de relaÃ§Ã£o: 1) um para um; 2) um para muitos; e 3) muitos para muitos <span class="citation" data-cites="pedro2022">(Faria 2022)</span>. Em Figure&nbsp;3 apresentamos de forma visual essas relaÃ§Ãµes, e os produtos cartesianos que elas geram, onde a coluna <code>key</code> representa a â€œchaveâ€ do JOIN.</p>
<div id="fig-relacoes" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2023/2023-01-10-join-duplicates/relacoes_keys.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Resumo das relaÃ§Ãµes possÃ­veis entre <em>keys</em> e seus respectivos produtos cartesianos</figcaption>
</figure>
</div>
<p>Perceba que, para o caso de relaÃ§Ã£o um para um, o nÃºmero de linhas na tabela resultado permanece inalterado. PorÃ©m, as relaÃ§Ãµes que realmente nos interessam nesse post sÃ£o as relaÃ§Ãµes de â€œum para muitosâ€ e de â€œmuitos para muitosâ€. Perceba que um produto cartesiano ocorre nesses dois tipos de relaÃ§Ã£o, e, como resultado, algum nÃ­vel de â€œduplicaÃ§Ã£oâ€ de informaÃ§Ãµes Ã© gerado na tabela resultado do JOIN.</p>
<p>Ã‰ atravÃ©s dessa â€œduplicaÃ§Ã£oâ€ que pode ocorrer o que estamos chamando de â€œefeito expansivoâ€ dos JOINs nesse post. Perceba em Figure&nbsp;3 que o â€œefeito expansivoâ€ e, consequentemente, a distorÃ§Ã£o sobre os seus indicadores pode ser ainda maior no caso de relaÃ§Ãµes â€œmuitos para muitosâ€. Pois o produto cartesiano gerado por esse tipo de relaÃ§Ã£o resulta em um nÃºmero maior de linhas duplicadas.</p>
<p>Ã‰ provÃ¡vel que as â€œchavesâ€ do seu JOIN apresentem ao menos alguns valores (ou IDs especÃ­ficos) que possuem uma relaÃ§Ã£o de â€œum para umâ€. Logo, esses valores especÃ­ficos nÃ£o vÃ£o causar esse efeito expansivo em seu JOIN. O ID 102 da tabela <code>cores_de_pele</code> Ã© um exemplo de ID que tambÃ©m estÃ¡ presente na tabela <code>alturas</code>, e que ocupa uma Ãºnica linha dessa tabela. Logo, esse ID especÃ­fico forma uma relaÃ§Ã£o de â€œum para umâ€ entre as tabelas <code>cores_de_pele</code> e <code>alturas</code>.</p>
<p>Por outro lado, Ã© bastante provÃ¡vel que as â€œchavesâ€ do seu JOIN tambÃ©m possuem alguns valores (ou IDs especÃ­ficos) que apresentem relaÃ§Ãµes do tipo â€œum para muitosâ€ ou â€œmuitos para muitosâ€. Portanto, um produto cartesiano vai ocorrer para cada um desses valores que apresentam essas relaÃ§Ãµes. Isto Ã©, se por exemplo, tivessemos 30 IDs na tabela <code>x</code> que formassem uma relaÃ§Ã£o de â€œum para muitosâ€ com IDs na tabela <code>y</code>, um JOIN entre as tabelas <code>x</code> e <code>y</code>, geraria como resultado 30 produtos cartesianos diferentes. Por causa disso, o efeito expansivo sobre a sua tabela pode ser considerÃ¡vel se vocÃª tiver um nÃºmero grande de valores que possuem esses tipos de relaÃ§Ãµes.</p>
<p>Por Ãºltimo, vale destacar uma Ãºltima vez, que estes produtos cartesianos independem do tipo de JOIN (<em>inner, left, right, full</em>) que vocÃª estÃ¡ executando, mas dependem diretamente dos seus dados e da relaÃ§Ã£o que eles formam entre as chaves do JOIN.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-pedro2022" class="csl-entry">
Faria, Pedro Duarte. 2022. <em>IntroduÃ§Ã£o Ã  Linguagem r: Seus Fundamentos e Sua PrÃ¡tica</em>. 4th ed. Belo Horizonte.
</div>
</div></section></div> ]]></description>
  <category>JOINs</category>
  <guid>https://pedro-faria.netlify.app/posts/2023/2023-01-10-join-duplicates/pt/index.html</guid>
  <pubDate>Tue, 10 Jan 2023 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2023/2023-01-10-join-duplicates/expansao.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>Novidades da 4Â° ediÃ§Ã£o de IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2022/2022-12-26-4th-edition-rbook/pt/index.html</link>
  <description><![CDATA[ 




<section id="introduÃ§Ã£o" class="level1">
<h1>IntroduÃ§Ã£o</h1>
<p>Ã‰ com muito prazer que venho compartilhar com vocÃª as novidades que estou trazendo para essa nova ediÃ§Ã£o do livro <a href="https://pedro-faria.netlify.app/publications/book/introducao_linguagem_r/pt/">IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</a>. Esta quarta ediÃ§Ã£o busca principalmente fazer algumas correÃ§Ãµes e adiÃ§Ãµes que buscam manter o livro como um <strong>referÃªncia moderna, introdutÃ³ria e tÃ©cnica</strong> sobre a linguagem R.</p>
<p><a href="https://www.amazon.com.br/dp/B0BNW4K232"> <button type="button" class="btn btn-primary">Compre uma versÃ£o do livro</button></a> <a href="https://pedro-faria.netlify.app/publications/book/introducao_linguagem_r/pt/"> <button type="button" class="btn btn-primary">PÃ¡gina de publicaÃ§Ã£o</button></a> <a href="https://pedropark99.github.io/Introducao_R/"> <button type="button" class="btn btn-primary">Leia online</button></a></p>
</section>
<section id="o-que-temos-de-novo" class="level1">
<h1>O que temos de novo?</h1>
<p>Primeiro, a seÃ§Ã£o do capÃ­tulo 4 que citava o pacote <code>SAScii</code> foi removida. Pois durante o desenvolvimento desta quarta ediÃ§Ã£o, foi identificado que este pacote nÃ£o estava funcionando corretamente em versÃµes mais recentes do R.</p>
<p>Segundo, uma nova seÃ§Ã£o foi adicionada ao capÃ­tulo 5, para introduzir o novo operador <em>pipe</em> do R (<code>|&gt;</code>) - que estÃ¡ disponÃ­vel desde a versÃ£o 4.1 da linguagem, alÃ©m de explicar as diferenÃ§as deste novo operador com o operador <em>pipe</em> do pacote <code>magrittr.</code></p>
<p>Terceiro, vÃ¡rias melhorias e pequenas correÃ§Ãµes foram aplicadas sobre o capÃ­tulo 8, com o objetivo de melhorar a clareza do conhecimento exposto e da organizaÃ§Ã£o do capÃ­tulo.</p>
<p>Quarto, a seÃ§Ã£o <a href="https://pedropark99.github.io/Introducao_R/configurando-componentes-est%C3%A9ticos-do-gr%C3%A1fico-no-ggplot2.html#alterando-as-fontes-do-seu-gr%C3%A1fico">Alterando as fontes do seu grÃ¡fico</a> no capÃ­tulo 9 foi reformulada, com o objetivo de substituir o pacote <code>extrafont</code> (o qual era a soluÃ§Ã£o descrita em ediÃ§Ãµes passadas desta obra) pelo pacote <code>ragg</code>, o qual se tornou uma soluÃ§Ã£o mais moderna e robusta para o uso de fontes em grÃ¡ficos do R.</p>
<p>Quinto, tivemos algumas melhorias sobre o capÃ­tulo 4, especialmente sobre a descriÃ§Ã£o de endereÃ§os absolutos e relativos, assim como a seÃ§Ã£o <a href="https://pedropark99.github.io/Introducao_R/importando-e-exportando-dados-com-readr-readxl-e-haven.html?q=guess#sec:readr_guess_encoding">A funÃ§Ã£o <code>guess_encoding()</code> como um possÃ­vel guia</a> que foi atualizada com o objetivo de acompanhar as mudanÃ§as recentes sobre a funÃ§Ã£o <code>readr::guess_encoding()</code>.</p>
</section>
<section id="sobre-onde-encontrar-o-livro" class="level1">
<h1>Sobre onde encontrar o livro</h1>
<p>VocÃª pode ler toda a obra de maneira gratuita e aberta atravÃ©s de seu <a href="https://pedropark99.github.io/Introducao_R/">website</a> ğŸ“–. Caso vocÃª queira contribuir para o projeto desse livro, vocÃª pode adquirir uma <a href="https://www.amazon.com.br/dp/B0BNW4K232">versÃ£o fÃ­sica ou em EBook do livro atravÃ©s da loja da Amazon</a>. Ao comprar essas versÃµes, vocÃª estarÃ¡ me ajudando a continuar contribuindo com a nossa comunidade â¤ï¸. AlÃ©m disso, vocÃª tambÃ©m pode doar um Pix para o autor (veja a pÃ¡gina <a href="https://pedro-faria.netlify.app/donate.html">Donate or Sponsor Me</a>).</p>
</section>
<section id="contribua-para-a-obra-ou-faÃ§a-sugestÃµes" class="level1">
<h1>Contribua para a obra ou faÃ§a sugestÃµes!</h1>
<p>Caso seja de seu interesse, vocÃª pode contribuir diretamente para a obra, ao postar <em>pull requests</em> dentro de seu <a href="https://github.com/pedropark99/Introducao_R">repositÃ³rio oficial</a>. Para mais, vocÃª tambÃ©m pode fazer sugestÃµes ou comentÃ¡rios, ao postar <em>issues</em> neste mesmo repositÃ³rio.</p>


</section>

 ]]></description>
  <category>Book</category>
  <category>R Language</category>
  <guid>https://pedro-faria.netlify.app/posts/2022/2022-12-26-4th-edition-rbook/pt/index.html</guid>
  <pubDate>Mon, 26 Dec 2022 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2022/2022-12-26-4th-edition-rbook/featured.png" medium="image" type="image/png" height="206" width="144"/>
</item>
<item>
  <title>Introducing the {spark_map} Python package</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2022/2022-12-21-spark-map-v0.2.3/en/index.html</link>
  <description><![CDATA[ 




<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p><code>spark_map</code> is a python package that offers some tools that help you to apply a function over multiple columns of Apache Spark DataFrames, using <code>pyspark</code>. The package offers two main functions (or â€œtwo main methodsâ€) to distribute your calculations, which are <code>spark_map()</code> and <code>spark_across()</code>. Furthermore, the package offers several methods to map (or select) the columns to which you want to apply your calculations (these methods are called <em>mapping methods</em> in the package).</p>
<p><a href="https://github.com/pedropark99/spark_map"> <button type="button" class="btn btn-primary">Official repository</button></a> <a href="https://pedropark99.github.io/spark_map"> <button type="button" class="btn btn-primary">Package website</button></a> <a href="https://pypi.org/project/spark-map/"> <button type="button" class="btn btn-primary">Page on PyPI</button></a></p>
</section>
<section id="how-to-install-it" class="level2">
<h2 class="anchored" data-anchor-id="how-to-install-it">How to install it ?</h2>
<p>You can install the package through PyPI, by using the <code>pip</code> tool on your terminal, like this:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install spark-map</span></code></pre></div>
</section>
<section id="what-problem-spark_map-solves" class="level2">
<h2 class="anchored" data-anchor-id="what-problem-spark_map-solves">What problem <code>spark_map</code> solves?</h2>
<p>I work a lot with data pipelines using Apache Spark and <code>pyspark</code> at <a href="https://www.take.net/">Take Blip</a>. Some day, I got myself writing a very long <code>agg()</code> statement to aggregate multiple columns of my Spark DataFrame with the same function, like this one below:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> pyspark.sql.functions <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>, column</span>
<span id="cb2-2">aggregates <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (</span>
<span id="cb2-3">    spark.table(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards.detailed_sales_per_user'</span>)</span>
<span id="cb2-4">        .groupBy(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'day'</span>)</span>
<span id="cb2-5">        .agg(</span>
<span id="cb2-6">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(column(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_lite'</span>)).alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_lite'</span>),</span>
<span id="cb2-7">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(column(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_silver'</span>)).alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_silver'</span>),</span>
<span id="cb2-8">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(column(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_gold'</span>)).alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_gold'</span>),</span>
<span id="cb2-9">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(column(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_premium'</span>)).alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_premium'</span>),</span>
<span id="cb2-10">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(column(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_enterprise'</span>)).alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_enterprise'</span>),</span>
<span id="cb2-11">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(column(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_business'</span>)).alias(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards_business'</span>)</span>
<span id="cb2-12">        )</span>
<span id="cb2-13">)</span></code></pre></div>
</div>
<p>Looking at this code, I had the following thought: â€œthis is not elegant, and is error-prone, because it involves copy and paste, and very subtle changes in each lineâ€. Following the golden rule of DRY (<em>do not repeat yourself</em>), I had to find a better way to write this code.</p>
<p>I just wanted to apply the <code>sum()</code> function over multiple columns of <code>cards.detailed_sales_per_user</code> grouped by <code>day</code>. Because of that, I decided to develop the <code>spark_map</code> package, which allows you to declare this operation in a much better, elegant and concise way, by using the <code>spark_map()</code> function.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> spark_map.functions <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> spark_map</span>
<span id="cb3-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> spark_map.mapping <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> starts_with</span>
<span id="cb3-3">grouped_by_day <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> spark.table(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards.detailed_sales_per_user'</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-4">    .groupBy(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'day'</span>)</span>
<span id="cb3-5"></span>
<span id="cb3-6">aggregates <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> spark_map(grouped_by_day, starts_with(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'cards'</span>), <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>)</span></code></pre></div>
</div>
</section>
<section id="how-spark_map-works" class="level2">
<h2 class="anchored" data-anchor-id="how-spark_map-works">How <code>spark_map()</code> works ?</h2>
<p>The <code>spark_map()</code> function receives three inputs, which are <code>table</code> (i.e.&nbsp;the Spark DataFrame you want to use), <code>mapping</code> (i.e.&nbsp;a â€œmappingâ€ that describes which columns you want to apply your function), and <code>function</code> (i.e.&nbsp;the function you want to apply to each column in the Spark DataFrame).</p>
<p>In short, the <code>starts_with('cards')</code> section tells <code>spark_map()</code> that you want to apply the input function on all columns of <code>grouped_by_day</code> whose name starts with the text <code>'cards'</code>. In other words, all <code>spark_map()</code> does is to apply the function you want (in the above example this function is <code>sum()</code>) to whatever column it finds in the input DataFrame which fits in the description of your mapping method.</p>
<p>You can use different mapping methods to select the columns of your DataFrame, and the package offers several built-in methods which can be very useful for you, which are available through the <code>spark_map.mapping</code> module of the package. You can select columns based on:</p>
<ul>
<li><code>at_position()</code>: their position (i.e.&nbsp;3rd, 4th and 5th columns);</li>
<li><code>matches()</code>: a regex to which their match;</li>
<li><code>are_of_type()</code>: the type of data their store (i.e.&nbsp;all columns of type <code>int</code>);</li>
<li><code>starts_with()</code> and <code>ends_with()</code>: its name starting or ending with a particular pattern;</li>
<li><code>all_of()</code>: its name being inside a specific list of options;</li>
</ul>
</section>
<section id="the-differences-between-spark_map-and-spark_across" class="level2">
<h2 class="anchored" data-anchor-id="the-differences-between-spark_map-and-spark_across">The differences between <code>spark_map()</code> and <code>spark_across()</code></h2>
<p>There are two main functions in the package that performs the heavy work, which are <code>spark_map()</code> and <code>spark_across()</code>.</p>
<p>Both of these functions perform the same work, which is to apply a function over a set of columns of a Spark DataFrame. But they differ in the method they use to apply this function. While <code>spark_map()</code> uses the <code>agg()</code> method of Spark DataFrameâ€™s to apply the function, <code>spark_across()</code> uses the <code>withColumn()</code> method to do so.</p>
<p>This means that you will mainly use <code>spark_map()</code> when you want to calculate <strong>aggregates</strong>. Is worthy pointing out that <code>spark_map()</code> works perfectly with grouped DataFrames as well (i.e.&nbsp;<code>GroupedData</code>). In the other hand, you will use <code>spark_across()</code> when you want to just transform the values of multiple colums at once by applying the same function over them.</p>
</section>
<section id="check-the-documentation-for-more-examples-and-details" class="level1">
<h1>Check the documentation for more examples and details</h1>
<p>The <a href="https://pedropark99.github.io/spark_map/">website</a> have documentation for all functions of the package. If you have any trouble to understand or to find examples, is a good idea to check the <a href="https://pedropark99.github.io/spark_map/reference-en.html">Function Reference</a> of the package, to see examples and more details about how each function works.</p>
<p>To understand how the mapping methods works, and how you can create your own mapping method, a good place to start is to read the article <a href="https://pedropark99.github.io/spark_map/english/articles/building-mapping.html">Building the mapping</a> available at the website of the package.</p>


</section>

 ]]></description>
  <category>Python</category>
  <category>Package</category>
  <category>pyspark</category>
  <category>Apache Spark</category>
  <guid>https://pedro-faria.netlify.app/posts/2022/2022-12-21-spark-map-v0.2.3/en/index.html</guid>
  <pubDate>Wed, 21 Dec 2022 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2022/2022-12-21-spark-map-v0.2.3/spark-map-logo.png" medium="image" type="image/png" height="76" width="144"/>
</item>
<item>
  <title>Erro de memÃ³ria no Power BI Online? Hora de repensar o seu dashboard</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2022/2022-12-14-power-bi-memory-error/pt/index.html</link>
  <description><![CDATA[ 




<section id="introduÃ§Ã£o" class="level1">
<h1>IntroduÃ§Ã£o</h1>
<p>Em um dia recente, eu descobri que um dos dashboards que estavam publicados em nosso ambiente de produÃ§Ã£o do Power BI Online havia sofrido um erro de atualizaÃ§Ã£o. Logo, eu prontamente parei o que estava fazendo e comecei a investigar o motivo do erro, atÃ© porque: 1) o nosso cliente depende dos dados desse dashboard ; e 2) erros em produÃ§Ã£o nÃ£o sÃ£o legais!</p>
<p>Nesse post, eu quero mostrar como esse tipo de erro de atualizaÃ§Ã£o pode ser um forte sinal de que vocÃª precisa repensar o design de seu dashboard. Em outras palavras, meu objetivo Ã© mostrar que se vocÃª estÃ¡ puxando milhÃµes e milhÃµes de linhas de dados para um dashboardâ€¦ Ã© provÃ¡vel que vocÃª <strong>nÃ£o tenha entendido o que Ã© um dashboard e qual o seu propÃ³sito.</strong></p>
</section>
<section id="contexto" class="level1">
<h1>Contexto</h1>
<p>Bem, vocÃª jÃ¡ sabe que tudo comeÃ§ou por um erro durante a atualizaÃ§Ã£o de um dashboard publicado no Power BI Online. PorÃ©m, este nÃ£o era qualquer erro, e sim, um erro de falta de memÃ³ria:</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2022/2022-12-14-power-bi-memory-error/image.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Mensagem de erro da atualizaÃ§Ã£o no Power BI Online</figcaption>
</figure>
</div>
</div>
</div>
<p>Perceba pela mensagem acima, que o motivo do erro foi uma falta de memÃ³ria (<em>insufficient memory</em>) nos clusters responsÃ¡veis por executar a atualizaÃ§Ã£o. O que isso significa? Significa que este dashboard estava pedindo por um volume tÃ£o grande, mas tÃ£o grande de dados durante a atualizaÃ§Ã£o, que os clusters que estavam executando essa atualizaÃ§Ã£o nÃ£o tinham mais espaÃ§o para alocar esse volume tÃ£o grande de dados.</p>
<section id="hora-de-explorar-o-terreno-desconhecido" class="level2">
<h2 class="anchored" data-anchor-id="hora-de-explorar-o-terreno-desconhecido">Hora de explorar o terreno desconhecido</h2>
<p>Nesse dia, eu estava em minha primeira semana em uma nova equipe, e, eu nÃ£o conhecia esse dashboard. Em outras palavras, eu havia herdado esse dashboard, que foi criado pelos analistas anteriores dessa equipe. Logo, eu precisava abrir o <code>.pbix</code> desse dashboard e comeÃ§ar a investigar, tentando descobrir que mistÃ©rios e perigos estÃ£o escondidos dentro dele.</p>
<p>Inicialmente, percebi oito tabelas associadas ao dashboard que foram puxadas diretamente dos nossos databases SQL (<code>campanhas</code>, <code>cartoes_selecionados</code>, <code>usuarios_por_dia</code>, <code>formatos</code>, <code>inputs</code>, <code>usuarios_por_mes</code>, <code>perfis</code> e <code>tracks</code>), as quais estÃ£o expostas na imagem abaixo<sup>1</sup>. AlÃ©m delas, temos outras duas tabelas calculadas no prÃ³prio <code>.pbix</code>, atravÃ©s de DAX (<code>dCalendario</code> e <code>Medidas</code>).</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://pedro-faria.netlify.app/posts/2022/2022-12-14-power-bi-memory-error/tabelas.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Tabelas associadas ao arquivo <code>.pbix</code></figcaption>
</figure>
</div>
</div>
</div>
<p>Decidi simplesmente clicar no botÃ£o de <code>Atualizar</code>. JÃ¡ que o erro ocorreu durante a atualizaÃ§Ã£o, imaginei que seria mais simples descobrir a fonte do problema dessa forma.</p>
<p>A maioria das tabelas atualizaram rapidamente. PorÃ©m, a tabela <code>input</code> ainda estava atualizando. Em resumo, essa tabela continha todas as mensagens digitadas por todos os usuÃ¡rios que acessaram o nosso sistema.</p>
<p>O tempo foi passando, e apÃ³s 3 horas com a atualizaÃ§Ã£o rodando em meu computador, o Power BI jÃ¡ havia puxado mais de 80 milhÃµes de linhas para essa Ãºnica tabela. Decidi verificar se o recurso de <a href="https://learn.microsoft.com/pt-br/power-bi/connect-data/incremental-refresh-overview">AtualizaÃ§Ã£o incremental</a> estava ligado para essa tabela <code>input</code>, e, percebi que ele estava desligado.</p>
</section>
<section id="a-fonte-do-problema" class="level2">
<h2 class="anchored" data-anchor-id="a-fonte-do-problema">A fonte do problema</h2>
<p>Portanto, a fonte do problema estava claro. Como o recurso de â€œAtualizaÃ§Ã£o incrementalâ€ estava desligado para essa tabela <code>input</code>, a cada atualizaÃ§Ã£o, o Power BI Online estava recalculando toda a tabela <code>input</code> de uma vez sÃ³.</p>
<p>Isso significa que, todos os dias, o Power BI estava coletando todas as <strong>80 milhÃµes de linhas</strong> dessa tabela <code>input</code>. Devido a este volume monumental de dados, o serviÃ§o do Power BI decidiu interromper a atualizaÃ§Ã£o.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://pedro-faria.netlify.app/posts/2022/2022-12-14-power-bi-memory-error/conversa.png" class="img-fluid" style="width:80.0%"></p>
</div>
</div>
</section>
</section>
<section id="a-soluÃ§Ã£o-simples-e-suja-o-famoso-quick-and-dirty" class="level1">
<h1>A soluÃ§Ã£o simples e suja (o famoso <em>quick and dirty</em>)</h1>
<p>Um jeito simples de resolver esse erro de falta de memÃ³ria, seria simplesmente nÃ£o carregar todas as 80 milhÃµes de linhas de uma vez sÃ³! E sim, carregar essas linhas aos poucos.</p>
<p>Para isso, poderÃ­amos ligar a atualizaÃ§Ã£o incremental nessa tabela <code>input</code>. Desse modo, cada atualizaÃ§Ã£o vai atualizar apenas os dados dos Ãºltimos dias (ao invÃ©s de atualizar a tabela inteira), e em seguida, comeÃ§amos a carregar os dados aos poucos para o dashboard.</p>
<p>Por exemplo, na primeira atualizaÃ§Ã£o, tentamos puxar os dados do primeiro mÃªs, depois, na prÃ³xima atualizaÃ§Ã£o, puxamos os dados do segundo mÃªs, e assim por diante, atÃ© puxarmos todas as 80 mihÃµes de linhas. Contudo, isso nÃ£o Ã© uma soluÃ§Ã£o de fato!</p>
</section>
<section id="antes-de-tudo-pare-um-pouco-e-pense" class="level1">
<h1>Antes de tudo, pare um pouco e pense</h1>
<p>Primeiro de tudo, pare! E penseâ€¦ tente entender o porquÃª vocÃª estÃ¡ puxando milhÃµes e milhÃµes de linhas. VocÃª realmente precisa desse volume tÃ£o grande de dados em seu dashboard? Ã‰ muito provÃ¡vel que nÃ£o!</p>
<blockquote class="blockquote">
<p><strong>Insight 1:</strong> Se vocÃª estÃ¡ puxando milhÃµes e milhÃµes de linhas de dados para um dashboard, Ã© provÃ¡vel que vocÃª nÃ£o tenha entendido o que Ã© um dashboard e qual o seu propÃ³sito.</p>
</blockquote>
<section id="manutenÃ§Ã£o-se-torna-um-peso-grande" class="level2">
<h2 class="anchored" data-anchor-id="manutenÃ§Ã£o-se-torna-um-peso-grande">ManutenÃ§Ã£o se torna um peso grande</h2>
<p>Atualizar 80 milhÃµes de linhas <strong>nÃ£o Ã© prÃ¡tico, nÃ£o Ã© rÃ¡pido, e Ã© difÃ­cil de manter e testar</strong>. Se por algum motivo, vocÃª precisar atualizar todos os dados de seu dashboard<sup>2</sup>, vocÃª vai muito provavelmente perder uma tarde, talvez um dia inteiro de trabalho sÃ³ para completar a atualizaÃ§Ã£o.</p>
<blockquote class="blockquote">
<p><strong>Insight 2:</strong> Um dashboard deve ser fÃ¡cil de se manter e expandir. Em contrapartida, manter um volume grande de dados em um dashboard Ã© trabalhoso demais.</p>
</blockquote>
</section>
<section id="vamos-pensar-um-pouco-sobre-user-experience" class="level2">
<h2 class="anchored" data-anchor-id="vamos-pensar-um-pouco-sobre-user-experience">Vamos pensar um pouco sobre <em>user experience</em></h2>
<p>Por um momento, vamos adotar o papel de um UX, e refletir sobre a experiÃªncia dos usuÃ¡rios que consomem o nosso dashboard. Ã‰ esquisito pensar dessa forma, entretanto, Ã s vezes, nÃ³s nos esquecemos que pessoas de verdade usam o nosso produto (nesse caso, o dashboard) e se baseiam nele diariamente para desempenhar trabalhos e planejamentos importantes. Portanto, Ã© muito importante que eles tenham uma experiÃªncia agradÃ¡vel utilizando o nosso dashboard.</p>
<ul>
<li><strong>Definindo o pÃºblico-alvo:</strong> Primeiro, quem utiliza o nosso dashboard?</li>
</ul>
<p>Na maioria das vezes, quem estÃ¡ consumindo os nossos dashboards sÃ£o <strong>gerentes de alguma Ã¡rea</strong>. Gente importante, que tem pouco tempo no dia, e que lidam com vÃ¡rias tarefas e responsabilidades ao mesmo tempo.</p>
<p>Ã‰ justamente por essa escassez de tempo e atenÃ§Ã£o que, em geral, gerentes gostam muito de dashboards. Eles gostam de entrar num dashboard, e rapidamente visualizar todos os indicadores que eles precisam acompanhar. Com isso, eles nÃ£o precisam gastar horas e horas caÃ§ando nÃºmeros em diferentes lugares, e com diferentes pessoas. EstÃ¡ tudo concentrado em um lugar Ãºnico e de fÃ¡cil acesso.</p>
<p>Por isso, um dashboard tem que ser <strong>rÃ¡pido</strong>. Todo gerente tem pressa, entÃ£o, a pÃ¡gina inicial do dashboard precisa carregar rÃ¡pido! Navegar pelas diferentes pÃ¡ginas e visÃµes do dashboard tambÃ©m precisa ser uma experiÃªncia rÃ¡pida e flÃºida. NinguÃ©m gosta de uma pÃ¡gina que demora 5 minutos para carregarâ€¦ muito menos um gerente.</p>
<p>Ã‰ por esse mesmo motivo, que cada pÃ¡gina de um dashboard precisa ser focada em um tema central, e manter o mÃ­nimo possÃ­vel de informaÃ§Ã£o que o gerente precisa, da forma mais clara possÃ­vel. Se uma mesma pÃ¡gina mistura diferentes temas, o leitor pode ter dificuldade em navegar pelos indicadores e encontrar o que ele estÃ¡ procurando (ou seja, misturar temas = confusÃ£o mental!).</p>
<blockquote class="blockquote">
<p>Ah! Achei a pÃ¡gina com os indicadores de vendas. Ok. Espera! Por que os indicadores de atendimento estÃ£o nessa pÃ¡gina? Onde estÃ¡ o nÃºmero de vendas de maquininhas nesse mÃªs? Ahhh achei! NÃ£o, esperaâ€¦ Esse Ã© o nÃºmero de maquininhas vendidas somente no setor de atendimento, mas eu quero os nÃºmeros de venda em TODOS os setoresâ€¦</p>
</blockquote>
<p>Portanto, dashboards precisam ser rÃ¡pidos, claros e bem dividos! E se vocÃª estÃ¡ puxando um volume muito grande de dados para dentro dele, vocÃª com certeza vai impactar negativamente a rapidez desse dashboard, pois ele precisa carregar o grande conjunto de dados que vocÃª inseriu lÃ¡ dentro. AlÃ©m disso, um grande volume de dados pode indicar que vocÃª estÃ¡ preenchendo esse dashboard com informaÃ§Ãµes que sÃ£o irrelevante para o gerente.</p>
<blockquote class="blockquote">
<p><strong>Insight 3:</strong> Dashboards precisam ser rÃ¡pidos, claros e bem dividos!</p>
</blockquote>
</section>
<section id="gerentes-querem-indicadores-e-agregados-nÃ£o-dados-brutos" class="level2">
<h2 class="anchored" data-anchor-id="gerentes-querem-indicadores-e-agregados-nÃ£o-dados-brutos">Gerentes querem indicadores e agregados! NÃ£o dados brutosâ€¦</h2>
<p>Gerentes querem acompanhar indicadores e agregados que descrevam de maneira rÃ¡pida a situaÃ§Ã£o atual do negÃ³cio que eles gerem, e das pessoas que estÃ£o envolvidas nele.</p>
<p>Logo, por que trazer dados brutos para o dashboard? Por que trazer para o dashboard uma tabela com a lista completa de todos os usuÃ¡rios que visitaram o nosso serviÃ§o em todos os dias do ano? Se eu posso simplesmente trazer uma tabela jÃ¡ agregada, com o nÃºmero de usuÃ¡rios que visitaram esse serviÃ§o dentro de cada dia do ano?</p>
<blockquote class="blockquote">
<p><strong>Insight 4:</strong> Gerentes estÃ£o interessados em acompanhar indicadores e agregados, ao invÃ©s de dados brutos. Portanto, importe os seus dados jÃ¡ agregados para dentro do dashboard.</p>
</blockquote>
</section>
<section id="isso-significa-que-dados-brutos-geralmente-nÃ£o-devem-estar-em-um-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="isso-significa-que-dados-brutos-geralmente-nÃ£o-devem-estar-em-um-dashboard">Isso significa que dados brutos geralmente nÃ£o devem estar em um dashboard</h2>
<p>Isso tudo nÃ£o significa que gerentes nÃ£o consomem dados brutos em momento algum. Mas isso significa que um dashboard Ã© geralmente o lugar errado para esses dados brutos.</p>
<p>Ã‰ atÃ© comum em certos momentos um gerente pedir para nÃ³s coletarmos um conjunto especÃ­fico de dados brutos para ele. Mas se vocÃª refletir sobre todas as ocasiÃµes onde isso ocorreu, vocÃª talvez consiga perceber que essas situaÃ§Ãµes caem em duas categorias:</p>
<ol type="1">
<li><p>o gerente queria investigar um problema bem especÃ­fico, e Ã© bem provÃ¡vel que esse problema nÃ£o se repita, logo, ele nunca mais vai precisar desses dados brutos especÃ­ficos novamente (i.e.&nbsp;foi uma entrega pontual);</p></li>
<li><p>o gerente precisa desses dados brutos com certa frequÃªncia para alimentar algum fluxo de trabalho que vocÃª nÃ£o conhece, ou estÃ¡ em uma equipe/setor diferente do seu;</p></li>
</ol>
<p>Essas duas categorias nÃ£o justificam incluir dados brutos em um dashboard. Para a primeira situaÃ§Ã£o, vocÃª pode armazenar a query (ou o script) que vocÃª usou no momento para puxar os dados brutos que o gerente te pediu naquele momento. Desse modo, se lÃ¡ na frente, por algum motivo vocÃª precisar extrair novamente esses dados brutos, vocÃª precisa apenas retornar Ã  query e executÃ¡-la novamente. AlÃ©m disso, Ã© muito mais econÃ´mico armazenar centenas de queries distintas, do que armazenar os dados brutos produzidos em cada uma dessas queries (imagine ter centenas de CSVâ€™s de vÃ¡rios MBâ€™s armazenados no seu computadorâ€¦).</p>
<p>Em minha equipe de trabalho, nÃ³s utilizamos um board de cards no estilo kanban (como o Asana, ou o Azure DevOps, etc.) para organizar as nossas tarefas e demandas. Eu particularmente gosto de sempre salvar a query que eu utilizei para completar uma demanda, dentro do card correspondente a essa demanda. Sendo assim, caso eu precisar utilizar essa mesma query, eu procuro rapidamente pelo card dessa demanda no histÃ³rico do nosso board de cards, e, copio a query que estÃ¡ salva lÃ¡ dentro desse card.</p>
<p>JÃ¡ na segunda situaÃ§Ã£o, faz mais sentido criar rotinas automatizadas de envio desses dados para o gerente, ou para qualquer que seja a pessoa que esteja precisando desses dados. Ou seja, se por exemplo, o Paulo precisa extrair toda semana, uma lista com todos os usuÃ¡rios que sÃ£o elegÃ­veis a adquirir um emprÃ©stimo, eu posso, por exemplo, criar uma rotina automatizada em Python ou em R, que pega os dados brutos do nosso database SQL, filtra todos esses usuÃ¡rios elegÃ­veis, e compila esses dados em um formato agradÃ¡vel e intuitivo, e por fim, envia esses dados para o Paulo, seja por email, ou talvez, para um servidor ou uma pasta na nuvem que o Paulo tem acesso.</p>
</section>
<section id="dashboards-sÃ£o-ferramentas-de-uso-diÃ¡rio" class="level2">
<h2 class="anchored" data-anchor-id="dashboards-sÃ£o-ferramentas-de-uso-diÃ¡rio">Dashboards sÃ£o ferramentas de uso diÃ¡rio</h2>
<p>O gerente depende desse dashboard todos os dias (ou talvez toda semana) para extrair informaÃ§Ãµes importantes sobre o seu negÃ³cio. Portanto, dashboards possuem uma frequÃªncia de uso alta, e por essa caracterÃ­stica, Ã© essencial que um dashboard <strong>seja estÃ¡vel</strong> e que esteja sempre o mais atualizado possÃ­vel.</p>
<p>Contudo, ao puxar milhÃµes e milhÃµes de linhas de dados para um dashboard, todos os dias, vocÃª estÃ¡ aumentando as chances desse dashboard enfrentar um erro de atualizaÃ§Ã£o. Isso nÃ£o Ã© algo estÃ¡vel!</p>
<p>VocÃª nÃ£o quer erros acontecendo no seu dashboard, pois vocÃª nÃ£o quer perder uma tarde inteira de trabalho investigando onde nas milhÃµes e milhÃµes de linhas que vocÃª puxou estÃ¡ a fonte do erro. VocÃª tambÃ©m nÃ£o quer perder horas e horas atualizando essas milhÃµes de linhas. Isso estÃ¡ bastante relacionado tambÃ©m com o insight 2, onde definimos que um dashboard deve ser fÃ¡cil de se manter e expandir.</p>
<blockquote class="blockquote">
<p><strong>Insight 5:</strong> Dashboards precisam ser estÃ¡veis! Quanto menos erros ele gerar, melhor para vocÃª (que vai gastar menos tempo de debugging e manutenÃ§Ã£o) e tambÃ©m para o gerente que utiliza esse dash.</p>
</blockquote>
<p>VocÃª quer um dashboard simples, leve, claro, e que funcione da forma como vocÃª esperava que ele funcionasse. Na empresa onde trabalho, temos um lema: â€œA simplicidade Ã© o mais alto nÃ­vel de sofisticaÃ§Ã£oâ€. Portanto, leve essa simplicidade para os seus dashboards. NÃ£o tente fazer coisas complexas e confusas, que sÃ£o difÃ­ceis de se entender e de investigar (ou â€œdesbugarâ€).</p>
</section>
<section id="as-vezes-nÃ£o-existe-maneira-simples-de-contornar-o-problema" class="level2">
<h2 class="anchored" data-anchor-id="as-vezes-nÃ£o-existe-maneira-simples-de-contornar-o-problema">As vezes nÃ£o existe maneira simples de contornar o problema</h2>
<p>Em certas ocasiÃµes, os usuÃ¡rios de um dashboard realmente precisam ver algum tipo de dado bruto dentro dele. Nesses casos, vocÃª traÃ§ar algumas outras estratÃ©gias e perguntas para reduzir ao mÃ¡ximo o nÃºmero de linhas importadas. Por exemplo:</p>
<ol type="1">
<li>eu posso trazer para dentro dashboard uma parte bastante filtrada dos dados brutos?</li>
</ol>
<p>Ou seja, ao invÃ©s de trazer as 80 milhÃµes de linhas, serÃ¡ que eu consigo aplicar vÃ¡rios filtros sobre esses dados brutos, antes de importÃ¡-los para dentro do dashboard? Esses filtros podem te ajudar a reduzir drasticamente o nÃºmero de linhas carregadas.</p>
<ol start="2" type="1">
<li>ao invÃ©s de trazer todos os dados, por que nÃ£o trazer uma amostra aleatÃ³ria da populaÃ§Ã£o?</li>
</ol>
<p>Ã‰ Ãºtil entender o porquÃª exatamente o seu usuÃ¡rio precisa ver algum dado bruto em seu dashboard. Ao entender o que esse usuÃ¡rio estÃ¡ perseguindo, vocÃª talvez chegue a conclusÃ£o de que o seu usuÃ¡rio jÃ¡ ficaria satisfeito ao ver pelo menos uma parte dos dados brutos (nÃ£o precisa trazer literalmente tudo). Portanto, vocÃª poderia selecionar uma amostra aleatÃ³ria dos dados, e importar apenas essa amostra para dentro do dashboard.</p>
<ol start="3" type="1">
<li>serÃ¡ que eu preciso manter o histÃ³rico desses dados brutos dentro do dash?</li>
</ol>
<p>SerÃ¡ que o seu cliente precisa frequentemente visualizar os dados brutos de 6 meses atrÃ¡s? Ã‰ muito provÃ¡vel que nÃ£o. EntÃ£o, por que nÃ£o manter apenas os dados brutos dos Ãºltimos 30 dias? Em outras palavras, os dados histÃ³ricos sÃ£o sempre limpos, e apenas os dados brutos mais recentes sÃ£o mantidos.</p>
<p>Ao reduzir o volume de dados mantidos dentro do dashboard, vocÃª talvez traga uma melhoria considerÃ¡vel sobre o tempo de navegaÃ§Ã£o e carregamento do dashboard (lembre-se, um dashboard preciso ser rÃ¡pido, claro e bem divido).</p>
</section>
</section>
<section id="conclusÃ£o" class="level1">
<h1>ConclusÃ£o</h1>
<p>Espero que neste artigo, tenha consiguido deixar claro como um nÃºmero exacerbado de dados brutos em seu dashboard pode ser um forte sinal de que vocÃª tenha desenvolvido um dashboard mal desenhado. Apenas para recapitular, os principais pontos abordados foram:</p>
<ol type="1">
<li><p>Se vocÃª estÃ¡ puxando milhÃµes e milhÃµes de linhas de dados para um dashboard, Ã© provÃ¡vel que vocÃª nÃ£o tenha entendido o que Ã© um dashboard e qual o seu propÃ³sito.</p></li>
<li><p>Um dashboard deve ser fÃ¡cil de se manter e expandir. Em contrapartida, manter um volume grande de dados em um dashboard Ã© trabalhoso demais.</p></li>
<li><p>Dashboards precisam ser rÃ¡pidos, claros e bem dividos!</p></li>
<li><p>Gerentes estÃ£o interessados em acompanhar indicadores e agregados, ao invÃ©s de dados brutos. Portanto, importe os seus dados jÃ¡ agregados para dentro do dashboard.</p></li>
<li><p>Dashboards precisam ser estÃ¡veis! Quanto menos erros ele gerar, melhor para vocÃª (que vai gastar menos tempo de debugging e manutenÃ§Ã£o) e tambÃ©m para o gerente que utiliza esse dash.</p></li>
</ol>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Vale destacar que essas tabelas foram renomeadas com o objetivo de manter o anonimato do cliente e dos dados associados a elas.â†©ï¸</p></li>
<li id="fn2"><p>Como exemplo, talvez a fonte dos dados sofreu uma atualizaÃ§Ã£o, e vocÃª quer trazer essa atualizaÃ§Ã£o para o seu dashboard, ou entÃ£o, porque houve uma perda de dados no Power BI Online e vocÃª deseja recuperar esses dados perdidos.â†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>Power BI</category>
  <category>Power BI Online</category>
  <guid>https://pedro-faria.netlify.app/posts/2022/2022-12-14-power-bi-memory-error/pt/index.html</guid>
  <pubDate>Wed, 14 Dec 2022 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2022/2022-12-14-power-bi-memory-error/featured.png" medium="image" type="image/png" height="52" width="144"/>
</item>
<item>
  <title>IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/publications/book/introducao_linguagem_R/pt/index.html</link>
  <description><![CDATA[ 




<section id="sobre-o-livro" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Sobre o livro</h1>
<p> <button type="button" class="btn btn-primary">Compre uma versÃ£o do livro</button> <a href="https://pedropark99.github.io/Introducao_R/"> <button type="button" class="btn btn-primary">Leia online</button></a> <a href="./../exec_complete.pdf"> <button type="button" class="btn btn-primary">ExercÃ­cios de cada capÃ­tulo</button></a> <a href="./../respostas_complete.pdf"> <button type="button" class="btn btn-primary">Respostas dos exercÃ­cios</button></a></p>
<p>Este livro oferece uma descriÃ§Ã£o profunda sobre os fundamentos da linguagem R, e como eles se aplicam no contexto da anÃ¡lise de dados. Sua principal contribuiÃ§Ã£o para a literatura brasileira hoje, estÃ¡ no combate de dois problemas recorrentes nos materiais disponÃ­veis em portuguÃªs sobre a linguagem: 1) a falta de profundidade de muitos materiais, que tentam abordar muitos assuntos em um espaÃ§o muito curto; 2) a alta especializaÃ§Ã£o de muitos materiais, que sÃ£o de difÃ­cil transposiÃ§Ã£o para aplicaÃ§Ãµes gerais em anÃ¡lises de dados.</p>
</section>
<section id="o-que-vocÃª-aprende" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> O que vocÃª aprende ?</h1>
<p>AtravÃ©s deste livro, vocÃª pode aprender sobre os fundamentos da linguagem R, e como eles se aplicam a Ã¡rea de anÃ¡lise de dados. Em mais detalhes:</p>
<ul>
<li><p><strong>Introduzindo a linguagem</strong>: aprenda sobre como definir e como trabalhar com objetos; conheÃ§a as estruturas e tipos de dados oferecidos pela linguagem; entenda como os processos de coerÃ§Ã£o e os valores especiais da linguagem podem afetar os seus resultados.</p></li>
<li><p><strong>ImportaÃ§Ã£o e transformaÃ§Ã£o</strong>: aprenda a importar, transformar e formatar suas tabelas atravÃ©s dos pacotes <code>readr</code>, <code>readxl</code>, <code>haven</code>, <code>dplyr</code> e <code>tidyr</code>. Aplicando operaÃ§Ãµes de ordenaÃ§Ã£o, filtro, seleÃ§Ã£o e expansÃ£o, alÃ©m de operaÃ§Ãµes de pivÃ´ e <em>join</em>â€™s.</p></li>
<li><p><strong>VisualizaÃ§Ã£o de dados</strong>: aprenda a utilizar o pacote <code>ggplot2</code> para produzir grÃ¡ficos elegantes e efetivos para apresentar os seus dados e as suas conclusÃµes.</p></li>
<li><p><strong>Programando a sua anÃ¡lise</strong>: aprenda a utilizar controles de fluxo, funÃ§Ãµes e <em>loops</em> para automatizar tarefas e solucionar os seus problemas de maneira simples e clara.</p></li>
<li><p><strong><em>Functional programming</em></strong>: aprenda a utilizar o pacote <code>purrr</code> para distribuir rapidamente os seus cÃ¡lculos ao longo de mÃºltiplos <em>inputs</em>.</p></li>
<li><p><strong><em>Debugging</em></strong> e <strong><em>environments</em></strong>: conheÃ§a as principais tÃ©cnicas de <em>debugging</em> existentes na linguagem R, e, aprenda como investigar erros em suas funÃ§Ãµes. AlÃ©m disso, entenda como a linguagem procura pelos seus objetos e, como vocÃª pode produzir resultados inesperados durante essa busca.</p></li>
</ul>
</section>
<section id="sec-versoes" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Compre uma versÃ£o do livro</h1>
<p>Hoje, o livro estÃ¡ disponÃ­vel para compra em duas versÃµes: como ebook (Kindle), e como livro fÃ­sico (Amazon, Estante Virtual e Clube dos Autores). Abaixo temos os links para todas essas versÃµes.</p>
<ul>
<li>VersÃ£o ebook (<strong>Amazon</strong>): <a href="https://www.amazon.com.br/dp/B0BNW4K232" class="uri">https://www.amazon.com.br/dp/B0BNW4K232</a></li>
<li>VersÃ£o fÃ­sica (<strong>Amazon</strong>): <a href="https://www.amazon.com.br/dp/6500578724" class="uri">https://www.amazon.com.br/dp/6500578724</a></li>
<li>VersÃ£o fÃ­sica (<strong>Estante Virtual</strong>): <a href="https://www.estantevirtual.com.br/clube-de-autores/pedro-duarte-faria-introducao-a-linguagem-r-3850927716" class="uri">https://www.estantevirtual.com.br/clube-de-autores/pedro-duarte-faria-introducao-a-linguagem-r-3850927716</a></li>
<li>VersÃ£o fÃ­sica (<strong>Clube dos Autores</strong>): <a href="https://clubedeautores.com.br/livro/introducao-a-linguagem-r" class="uri">https://clubedeautores.com.br/livro/introducao-a-linguagem-r</a></li>
</ul>
<p>Caso vocÃª nÃ£o possa comprar uma versÃ£o do livro, vocÃª ainda pode ler gratuitamente a obra completa atravÃ©s de seu <a href="https://pedropark99.github.io/Introducao_R/">website</a>.</p>
</section>
<section id="formas-de-contribuir-para-o-livro" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Formas de contribuir para o livro</h1>
<p>Caso vocÃª queira contribuir monetariamente para o livro e para o autor, mas, nÃ£o queira/possa pagar o preÃ§o total da obra, vocÃª ainda pode mandar um <a href="https://pedro-faria.netlify.app/donate.html">PIX como uma doaÃ§Ã£o</a>.</p>
<p>AlÃ©m disso, vocÃª tambÃ©m pode contribuir com conteÃºdo (imagens, capÃ­tulos, artes, etc.) diretamente para a obra, ao postar <em>pull requests</em> ou <em>issues</em> no <a href="https://github.com/pedropark99/Introducao_R">repositÃ³rio oficial do livro</a> no GitHub.</p>
</section>
<section id="citando-o-livro" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Citando o livro</h1>
<p>Arquivo BibTex:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>@book{pedro2022,
  title = {IntroduÃ§Ã£o Ã  Linguagem R},
  subtitle = {seus fundamentos e sua prÃ¡tica},
  author = {Pedro Duarte Faria},
  year = {2022},
  edition = {4},
  address = {Belo Horizonte},
  month = {Dezembro},
  isbn = {978-65-00-57872-0},
  note = {https://pedro-faria.netlify.app/pt/publication/book/introducao_linguagem_r/}
}</code></pre>
</div>
</div>
</section>
<section id="capa-do-livro" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Capa do livro</h1>
<p><img src="https://pedro-faria.netlify.app/publications/book/introducao_linguagem_R/featured.png" class="img-fluid" style="width:100.0%"></p>


</section>

 ]]></description>
  <category>R Language</category>
  <category>Book</category>
  <category>Brazil</category>
  <guid>https://pedro-faria.netlify.app/publications/book/introducao_linguagem_R/pt/index.html</guid>
  <pubDate>Thu, 01 Dec 2022 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/publications/book/introducao_linguagem_R/featured.png" medium="image" type="image/png" height="203" width="144"/>
</item>
<item>
  <title>Introducing the {figma} R package</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2022/2022-11-06-figma-pkgv0.1.0/en/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Iâ€™m very happy to announce the realease of <code>figma</code> R package to CRAN! This package provides a R interface (or a web client/wrapper) to the <a href="https://www.figma.com/developers/api">Figma API</a>. Below we have all the important links about this package:</p>
<p><a href="https://github.com/pedropark99/figma"> <button type="button" class="btn btn-primary">Official repository</button></a> <a href="https://pedropark99.github.io/figma/"> <button type="button" class="btn btn-primary">Package website</button></a> <a href="https://cran.r-project.org/package=figma"> <button type="button" class="btn btn-primary">Page on CRAN</button></a></p>
<p>This is the first release (or the first version) of the package, and for now, it have all the necessary functionality to get all data from a Figma file, and bring it to your R session. But in the future, the package will include more functionalities and endpoints. Please, if you can, test this package and give feedbacks or report bugs by <a href="https://github.com/pedropark99/figma/issues">sending Issues on the official repository</a>.</p>
</section>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<p>Fist of all, you need to install the package on your machine, and to do that, you can use this code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figma"</span>)</span></code></pre></div>
</div>
<p>Or, to install the development version directly from GitHub:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">devtools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pedropark99/figma"</span>)</span></code></pre></div>
</div>
<p>Now, to get the data of a Figma file through the Figma API, you have to collect two key variables about your file and your credentials. They are:</p>
<ul>
<li><code>file_key</code>: The ID (or the â€œkeyâ€) that identifies your Figma file;</li>
<li><code>token</code>: Your personal access token from the Figma platform;</li>
</ul>
<p>To use specifically the <code>figma::get_figma_page()</code> function, you will need to collect a third information, which is the <code>node_id</code>, or the ID that identifies a canvas/page of your Figma file. I explain, in details, on how to collect these key variables on the <a href="https://pedropark99.github.io/figma/articles/figma.html">main vignette package</a>. For brevity reasons, lets assume in this blog post that you already have collected these variables.</p>
</section>
<section id="use-get_figma_file-to-get-your-figma-file" class="level2">
<h2 class="anchored" data-anchor-id="use-get_figma_file-to-get-your-figma-file">Use <code>get_figma_file()</code> to get your Figma file</h2>
<p>Now that you have the key (or ID) that identifies your Figma file, and your personal token that identifies yourself, you can use <code>figma::get_figma_file()</code> to get your Figma file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(figma)</span>
<span id="cb3-2">file_key <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hch8YlkIrYbU3raDzjPvCz"</span></span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Insert your personal token:</span></span>
<span id="cb3-4">token <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your personal token ..."</span></span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Returns a `httr::response` object:</span></span>
<span id="cb3-7">figma_file <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> figma<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_figma_file</span>(</span>
<span id="cb3-8">  file_key, token</span>
<span id="cb3-9">)</span></code></pre></div>
</div>
<p>The functions from <code>figma</code> package returns a <code>httr::response</code> object by default. But you can use the <code>.output_format</code> argument to fit the data into a more intuitive data strucuture. For example, a <code>tibble::tibble</code> object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Returns a `tibble::tibble` object:</span></span>
<span id="cb4-2">figma_file <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> figma<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_figma_file</span>(</span>
<span id="cb4-3">  file_key, token,</span>
<span id="cb4-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.output_format =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tibble"</span></span>
<span id="cb4-5">)</span>
<span id="cb4-6"></span>
<span id="cb4-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(figma_file)</span></code></pre></div>
</div>
<pre><code>#&gt; # A tibble: 5 Ã— 7
#&gt;   canvas_id canvas_name canvas_type object_id object_name   objecâ€¦Â¹ object_attâ€¦Â²
#&gt;   &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;   &lt;list&gt;      
#&gt; 1 0:1       Page 1      CANVAS      1:2       Background    RECTANâ€¦ &lt;named list&gt;
#&gt; 2 0:1       Page 1      CANVAS      5:2       Paragraph     TEXT    &lt;named list&gt;
#&gt; 3 0:1       Page 1      CANVAS      5:3       Arrow         VECTOR  &lt;named list&gt;
#&gt; 4 5:4       Page 2      CANVAS      5:5       BackgroundPaâ€¦ RECTANâ€¦ &lt;named list&gt;
#&gt; 5 5:4       Page 2      CANVAS      5:6       Texto da pÃ¡gâ€¦ TEXT    &lt;named list&gt;
#&gt; # â€¦ with abbreviated variable names Â¹â€‹object_type, Â²â€‹object_attributes</code></pre>
<p>Each row in the above <code>data.frame</code> is an object drawn in a canvas/page in your Figma file. Every object that you drawn in the canvas of your Figma file, can have a different type (like RECTANGLE, CIRCLE, TEXT, etc.). And objects of different types usually have different attributes.</p>
<p>For example, TEXT objects have a <code>characters</code> attribute, which have the exact text that is written in the text box. In the other hand, RECTANGLE objects does not have such attribute.</p>
<p>All the attributes of each object are in the <code>â€‹object_attributes</code> column, which is a <code>&lt;list&gt;</code> column. Each row (or, if you prefer, each element) in this column is a list with all the attributes of the object described in the corresponding row. For example, to collect the <code>characters</code> attribute of the first TEXT object described in <code>figma_file</code> (which is in the 2nd row), you could do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">figma_file<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>object_attributes[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]][[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"characters"</span>]]</span></code></pre></div>
</div>
<pre><code>[1] "Um texto qualquer, que nÃ£o sei se vai dar certo"</code></pre>
<p>Or, you could the functions from <code>dplyr</code> and <code>purrr</code> packages to extract the <code>characters</code> attribute from all TEXT objects of your Figma file, like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">text_objects <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> figma_file <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-2">  dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(object_type <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'TEXT'</span>) </span>
<span id="cb8-3"></span>
<span id="cb8-4">text_objects[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'object_attributes'</span>]] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb8-5">  purrr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_chr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'characters'</span>)</span></code></pre></div>
</div>
<pre><code>[1] "Um texto qualquer, que nÃ£o sei se vai dar certo" "Texto da pÃ¡gina 2"</code></pre>
</section>
<section id="other-scopes-of-data" class="level1">
<h1>Other scopes of data</h1>
<p>The <code>figma::get_figma_file()</code> get the data of all objects drawn in all canvas/pages of a Figma file. But, maybe, you donâ€™t need all data from your file. Maybe you just need the data from a section, or a specific part of your Figma file.</p>
<p>For these occasions, the <code>figma</code> package offers the <code>figma::get_figma_page()</code> (get data of objects drawn in a specific canvas/page of your file) and <code>figma::get_document_info()</code> (get metadata about your Figma file) functions.</p>
<p>These functions work basically the same way as <code>figma::get_figma_file()</code>, they have the same arguments (except <code>figma::get_figma_page()</code> which have a extra argument <code>node_id</code>). Check the <a href="https://pedropark99.github.io/figma/reference/index.html">documentation of these functions</a>, and the <a href="https://pedropark99.github.io/figma/articles/figma.html">main vignette of the package</a> to see examples.</p>


</section>

 ]]></description>
  <category>R Language</category>
  <category>Package</category>
  <category>Figma</category>
  <category>API</category>
  <guid>https://pedro-faria.netlify.app/posts/2022/2022-11-06-figma-pkgv0.1.0/en/index.html</guid>
  <pubDate>Sun, 06 Nov 2022 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2022/2022-11-06-figma-pkgv0.1.0/featured.png" medium="image" type="image/png" height="79" width="144"/>
</item>
<item>
  <title>Novidades da 3Â° ediÃ§Ã£o de IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2022/2022-04-06-3nd-edition-rbook/pt/index.html</link>
  <description><![CDATA[ 




<section id="introduÃ§Ã£o" class="level1">
<h1>IntroduÃ§Ã£o</h1>
<p>Ã‰ com muito prazer que venho compartilhar com vocÃª as novidades que estou trazendo para essa nova ediÃ§Ã£o do livro <a href="https://pedro-faria.netlify.app/pt/publication/book/introducao_linguagem_r/">IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</a>. O lanÃ§amento desta nova ediÃ§Ã£o deve ocorrer ainda no meio de Abril de 2022 ğŸ“†, portanto, fique atento ğŸ˜‰.</p>
</section>
<section id="o-que-temos-de-novo" class="level1">
<h1>O que temos de novo?</h1>
<p>Temos seis novos capÃ­tulos ğŸ¤¯, os quais compÃµe uma nova parte do livro e, trazem consigo, grandes avanÃ§os sobre o processo de desenvolvimento de programas no R. AlÃ©m disso, vÃ¡rias melhorias foram feitas em seÃ§Ãµes especÃ­ficas do livro, especialmente sobre o capÃ­tulo 2.</p>
<p>Primeiro, houve uma reorganizaÃ§Ã£o significativa do livro. Os capÃ­tulos prÃ©-existentes foram reorganizados em quatro partes diferentes. JÃ¡ a quinta e nova parte (FunÃ§Ãµes e <em>Loops</em>: construindo os seus prÃ³prios programas e automatizando tarefas) Ã© composta pelos seis novos capÃ­tulos introduzidos nesta ediÃ§Ã£o.</p>
<p>Segundo, o capÃ­tulo de FunÃ§Ãµes e <em>Loops</em> foi completamente reescrito, expandido, e, repartido em dois novos capÃ­tulos ğŸ¥³ğŸ‰ğŸ‰ğŸ‰. Mais especificamente, os capÃ­tulos 14 (FunÃ§Ãµes) e 15 (<em>Loops</em>) desta ediÃ§Ã£o.</p>
<p>Terceiro, o capÃ­tulo 16 desta ediÃ§Ã£o traz uma das novidades programadas desde a segunda ediÃ§Ã£o: um novo (e robusto) capÃ­tulo sobre <em>functional programming</em>. Com essa adiÃ§Ã£o, esta obra se torna uma referÃªncia mais moderna e, se aproxima dos padrÃµes adotados hoje pela comunidade internacional de R ğŸ˜.</p>
<p>Quarto, <em>environments</em> e as regras de <em>scoping</em> da linguagem sÃ£o dois tÃ³picos relativamente avanÃ§ados, e que costumam causar certa confusÃ£o em muitos iniciantes. Por isso, um novo capÃ­tulo foi produzido para descrever essas funcionalidades que sustentam partes essenciais da linguagem, assim como de alguns dos pacotes que introduzimos ao longo do livro (e.g.&nbsp;<code>dplyr</code> e <code>ggplot2</code>).</p>
<p>Quinto, vÃ¡rias adiÃ§Ãµes e melhorias foram feitas no capÃ­tulo 6 (IntroduÃ§Ã£o a base de dados relacionais com <code>dplyr</code>) e, principalmente, no capÃ­tulo 2 (Fundamentos da Linguagem R). Dentre elas, temos: um novo estudo de caso (Importando os dados da PINTEC)Í¾ novas seÃ§Ãµes sobre as funÃ§Ãµes <code>str()</code> e <code>is.*()</code>Í¾ melhorias significativas sobre as seÃ§Ãµes de CoerÃ§Ã£o no R e Valores especiais do R.</p>
<p>Sexto, foi introduzido um novo capÃ­tulo que descreve os controles condicionais de fluxo (<code>if else</code> <em>statements</em> e <code>switch()</code>) que a linguagem R oferece.</p>
<p>SÃ©timo, um novo e pequeno capÃ­tulo foi adicionado Ã  segunda parte do livro, com o objetivo de introduzir o universo do <code>tidyverse</code> ao leitor de maneira mais clara e amigÃ¡vel ğŸ¥°.</p>
<p>Oitavo, o apÃªndice contendo as respostas dos exercÃ­cios foi retirado, com o objetivo de reduzir o nÃºmero de pÃ¡ginas do livro. Consequentemente, as respostas dos exercÃ­cios estÃ£o sendo disponibilizadas em um PDF separado, o qual pode ser baixado gratuitamente, a partir da pÃ¡gina de <a href="https://pedro-faria.netlify.app/pt/publication/book/introducao_linguagem_r/">publicaÃ§Ã£o do livro</a>.</p>
</section>
<section id="sobre-onde-encontrar-o-livro" class="level1">
<h1>Sobre onde encontrar o livro</h1>
<p>Assim como ocorreu nas ediÃ§Ãµes anteriores, vocÃª poderÃ¡ ler toda a obra de maneira gratuita e aberta atravÃ©s de seu <a href="https://pedropark99.github.io/Introducao_R/">website</a> ğŸ“–.</p>
<p>Contudo, diferente das ediÃ§Ãµes anteriores, a versÃ£o em PDF da obra nÃ£o serÃ¡ aberta. VocÃª poderÃ¡ adquirir uma versÃ£o em PDF ou fÃ­sica do livro atravÃ©s da loja da Amazon. Ao comprar essas versÃµes, vocÃª estarÃ¡ me ajudando a continuar contribuindo com a nossa comunidade â¤ï¸.</p>
</section>
<section id="contribua-para-a-obra-ou-faÃ§a-sugestÃµes" class="level1">
<h1>Contribua para a obra ou faÃ§a sugestÃµes!</h1>
<p>Caso seja de seu interesse, vocÃª pode contribuir diretamente para a obra, ao postar <em>pull requests</em> dentro de seu <a href="https://github.com/pedropark99/Introducao_R">repositÃ³rio oficial</a>. Para mais, vocÃª tambÃ©m pode fazer sugestÃµes ou comentÃ¡rios, ao postar <em>issues</em> neste mesmo repositÃ³rio.</p>


</section>

 ]]></description>
  <category>Book</category>
  <category>R Language</category>
  <guid>https://pedro-faria.netlify.app/posts/2022/2022-04-06-3nd-edition-rbook/pt/index.html</guid>
  <pubDate>Wed, 06 Apr 2022 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2022/2022-04-06-3nd-edition-rbook/featured.png" medium="image" type="image/png" height="206" width="144"/>
</item>
<item>
  <title>Novidades da 2Â° ediÃ§Ã£o de IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2021/2021-05-26-2nd-edition-rbook/pt/index.html</link>
  <description><![CDATA[ 




<div class="cell">
<style type="text/css">
.hljs{
  font-family: 'Inconsolata', monospace;
  font-size: 17px;
}

.hljs.shell{
  font-size: 18px;
}

.hljs-comment{
  font-style: normal;
  color: #222222;
}
</style>
</div>
<section id="introduÃ§Ã£o" class="level1">
<h1>IntroduÃ§Ã£o</h1>
<p>A medida em que eu e meu colega <a href="https://twitter.com/joaoparga">JoÃ£o Parga</a> comeÃ§amos a ensinar sobre a Linguagem R, nÃ³s rapidamente percebemos a presenÃ§a de vÃ¡rios materiais curtos, de qualidade e Ãºteis<sup>1</sup>. Entretanto, tambÃ©m percebemos uma inquietante falta de materiais (em portuguÃªs) sobre a Linguagem R, que fossem mais tÃ©cnicos ou que buscassem descrever a linguagem em mais detalhes.</p>
<p>Por esse motivo, nÃ³s construÃ­mos o livro <a href="https://pedro-faria.netlify.app/pt/publication/book/introducao_linguagem_r/">IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</a>, que representa a nossa tentativa de preencher tal lacuna. A primeira ediÃ§Ã£o do livro foi muito bem recebida, em especial, por ser uma obra aberta e gratuita para qualquer brasileiro.</p>
<p>Tendo isso em mente, ğŸ“£ Ã© com muito prazer que anuncio oficialmente que a produÃ§Ã£o da segunda ediÃ§Ã£o do livro estÃ¡ quase pronta!!! ğŸ¥³ğŸ‰ğŸŠâœ¨, que estÃ¡ para ser lanÃ§ada agora no mÃªs de Junho. Esse <em>post</em> busca descrever as novidades que estamos entregando para essa nova ediÃ§Ã£o.</p>
</section>
<section id="resumo-das-novidades-para-a-nova-ediÃ§Ã£o" class="level1">
<h1>Resumo das novidades para a nova ediÃ§Ã£o</h1>
<p>Em resumo, hÃ¡ trÃªs novidades principais para essa nova ediÃ§Ã£o, que incluem a adiÃ§Ã£o de dois novos capÃ­tulos, alÃ©m da adiÃ§Ã£o de exercÃ­cios em cada capÃ­tulo (com respostas ao final do livro).</p>
<ul>
<li>Fatores (<code>factor</code>â€™s), <em>status</em>: capÃ­tulo finalizado âœ….</li>
<li>VariÃ¡veis de tempo (<code>date</code>, <code>POSIXct</code>, <code>POSIXlt</code>), <em>status</em>: capÃ­tulo finalizado âœ….</li>
<li>IntroduÃ§Ã£o de exercÃ­cios em cada capÃ­tulo, <em>status</em>: ainda em processo de escrita ğŸš§.</li>
</ul>
</section>
<section id="sobre-o-lanÃ§amento" class="level1">
<h1>Sobre o lanÃ§amento</h1>
<p>Se tudo ocorrer conforme planejado:</p>
<ul>
<li><p>ğŸ“£ O lanÃ§amento ocorrerÃ¡ no <strong>dia 26/06</strong> ğŸ“Œ.</p></li>
<li><p>Nesse dia, o PDF da obra serÃ¡ disponibilizada em ambas as pÃ¡ginas do <a href="https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica">ResearchGate</a> e no <a href="https://www.academia.edu/44520051/Introdu%C3%A7%C3%A3o_%C3%A0_Linguagem_R_seus_fundamentos_e_sua_pr%C3%A1tica">Academia</a>, que sÃ£o os dois locais onde o livro estÃ¡ atualmente hospedado.</p></li>
</ul>
<p>A produÃ§Ã£o dessa nova ediÃ§Ã£o se encontra avanÃ§ada, mas pode enfrentar atrasos no prÃ³ximo mÃªs, pois recentemente assumi um novo emprego em uma grande empresa de tecnologia (<a href="https://www.take.net/">Take Blip</a>) e, portanto, posso ter que atrasar a produÃ§Ã£o em detrimento de demandas urgentes. Estou ansioso e torcendo muito para que nada de errado ocorra ğŸ˜…, e que eu possa cumprir este compromisso com a nossa comunidade brasileira de R.</p>
</section>
<section id="sobre-cada-novidade" class="level1">
<h1>Sobre cada novidade:</h1>
<section id="adiÃ§Ã£o-de-exercÃ­cios-em-cada-capÃ­tulo" class="level2">
<h2 class="anchored" data-anchor-id="adiÃ§Ã£o-de-exercÃ­cios-em-cada-capÃ­tulo">AdiÃ§Ã£o de exercÃ­cios em cada capÃ­tulo</h2>
<p>Desde o inÃ­cio, o livro se propÃ´s a ser uma referÃªncia introdutÃ³ria e, principalmente, <strong>tÃ©cnica</strong>, sobre a linguagem. Isto significa que, o livro nÃ£o tenta atingir o pÃºblico que procura por algo sucinto e eficiente, mas sim, o pÃºblico iniciante que busca se aprofundar (ou ter uma base mais sÃ³lida) em conceitos, mÃ©todos e outras partes importantes da linguagem.</p>
<p>Apesar desse propÃ³sito, o livro inicialmente nÃ£o oferece exercÃ­cios, os quais sÃ£o uma caracterÃ­stica essencial de qualquer obra tÃ©cnica. Por esse motivo, a introduÃ§Ã£o de exercÃ­cios em cada capÃ­tulo dessa segunda ediÃ§Ã£o, busca ajudar o livro a caminhar para esse propÃ³sito, se tornando uma obra mais consolidada.</p>
<p>Atualmente, a construÃ§Ã£o dos exercÃ­cios para cada capÃ­tulo Ã© a Ãºnica parte (dessa nova ediÃ§Ã£o) que ainda estÃ¡ em construÃ§Ã£o. A partir do momento em que essa etapa for finalizada, a segunda ediÃ§Ã£o serÃ¡ lanÃ§ada para todo o pÃºblico brasileiro.</p>
</section>
<section id="fatores-factors" class="level2">
<h2 class="anchored" data-anchor-id="fatores-factors">Fatores (<code>factor</code>â€™s)</h2>
<p>No capÃ­tulo 2 do livro, sÃ£o abordados os quatro tipos de dados bÃ¡sicos da linguagem R. Sendo eles: <code>integer</code>; <code>double</code>; <code>character</code>; e <code>logical</code>. PorÃ©m, hÃ¡ dois outros tipos de dados, que sÃ£o â€œmais complexosâ€, e que tambÃ©m sÃ£o muito importantes hoje em dia. SÃ£o eles os fatores (ou <code>factor</code>â€™s) e os tipos voltados para variÃ¡veis de tempo (<code>date</code>, <code>POSIXct</code>, <code>POSIXlt</code>).</p>
<p>Fatores sÃ£o especialmente Ãºteis para classificarmos variÃ¡veis categÃ³ricos. Isto Ã©, definirmos a ordem de seus â€œnÃ­veisâ€ (ou â€œgruposâ€). Dito de outra forma, vÃ¡rias caracterÃ­sticas podem ser descritas atravÃ©s de uma variÃ¡vel categÃ³rica, mas nem sempre essas caracterÃ­sticas seguem uma ordenaÃ§Ã£o numÃ©rica, ou uma ordem alfabÃ©tica. Por exemplo, ao dar a sua avaliaÃ§Ã£o de um certo governo, vocÃª pode responder â€œPÃ©ssimoâ€, â€œRuimâ€, â€œBomâ€ ou â€œMuito Bomâ€. Perceba pela demonstraÃ§Ã£o abaixo, que caso eu empregue uma ordenaÃ§Ã£o alfabÃ©tica (crescente) sobre as minhas respostas, â€œBomâ€ aparece antes de â€œRuimâ€, â€œPÃ©ssimoâ€ e â€œMuito Bomâ€.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">respostas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Muito Bom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Muito Bom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ruim"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PÃ©ssimo"</span>,</span>
<span id="cb1-2">               <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ruim"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ruim"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Muito Bom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ruim"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(respostas)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Bom"       "Bom"       "Muito Bom" "Muito Bom" "Muito Bom" "PÃ©ssimo"  
 [7] "Ruim"      "Ruim"      "Ruim"      "Ruim"     </code></pre>
</div>
</div>
<p>Com o uso de fatores, nÃ³s podemos definir qual a ordem correta desses diferentes nÃ­veis e corrigir esse problema de ordenaÃ§Ã£o. Perceba abaixo que a ordenaÃ§Ã£o dos valores foi corrigida.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">respostas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(respostas)</span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">levels</span>(respostas) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PÃ©ssimo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ruim"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Muito Bom"</span>)</span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(respostas)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] PÃ©ssimo   PÃ©ssimo   Ruim      Ruim      Ruim      Bom       Muito Bom
 [8] Muito Bom Muito Bom Muito Bom
Levels: PÃ©ssimo Ruim Bom Muito Bom</code></pre>
</div>
</div>
</section>
<section id="variÃ¡veis-de-tempo" class="level2">
<h2 class="anchored" data-anchor-id="variÃ¡veis-de-tempo">VariÃ¡veis de tempo</h2>
<p>Firmas registram o horÃ¡rio em que vendas sÃ£o realizadas, o horÃ¡rio em que cargas de insumos chegam a suas instalaÃ§Ãµes, o tempo de trabalho de seus funcionÃ¡rios, alÃ©m da evoluÃ§Ã£o de vÃ¡rios de seus indicadores ao longo do tempo. Pois tempo Ã© dinheiro, e, em uma economia capitalista o dinheiro Ã© o que faz a diferenÃ§a.</p>
<p>Por essa razÃ£o, variÃ¡veis de tempo sÃ£o fundamentais em diversas anÃ¡lises de dados e, Ã© muito importante que vocÃª saiba como trabalhar com elas em qualquer linguagem de programaÃ§Ã£o que vocÃª venha a trabalhar. Por isso, essa Ã© uma lacuna atual muito importante do livro e, que estÃ¡ sendo preenchida nessa segunda ediÃ§Ã£o.</p>
<p>A linguagem R nos oferece trÃªs tipos principais de dados focados em variÃ¡veis de tempo, sendo eles: <code>Date</code>, <code>POSIXct</code>, <code>POSIXlt</code>. AlÃ©m disso, temos ainda um quarto tipo de dado chamado <code>difftime</code>, que busca dar suporte Ã s operaÃ§Ãµes aritmÃ©ticas entre os 3 tipos anteriores. Valores desses trÃªs tipos de dados, sÃ£o criados a partir das funÃ§Ãµes <code>as.POSIXct()</code>, <code>as.POSIXlt()</code> e <code>as.Date()</code>.</p>
<p>O tipo <code>Date</code> nos ajuda a armazenar datas no R. PoderÃ­amos armazenar datas como simples <em>strings</em>, mas com isso, terÃ­amos uma ordenaÃ§Ã£o incorreta dos valores, alÃ©m da falta de acesso a diversos mÃ©todos aritmÃ©ticos e computacionais voltados para esse tipo de dado. Logo, tratar as suas datas por meio do tipo <code>Date</code> pode fazer a diferenÃ§a em sua anÃ¡lise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">d <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020-08-10"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020-08-11"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020-08-12"</span>))</span>
<span id="cb5-2">d</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2020-08-10" "2020-08-11" "2020-08-12"</code></pre>
</div>
</div>
<p>JÃ¡ o tipo <code>POSIXct</code> Ã© particularmente Ãºtil para interpretar datas acompanhadas de um horÃ¡rio (isto Ã©, um dado do tipo <code>date-time</code>). Certas transaÃ§Ãµes econÃ´micas precisam ser registradas com um nÃ­vel de precisÃ£o alto. Ou seja, os registros de muitas empresas nÃ£o se contentam com datas, pois eles tambÃ©m necessitam saber o momento exato (ou o horÃ¡rio exato) dessa data em que um evento ocorre. O tipo <code>POSIXct</code> foi feito justamente para tratar e lidar com esse tipo de informaÃ§Ã£o.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">h <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXct</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020-03-21 15:52:29"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020-03-22 10:30:02"</span>))</span>
<span id="cb7-2">h</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2020-03-21 15:52:29 -03" "2020-03-22 10:30:02 -03"</code></pre>
</div>
</div>
<p>Por outro lado, o tipo <code>POSIXlt</code> pode ser especialmente Ãºtil quando desejamos extrair os componentes de uma variÃ¡vel de tempo especÃ­fica. Por exemplo, podemos estar interessados apenas no dia do mÃªs presente em cada valor, ou ainda, na hora do dia guardada em cada um desses valores. Tal ponto estÃ¡ demonstrado no exemplo abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">hl <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXlt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020-03-21 15:52:29"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020-03-22 10:30:02"</span>))</span>
<span id="cb9-2"></span>
<span id="cb9-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## O dia de cada data:</span></span>
<span id="cb9-4">hl<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mday</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21 22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## A hora do dia de cada data:</span></span>
<span id="cb11-2">hl<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>hour</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15 10</code></pre>
</div>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Como os materiais produzidos pelo <a href="https://curso-r.com/material/">Curso-R</a>, ou este <a href="https://materiais-estudo-r.netlify.app/">Ã­ndice de materiais</a> construÃ­do por Beatriz Milz.â†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>Book</category>
  <category>R Language</category>
  <guid>https://pedro-faria.netlify.app/posts/2021/2021-05-26-2nd-edition-rbook/pt/index.html</guid>
  <pubDate>Wed, 26 May 2021 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2021/2021-05-26-2nd-edition-rbook/featured.png" medium="image" type="image/png" height="204" width="144"/>
</item>
<item>
  <title>Recipient table and source table</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/en/index.html</link>
  <description><![CDATA[ 




<div class="cell">
<style type="text/css">
.hljs{
  font-family: 'Inconsolata', monospace;
  font-size: 17px;
}

.hljs.shell{
  font-size: 18px;
}

.hljs-comment{
  font-style: normal;
  color: #222222;
}
</style>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p><em>Outer joins</em> are a simple topic of understanding for most students. However, this article proposes a second approach on the subject. This approach was built during a recent reformulation of the chapter â€œIntroduÃ§Ã£o a base de dados relacionaisâ€, from the book <a href="https://pedro-faria.netlify.app/pt/publication/book/introducao_linguagem_r/">IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</a>. The point of view presented here seeks to be strict, and uses this rigidity as a mechanism that facilitates the student`s memorization of the behaviors in each type of <em>outer join</em>.</p>
</section>
<section id="joins-have-direction" class="level1">
<h1>Joins have direction</h1>
<p>A <em>join</em> operation is nothing more than a union between two tables. But, instead of an union of two tables, we have another option for interpreting the result of this operation. So that to produce a table that represents the union between two tables, we could simply extract all the columns from one of the tables, and insert them into the other table.</p>
<p>For example, suppose you have a table <code>A</code>, which contains two columns, called <code>x</code> and <code>y</code>; and a table <code>B</code>, which in turn holds 4 different columns, named <code>x</code>, <code>z</code>, <code>r</code>, and <code>t</code>. Note that one of the columns in table <code>B</code> corresponds to the same column <code>x</code> that we found in table <code>A</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tibble)</span>
<span id="cb1-2"></span>
<span id="cb1-3">A <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb1-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb1-6">)</span>
<span id="cb1-7"></span>
<span id="cb1-8">B <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb1-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">z =</span> letters[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>],</span>
<span id="cb1-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.2</span>),</span>
<span id="cb1-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">t =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tzu"</span></span>
<span id="cb1-13">)</span></code></pre></div>
</div>
<p>If you want to join tables <code>A</code> and <code>B</code>, you basically want to create a new table, which contains all five columns of these two tables (<code>x</code>, <code>y</code>, <code>z</code>, <code>r</code> and <code>t</code>). Therefore, we could imagine a <em>join</em> process, as if we were extracting all the columns from table <code>B</code>, and inserting all of these columns in table <code>A</code>. Hence, we have the table below as a result:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">full_join</span>(A, B, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 Ã— 5
      x     y z         r t    
  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;
1     1  2.14 a       3.5 tzu  
2     2  2.61 b       2.1 tzu  
3     3  2.3  c       1   tzu  
4     4  4.12 d       5.6 tzu  
5     5  1.98 e       7.2 tzu  </code></pre>
</div>
</div>
<p>With this, we are creating the idea that <strong>a <em>join</em> always has a direction</strong>. In other words, we first extract the columns from table <code>B</code>, and then we add those columns to table <code>A</code>. Note that we are always starting from table <code>B</code> towards table <code>A</code>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/direcao.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="recipient-table-and-source-table" class="level1">
<h1>Recipient table and source table</h1>
<p>From this perspective, we can interpret that, in a <em>join</em>, we are bringing all the columns of a secondary table into our main table (or our table of interest). We have the option to call these tables :<strong>source table</strong> (secondary table) and <strong>recipient table</strong> (main table). With this, a <em>join</em> always starts at <strong>source table</strong> and go towards the <strong>recipient table</strong>.</p>
<p>This perspective makes sense with the practice of <em>joins</em>. Because in any analysis, we commonly work with a â€œmainâ€ table, or a table that contains the key data weâ€™re analyzing. And when we use some <em>join</em>, weâ€™re usually bringing columns from other tables into this â€œmainâ€ table (or â€œrecipientâ€ table, according to that perspective). So keep in mind that a <em>join</em> always part from the <strong>source table</strong> toward the <strong>recipient table</strong>.</p>
</section>
<section id="types-of-outer-join" class="level1">
<h1>Types of <em>outer join</em></h1>
<p>A natural <em>join</em> (<em>inner join</em>) usually generates a loss of observations from both tables involved in the process. In contrast, a <em>join</em> of type <em>outer</em> (that is, an <em>outer join</em>), seeks to delimit which of the two tables will be preserved in the result. That is, an <em>outer join</em> seeks to keep in the <em>join</em> result, the rows of at least one of the tables involved.</p>
<p>We have three main types of <em>outer joins</em>, which are <em>left join</em>, <em>right join</em> and <em>full join</em>. A <em>full join</em> is the simplest to understand, as it seeks to keep all rows of both tables employed. Therefore, even if there is some observation not found in one of the tables, it will be preserved in the final product of the operation.</p>
<p>However, <em>left join</em> and <em>right join</em> seek to keep rows from only one of the tables used in <em>join</em>. At this point, many teachers would say something like: â€œif we want to apply a <em>join</em> between tables <code>A</code> and <code>B</code>, a <em>left join</em> will keep the rows of table <code>A</code>, and a <em>right join</em> will keep the rows of table <code>B</code>â€. Other teachers would still try to say, â€œ<em>left join</em> will keep the table rows on the left, while a <em>right join</em> will keep the table rows to the rightâ€.</p>
<p>However, some confusion can be easily applied in both alternatives. I mean, a student can easily face the following question: â€œğŸ¤” Uhmmâ€¦ I donâ€™t remember very well. Does a <em>left join</em> keep the rows in table <code>A</code>? Or are the rows in table <code>B</code>?â€; or else, â€œğŸ¤” Wait! But which of the two tables is on the right side?â€</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>With this, according to the perspective adopted in this article, we can understand that a <em>left join</em> and a <em>right join</em> seek to keep the rows of the <strong>recipient table</strong> and the <strong>source table</strong>, respectively. Thus, when using a <em>right join</em> or a <em>left join</em>, you should ask yourself the following: â€œDo I want to keep the rows in my main table (recipient table)? Or the secondary table (source table), where I am extracting the new columns from?â€ So if you want to keep, for example, the rows in your main table (recipient table), which is what occurs most of the time, you now know that you need to use a <em>left join</em>.</p>
<p>In a visual representation, we can reproduce below the initial image of this article, which marks the lines maintained by each of these two types of <em>join</em>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/featured.png" class="img-fluid"></p>
</div>
</div>


</section>

 ]]></description>
  <category>JOINs</category>
  <category>Teaching</category>
  <guid>https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/en/index.html</guid>
  <pubDate>Sat, 02 Jan 2021 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/featured.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>Tabela destinatÃ¡ria e tabela fonte</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/pt/index.html</link>
  <description><![CDATA[ 




<div class="cell">
<style type="text/css">
.hljs{
  font-family: 'Inconsolata', monospace;
  font-size: 17px;
}

.hljs.shell{
  font-size: 18px;
}

.hljs-comment{
  font-style: normal;
  color: #222222;
}
</style>
</div>
<section id="introduÃ§Ã£o" class="level1">
<h1>IntroduÃ§Ã£o</h1>
<p><em>Outer joins</em> sÃ£o um tÃ³pico de simples compreensÃ£o para a maioria dos alunos. Entretanto, esse artigo propÃµe uma segunda abordagem sobre o tema. Tal abordagem foi construÃ­da durante uma reformulaÃ§Ã£o recente do capÃ­tulo â€œIntroduÃ§Ã£o a base de dados relacionaisâ€ do livro <a href="https://pedro-faria.netlify.app/pt/publication/book/introducao_linguagem_r/">IntroduÃ§Ã£o Ã  Linguagem R: seus fundamentos e sua prÃ¡tica</a>. O ponto de vista apresentado aqui, busca ser estrito, e utiliza essa rigidez como um mecanismo que facilite a memorizaÃ§Ã£o do aluno sobre os comportamentos de cada tipo de <em>outer join</em>.</p>
</section>
<section id="joins-possuem-sentido-e-direÃ§Ã£o" class="level1">
<h1>Joins possuem sentido e direÃ§Ã£o</h1>
<p>Uma operaÃ§Ã£o de <em>join</em> Ã© nada mais do que uma uniÃ£o entre duas tabelas. Por outro lado, temos uma outra opÃ§Ã£o de interpretaÃ§Ã£o do resultado dessa operaÃ§Ã£o. De modo que, para produzirmos uma tabela que represente a uniÃ£o entre duas tabelas, poderÃ­amos simplesmente extrair todas as colunas de uma das tabelas, e inserÃ­-las na outra tabela.</p>
<p>Por exemplo, suponha que vocÃª possua uma tabela <code>A</code>, que contÃ©m duas colunas, chamadas <code>x</code> e <code>y</code>; e uma tabela <code>B</code>, que por sua vez, guarda 4 colunas diferentes, denominadas <code>x</code>, <code>z</code>, <code>r</code>, e <code>t</code>. Perceba que uma das colunas na tabela <code>B</code>, corresponde a mesma coluna <code>x</code> que encontramos na tabela <code>A</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tibble)</span>
<span id="cb1-2"></span>
<span id="cb1-3">A <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb1-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb1-6">)</span>
<span id="cb1-7"></span>
<span id="cb1-8">B <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb1-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">z =</span> letters[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>],</span>
<span id="cb1-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.6</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.2</span>),</span>
<span id="cb1-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">t =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tzu"</span></span>
<span id="cb1-13">)</span></code></pre></div>
</div>
<p>Se vocÃª deseja unir as tabelas <code>A</code> e <code>B</code>, vocÃª basicamente deseja criar uma nova tabela, que contÃ©m todas as cinco colunas dessas duas tabelas (<code>x</code>, <code>y</code>, <code>z</code>, <code>r</code> e <code>t</code>). Portanto, poderÃ­amos imaginar um processo de <em>join</em>, como se estivÃ©ssemos transportando todas as colunas da tabela <code>B</code>, para dentro da tabela <code>A</code>. Dessa maneira, temos a tabela abaixo como resultado:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">full_join</span>(A, B, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 Ã— 5
      x     y z         r t    
  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;
1     1  1.5  a       3.5 tzu  
2     2  2.02 b       2.1 tzu  
3     3  1.34 c       1   tzu  
4     4  1.24 d       5.6 tzu  
5     5  2.49 e       7.2 tzu  </code></pre>
</div>
</div>
<p>Com isso, estamos criando a ideia de que <strong>um <em>join</em> possui sempre um sentido e uma direÃ§Ã£o</strong>. Em outras palavras, primeiro, extraÃ­mos as colunas da tabela <code>B</code>, e em seguida, acrescentamos essas colunas Ã  tabela <code>A</code>. Repare que estamos sempre partindo da tabela <code>B</code> em direÃ§Ã£o a tabela <code>A</code>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/direcao.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="tabela-destinatÃ¡ria-e-tabela-fonte" class="level1">
<h1>Tabela destinatÃ¡ria e tabela fonte</h1>
<p>Por essa perspectiva, podemos interpretar que, em um <em>join</em>, estamos trazendo todas as colunas de uma tabela secundÃ¡ria, para dentro de nossa tabela principal (ou a nossa tabela de interesse). Temos a opÃ§Ã£o de chamarmos essas tabelas de: <strong>tabela fonte</strong> (tabela secundÃ¡ria) e <strong>tabela destinatÃ¡ria</strong> (tabela principal). Com isso, temos que um <em>join</em> sempre parte da <strong>tabela fonte</strong> em direÃ§Ã£o Ã  <strong>tabela destinatÃ¡ria</strong>.</p>
<p>Essa perspectiva faz sentido com a prÃ¡tica de <em>joins</em>. Pois em qualquer anÃ¡lise, nÃ³s comumente trabalhamos com uma tabela â€œprincipalâ€, ou uma tabela que contÃ©m os principais dados que estamos analisando. E quando utilizamos algum <em>join</em>, estamos geralmente trazendo colunas de outras tabelas para dentro dessa tabela â€œprincipalâ€ (ou tabela â€œdestinatÃ¡riaâ€, segundo essa perspectiva). Por isso, tenha em mente que um <em>join</em> sempre parte da <strong>tabela fonte</strong> em direÃ§Ã£o Ã  <strong>tabela destinatÃ¡ria</strong>.</p>
</section>
<section id="tipos-de-outer-join" class="level1">
<h1>Tipos de <em>outer join</em></h1>
<p>Um <em>join</em> natural (<em>inner join</em>) usualmente gera uma perda de observaÃ§Ãµes de ambas as tabelas envolvidas no processo. Em contrapartida, um <em>join</em> do tipo <em>outer</em> (isto Ã©, um <em>outer join</em>), busca delimitar qual das duas tabelas serÃ¡ preservada no resultado. Ou seja, um <em>outer join</em> busca manter as linhas de pelo menos uma das tabelas envolvidas, no resultado do <em>join</em>.</p>
<p>Temos trÃªs tipos principais de <em>outer joins</em>, que sÃ£o <em>left join</em>, <em>right join</em> e <em>full join</em>. O <em>full join</em> Ã© o mais simples de se compreender, pois ele busca manter todas as linhas de ambas as tabelas empregadas. Logo, mesmo que haja alguma observaÃ§Ã£o nÃ£o encontrada em uma das tabelas, ela serÃ¡ preservada no produto final da operaÃ§Ã£o.</p>
<p>No entanto, <em>left join</em> e <em>right join</em> buscam conservar as linhas de apenas uma das tabelas utilizadas no <em>join</em>. Nesse ponto, muitos professores diriam algo como: â€œse temos desejamos aplicar um <em>join</em> entre as tabelas <code>A</code> e <code>B</code>, um <em>left join</em> irÃ¡ manter as linhas da tabela <code>A</code> e um <em>right join</em> vai manter as linhas da tabela <code>B</code>â€. Outros professores ainda tentariam dizer: â€œ<em>left join</em> irÃ¡ manter as linhas da tabela Ã  esquerda, enquanto um <em>right join</em> vai manter as linhas da tabela Ã  direitaâ€.</p>
<p>PorÃ©m, certa confusÃ£o pode ser facilmente aplicada em ambas alternativas. Digo, um aluno pode facilmente enfrentar a seguinte questÃ£o: â€œğŸ¤” Uhmmâ€¦ Eu nÃ£o me lembro muito bem. Um <em>left join</em> mantÃ©m as linhas da tabela <code>A</code>? Ou sÃ£o as linhas da tabela <code>B</code>?â€; ou entÃ£o, â€œğŸ¤” Pera! Mas qual das duas tabelas estÃ¡ a direita?â€.</p>
</section>
<section id="conclusÃ£o" class="level1">
<h1>ConclusÃ£o</h1>
<p>Com isso, segundo a perspectiva adotada nesse artigo, podemos entender que, um <em>left join</em> e um <em>right join</em> buscam manter as linhas da <strong>tabela destinatÃ¡ria</strong> e da <strong>tabela fonte</strong>, respectivamente. Dessa forma, ao utilizar um <em>right join</em> ou um <em>left join</em>, vocÃª deve se questionar o seguinte: â€œEu quero manter as linhas de minha tabela principal (tabela destinatÃ¡ria)? Ou da tabela secundÃ¡ria (tabela fonte), de onde estou extraindo as novas colunas?â€. Logo, se vocÃª deseja manter, por exemplo, as linhas de sua tabela principal (tabela destinatÃ¡ria), que Ã© o que ocorre na maioria das vezes, vocÃª sabe agora que vocÃª precisa utilizar um <em>left join</em>.</p>
<p>Em uma representaÃ§Ã£o visual, podemos reproduzir abaixo a imagem inicial desse artigo, que marca as linhas mantidas por cada um desses dois tipos de <em>join</em>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/featured.png" class="img-fluid"></p>
</div>
</div>


</section>

 ]]></description>
  <category>JOINs</category>
  <category>Teaching</category>
  <guid>https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/pt/index.html</guid>
  <pubDate>Sat, 02 Jan 2021 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2021/2021-01-02-tabela-destinataria-fonte/featured.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>Resultados do FormulÃ¡rio de Pesquisa de Interesse - Curso IntrodutÃ³rio de R</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/posts/2020/2020-10-17-formulario-pesquisa/pt/index.html</link>
  <description><![CDATA[ 




<p>Esse post faz parte de um projeto meu, de um Curso IntrodutÃ³rio de R. Esse projeto jÃ¡ tem um ano, que venho aperfeiÃ§oando-o, e a primeira vez que ele foi posto em prÃ¡tica (ou seja, a primeira vez que dei um curso da linguagem) foi no instituto de pesquisa onde trabalho, a FundaÃ§Ã£o JoÃ£o Pinheiro<sup>1</sup>. Foi um momento muito proveitoso, pois uma das melhores formas de se aprender uma matÃ©ria, Ã© tentando ensinÃ¡-la para outras pessoas.</p>
<p>Aprimorei e venho aprimorando constatemente o meu conhecimento da linguagem R, e agora, uma nova oportunidade de ensinar essa linguagem, surgiu atravÃ©s de um convite da CORECON-MG<sup>2</sup> AcadÃªmico. Com a ideia de compreendermos melhor as preferÃªncias do potencial pÃºblico desse curso, nÃ³s lanÃ§amos um formulÃ¡rio de pesquisa no dia 10/10/2020.</p>
<p>Neste post, estarei analisando rapidamente as respostas que coletamos por esse formulÃ¡rio. Por motivos Ã³bvios, as informaÃ§Ãµes pessoais daqueles que responderam ao formulÃ¡rio, foram omitidas nesse artigo.</p>
<section id="tivemos-inclusive-pessoas-de-outros-paÃ­ses" class="level1">
<h1>Tivemos inclusive pessoas de outros paÃ­ses!</h1>
<p>No momento em que estou montando essa anÃ¡lise, tivemos no total, 122 respostas ao formulÃ¡rio. Mesmo sendo um nÃºmero relativamente pequeno de pessoas, atingimos os mais diversos locais do paÃ­s, abrangendo todas as cinco regiÃµes do paÃ­s.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(respostas)</span></code></pre></div>
</div>
<pre><code>[1] 122</code></pre>
<p>As respostas ao formulÃ¡rio nÃ£o tinham um padrÃ£o bem definido, e por isso algumas respostas tiveram que ser ajustadas. Ao final desse ajuste, percebemos que pessoas de 61 instituiÃ§Ãµes diferentes responderam ao formulÃ¡rio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(instituicoes)</span></code></pre></div>
</div>
<pre><code>[1] 61</code></pre>
<p>A maior parte das instituiÃ§Ãµes Ã s quais os respondentes pertenciam, estÃ£o localizadas na regiÃ£o Sudeste, com 22 instituiÃ§Ãµes. O Nordeste vem logo em seguida, com 16 insituiÃ§Ãµes. Agora, as instituiÃ§Ãµes que nÃ£o foram designadas para alguma regiÃ£o (<code>NA</code>), sÃ£o na verdade instituiÃ§Ãµes de fora do Brasil. Isso significa que tivemos 5 respostas vindas de outros paÃ­ses, ao formulÃ¡rio de interesse no curso.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb5-2"></span>
<span id="cb5-3">instituicoes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(Regiao) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">contagem =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>())</span></code></pre></div>
</div>
<pre><code># A tibble: 6 Ã— 2
  Regiao       contagem
  &lt;chr&gt;           &lt;int&gt;
1 Centro Oeste        3
2 Nordeste           15
3 Norte               9
4 Sudeste            22
5 Sul                 7
6 NA                  5</code></pre>
<p>A maioria das pessoas que responderam ao formulÃ¡rio, provinham de instituiÃ§Ãµes localizadas no estado Minas Gerais. Grande parte das respostas foram da UFOP (que Ã© a instituiÃ§Ã£o na qual estudo), totalizando 22 respostas. AlÃ©m disso, nÃ£o recebemos respostas de alguns estados, que estÃ£o marcados em cinza no grÃ¡fico abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(geobr)</span>
<span id="cb7-2">brasil <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_state</span>()</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">resp_sum <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> respostas <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(Regiao, Instituicao, abbrev, Estado) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(Estado, Regiao) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">contagem =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>())</span>
<span id="cb8-5"></span>
<span id="cb8-6">brasil <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> brasil <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(resp_sum, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name_state"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Estado"</span>))</span>
<span id="cb8-8"></span>
<span id="cb8-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> brasil) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> Regiao)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_sf_coordinates</span>(</span>
<span id="cb8-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> contagem),</span>
<span id="cb8-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">geom =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span></span>
<span id="cb8-14">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb8-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"NÃºmero de respostas provenientes de cada estado brasileiro"</span>,</span>
<span id="cb8-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RegiÃ£o"</span></span>
<span id="cb8-19">  )</span></code></pre></div>
</div>
<p><img src="https://pedro-faria.netlify.app/posts/2020/2020-10-17-formulario-pesquisa/resps-brasil.png" class="img-fluid"></p>
<p>Talvez o mais impressionante de tudo isso, Ã© que tivemos pessoas de outros paÃ­ses interessadas no curso. Cada um desses outros paÃ­ses obtiveram apenas uma assinatura, mas mesmo assim, Ã© no mÃ­nimo interessante ver o quÃ£o longe fomos. Os paÃ­ses atingidos (fora o Brasil), e as respectivas instituiÃ§Ãµes dos respondentes foram: Venezuela (Universidad de Carabobo); Cuba (Universidad de la Havana); MoÃ§ambique (ISRI - Instituto Superior De RelaÃ§Ãµes Internacionais); e Peru (Universidad Nacional de Ingeniaria); Portugal (Universidade de Lisboa).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">cores <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb9-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#F8766D"</span>,</span>
<span id="cb9-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cuba"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#BB9D00"</span>,</span>
<span id="cb9-4">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mozambique"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#7CAE00"</span>,</span>
<span id="cb9-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Venezuela"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#00A5FF"</span>,</span>
<span id="cb9-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peru"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#E76BF3"</span>,</span>
<span id="cb9-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Portugal"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4fc953"</span>,</span>
<span id="cb9-8">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"NÃ£o foi atingido"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#d4d4d4"</span></span>
<span id="cb9-9">)</span>
<span id="cb9-10"></span>
<span id="cb9-11">world<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cores <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unname</span>(cores[world<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>marca])</span>
<span id="cb9-12"></span>
<span id="cb9-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> world) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> cores)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_sf</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb9-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PaÃ­ses atingidos pelo formulÃ¡rio"</span>,</span>
<span id="cb9-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PaÃ­s de referÃªncia"</span></span>
<span id="cb9-20">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_identity</span>(</span>
<span id="cb9-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">guide =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend"</span>,</span>
<span id="cb9-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(cores),</span>
<span id="cb9-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unname</span>(cores)</span>
<span id="cb9-26">  )</span></code></pre></div>
</div>
<p><img src="https://pedro-faria.netlify.app/posts/2020/2020-10-17-formulario-pesquisa/resps-world.png" class="img-fluid"></p>
</section>
<section id="assuntos-requisitados" class="level1">
<h1>Assuntos requisitados</h1>
<p>O R Ã© uma linguagem que foi criada por estatÃ­sticos, e por isso, Ã© uma linguagem especializada em anÃ¡lise de dados e estatÃ­stica. Com isso, nÃ£o Ã© nenhuma surpresa que Econometria e AnÃ¡lise de SÃ©ries Temporais, tenham sido as principais sugestÃµes e assuntos requisitados para o curso, pelas pessoas que responderam o formulÃ¡rio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(wordcloud)</span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(RColorBrewer)</span>
<span id="cb10-3"></span>
<span id="cb10-4">assuntos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> respostas <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(Sugestao)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(Sugestao) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(n)</span>
<span id="cb10-9"></span>
<span id="cb10-10">cor <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brewer.pal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dark2"</span>)</span>
<span id="cb10-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(cor) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"8"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4"</span>)</span>
<span id="cb10-12">assuntos<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>color <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cor[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(assuntos<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n)]</span>
<span id="cb10-13"></span>
<span id="cb10-14"></span>
<span id="cb10-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wordcloud</span>(</span>
<span id="cb10-16">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">words =</span> assuntos<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Sugestao,</span>
<span id="cb10-17">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> assuntos<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n,</span>
<span id="cb10-18">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min.freq =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb10-19">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max.words =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>,</span>
<span id="cb10-20">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ordered.colors =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb10-21">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rot.per =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.35</span>,</span>
<span id="cb10-22">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use.r.layout =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb10-23">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb10-24">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors =</span> assuntos<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>color</span>
<span id="cb10-25">)</span></code></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://pedro-faria.netlify.app/posts/2020/2020-10-17-formulario-pesquisa/wordcloud.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="Ã¡reas-dos-respondentes" class="level1">
<h1>Ãreas dos respondentes</h1>
<p>A enorme maioria das pessoas que responderam eram alunos de graduaÃ§Ã£o, ou bachareis jÃ¡ formados. Como pode ser observado logo abaixo, tivemos tambÃ©m algumas pessoas com algum nÃ­vel de pÃ³s-graduaÃ§Ã£o.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">table</span>(respostas<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Nivel)</span></code></pre></div>
</div>
<pre><code>Doutorado GraduaÃ§Ã£o  Mestrado 
        4       113         5 </code></pre>
<p>Curiosamente, das 9 pessoas que possuÃ­am ou estavam fazendo pÃ³s-graduaÃ§Ã£o (mestrado ou doutorado), 6 eram de alguma Ã¡rea da SaÃºde ou das CiÃªncias BiolÃ³gicas. Apenas uma dessas 9 pessoas, pertencia a Ã¡rea de Economia. Esse resultado faz sentido, visto que a linguagem R tem se expandido muito em algumas Ã¡reas como a epidemiologia e principalmente em anÃ¡lise genÃ©tica, atravÃ©s de um conjunto de pacotes como o <code>Bioconductor</code><sup>3</sup>.</p>
<p>De qualquer maneira, olhando para o nÃºmero geral de respondentes, a grande maioria do pÃºblico atingido pelo formulÃ¡rio, foram graduandos (ou bachareis jÃ¡ formados) em Economia, totalizando 65 pessoas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">respostas <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Curso <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Economia"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb13-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>()</span></code></pre></div>
</div>
<pre><code>[1] 65</code></pre>
<p>Quanto Ã s 52 pessoas restantes que nÃ£o pertencem Ã  area de Economia, as Ã¡reas atingidas foram bem diversas. Foram 5 pessoas de Agronomia e 4 pessoas de Geologia. As demais Ã¡reas marcadas em laranja abaixo, correspondem a 2 pessoas, enquanto todas as outras em ciano obtiveram apenas 1 respondente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">areas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> respostas <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb15-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(Curso <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Economia"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb15-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(Curso) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb15-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb15-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(n)</span>
<span id="cb15-6"></span>
<span id="cb15-7">cor <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">brewer.pal</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dark2"</span>)</span>
<span id="cb15-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(cor) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(areas<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n)</span>
<span id="cb15-9">areas<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>color <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unname</span>(cor[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(areas<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n)])</span>
<span id="cb15-10"></span>
<span id="cb15-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wordcloud</span>(</span>
<span id="cb15-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">words =</span> areas<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Curso,</span>
<span id="cb15-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> areas<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>n,</span>
<span id="cb15-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min.freq =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb15-15">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max.words =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>,</span>
<span id="cb15-16">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ordered.colors =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb15-17">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rot.per =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.35</span>,</span>
<span id="cb15-18">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use.r.layout =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb15-19">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scale =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb15-20">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> areas<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>color</span>
<span id="cb15-21">)</span></code></pre></div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>http://novosite.fjp.mg.gov.br/â†©ï¸</p></li>
<li id="fn2"><p>Conselho Regional de Economia AcadÃªmico de Minas Gerais:http://corecon-mg.org.br/academico/â†©ï¸</p></li>
<li id="fn3"><p>https://www.bioconductor.org/â†©ï¸</p></li>
</ol>
</section></div> ]]></description>
  <category>R Language</category>
  <category>Teaching</category>
  <guid>https://pedro-faria.netlify.app/posts/2020/2020-10-17-formulario-pesquisa/pt/index.html</guid>
  <pubDate>Sat, 17 Oct 2020 03:00:00 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/posts/2020/2020-10-17-formulario-pesquisa/featured.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Introduction to pyspark</title>
  <dc:creator>Pedro Duarte Faria</dc:creator>
  <link>https://pedro-faria.netlify.app/publications/book/introd-pyspark/en/index.html</link>
  <description><![CDATA[ 




<section id="still-under-construction" class="level1">
<h1>Still under construction ğŸ› ï¸âš ï¸!</h1>
<p>This book is still under active construction and development! This means that not all chapters are ready yet, and the current contents might change in the close future. However, you can already read some of its parts by <a href="https://pedropark99.github.io/Introd-pyspark/">visiting its website</a>.</p>
</section>
<section id="about-the-book" class="level1">
<h1>About the book</h1>
<p><a href="https://github.com/pedropark99/Introd-pyspark"> <button type="button" class="btn btn-primary">Official repository</button></a> <a href="https://pedropark99.github.io/Introd-pyspark/"> <button type="button" class="btn btn-primary">Read online</button></a></p>
<p>In summary, this book aims to give a solid introduction (for python and not python users) to the <code>pyspark</code> package, and on how to use it to build Spark applications for data pipelines and interactive data analysis.</p>
<p>Although we have a good range of materials about Apache Spark in general, such as <span class="citation" data-cites="damji2020">Damji et al. (2020)</span> and <span class="citation" data-cites="chambers2018">Chambers and Zaharia (2018)</span>, we do not have much abundance of materials about the APIs of Spark in â€œforeignâ€ languages, like the Python (<code>pyspark</code>) and R (<code>SparkR</code>) APIs.</p>
<p>The reason for this is simple: the Spark API have a consistent structure across all languages. As consequence, a general book about Spark can fairly cover all languages at once. In other words, Spark code in Scala can be easily translated into python code with <code>pyspark</code>. Because the structure of the code is very similar between all languages.</p>
<p>So why this book? First, python is a more popular and friendly language than Scala or Java. If the reader is not interested in learning Java or Scala, why show Java/Scala code to him? Is very important to focus solely on what interest the reader, specially if it is in a language that he is familiar with. Second, I had some time to spent, and a lot of practical experience with <code>pyspark</code> on production to share (soâ€¦ why not write a book about it?).</p>
</section>
<section id="cover" class="level1">
<h1>Cover</h1>
<p><img src="https://pedro-faria.netlify.app/publications/book/introd-pyspark/featured.png" class="img-fluid" style="width:100.0%"></p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-chambers2018" class="csl-entry">
Chambers, Bill, and Matei Zaharia. 2018. <em>Spark: The Definitive Guide: Big Data Processing Made Simple</em>. Sebastopol, CA: Oâ€™Reilly Media.
</div>
<div id="ref-damji2020" class="csl-entry">
Damji, Jules, Brooke Wenig, Tathagata Das, and Denny Lee. 2020. <em>Learning Spark: Lightning-Fast Data Analytics</em>. Sebastopol, CA: Oâ€™Reilly Media.
</div>
</div></section></div> ]]></description>
  <category>Python</category>
  <category>Apache Spark</category>
  <category>Book</category>
  <guid>https://pedro-faria.netlify.app/publications/book/introd-pyspark/en/index.html</guid>
  <pubDate>Fri, 03 Nov 2023 19:10:22 GMT</pubDate>
  <media:content url="https://pedro-faria.netlify.app/publications/book/introd-pyspark/featured.png" medium="image" type="image/png" height="215" width="144"/>
</item>
</channel>
</rss>
